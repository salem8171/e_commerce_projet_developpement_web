/*
 DHgate Language Packages

 Copyright 2014 Ellvas
 Released under the MIT license
 jQuery-ajaxTransport-XDomainRequest - v1.0.3 - 2014-06-06
 https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 Copyright (c) 2014 Jason Moon (@JSONMOON)
 Licensed MIT (/blob/master/LICENSE.txt)
*/
var $jscomp={scope:{},findInternal:function(b,c,d){b instanceof String&&(b=String(b));for(var f=b.length,e=0;e<f;e++){var g=b[e];if(c.call(d,g,e,b))return{i:e,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,c,d,f){if(c){d=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var e=b[f];e in d||(d[e]={});d=d[e]}b=b[b.length-1];f=d[b];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6-impl","es3");
define("common/config",["lib/jquery","tools/dhgate.cookie"],function(b,c){var d=(!1===/https/i.test(location.protocol)?"http://":"https://")+location.hostname,f=d.match(/(es|pt|ru|fr|de|it|ca|in|uk|au|tr|nz|mx|cl|co|pe|hk)\.dhgate.+/i)||(window._customHost?window._customHost:"en");/(A|a)ndroid/i.test(navigator.userAgent);var e=c.DHCookieUtil,f=$.isArray(f)?f[1]:f;window._gaq&&window.ga||(window._gaq={push:function(b){"_trackEvent"==b[0]&&gtag("event",b[2],{event_category:b[1],event_label:b[3]})}},
window.ga=function(){"event"==arguments[1]&&gtag("event",a[3],{event_category:a[2],event_label:a[4]})});return{getVisitorType:function(){var b=/(http|https):\/\/(.*)(google|yahoo|bing|aol|ask|search-results|yandex)\.(.+)/i,c=/(\?q=|\&q=|\?p=|&p=|\?text=|&text=)([^&]+)/,e=/bm|([^\|]+\|){5}([^\|]+)\|.*/,f=document.referrer+document.location.href,d={_f:"",keywords:"",_ref:""},f=f.replace(/%7c/gi,"|");/\?f=bm/.test(f)?(d._f="PPC",e.test(f)&&(d.keywords=RegExp.$3)):b.test(f)&&(d._f="SEO",c.test(f)&&(d.keywords=
RegExp.$3));/(http|https):\/\/([^\/]+).*/i.test(document.referrer)&&(b=RegExp.$2,/dhgate\.com/i.test(b)||(d._ref=b));return d},isLocalStorageNameSupported:function(){try{return localStorageName in win&&win[localStorageName]}catch(g){return!1}},wwwURL:d,WWWHostName:location.hostname,wwwPATHNAME:location.pathname,wwwHASH:location.hash,hostWrite:"//dg.dhgate.com",hostRead:"//"+("en"==f?"www":f)+".dhgate.com",staticImage:"//www.dhresource.com",staticJS:"//js.dhresource.com",staticCSS:"//css.dhresource.com",
wwwSEARCH:location.search,countrys:{en:"English (EN)",es:"Espa\u00f1ol (ES)",pt:"Portugu\u00eas (PT)",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 (RU)",fr:"Fran\u00e7ais (FR)",de:"Deutsch (DE)",it:"Italiano (IT)"},countryCur:f,ipCountry:e.getcookie("b2b_ip_country")||"",version:"up-1542369171208",b2b_nick_n:e.getcookie("b2b_nick_n"),b2b_buyer_lv:e.getcookie("b2b_buyer_lv"),buyerId:e.getcookie("b2b_buyerid")}});
define("common/langLoader",["common/config"],function(b){return{get:function(c){$.ajax({type:"GET",url:"//js.dhresource.com/multi/common/lang/msg_"+b.countryCur+".js?v="+b.version,context:window,async:!0,cache:!0,dataType:"script",success:c})}}});
(function(b,c,d){var f=b.DH||{};f.request=function(){var b=f.lang||"en",c=arguments,d=c.length,h;1==d&&(h="string"===$.type(c[0])?{url:c[0]}:c[0]);2==d&&(h=c[1],h.url=c[0]);h.data=h.data||{};"string"===$.type(h.data)?h.data=h.data+"&lang="+b:h.data.lang=b;return $.ajax(h)};b.DH=f;b.$L=function(b,c){c=c||{};return void 0===f.I18N[b]?"":f.I18N[b].replace(/\$\{(\w+)\}/ig,function(b,e){return void 0!==c[e]?c[e]:""})}})(window,document,void 0);
(function(b){"function"===typeof define&&define.amd?(b(jQuery),define("tools/jquery.cookie",["lib/jquery"],b)):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){function c(b){b=e.json?JSON.stringify(b):String(b);return e.raw?b:encodeURIComponent(b)}function d(c,d){var h;if(e.raw)h=c;else a:{var g=c;0===g.indexOf('"')&&(g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{g=decodeURIComponent(g.replace(f," "));h=e.json?JSON.parse(g):g;break a}catch(n){}h=void 0}return b.isFunction(d)?
d(h):h}var f=/\+/g,e=b.cookie=function(f,l,h){if(void 0!==l&&!b.isFunction(l)){h=b.extend({},e.defaults,h);if("number"===typeof h.expires){var g=h.expires,n=h.expires=new Date;n.setTime(+n+864E5*g)}return document.cookie=[e.raw?f:encodeURIComponent(f),"=",c(l),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}h=f?void 0:{};for(var g=document.cookie?document.cookie.split("; "):[],n=0,p=g.length;n<p;n++){var t=
g[n].split("="),q;q=t.shift();q=e.raw?q:decodeURIComponent(q);t=t.join("=");if(f&&f===q){h=d(t,l);break}f||void 0===(t=d(t))||(h[q]=t)}return h};e.defaults={};b.removeCookie=function(c,e){if(void 0===b.cookie(c))return!1;b.cookie(c,"",b.extend({},e,{expires:-1}));return!b.cookie(c)}});
(function(b,c){if("object"===typeof exports&&"function"===typeof require)module.exports=c(require("lib/jQuery"),require("tools/jquery.cookie"));else if("function"===typeof define&&define.amd){var d=c(jQuery);b.DHCookieUtil=d.DHCookieUtil;b.DHCookieConts=d.DHCookieConts;define("tools/dhgate.cookie",["tools/jquery.cookie"],function(b){return c(jQuery,b)})}else d=c(jQuery,jCookie),b.DHCookieUtil=d.DHCookieUtil,b.DHCookieConts=d.DHCookieConts})(this,function(b,c){var d={rmcookie:function(b,c){$.removeCookie(b,
c)},addcookie:function(b,c,f){$.cookie(b,c,f)},addcookies:function(b,c,f,d){if(void 0===c)throw Error("subkey is no exist!");var e=($.cookie(b)||"").split("|"),h={};$.each(e,function(b,c){if(c.length){var e=c.split("=");h[e[0]]=e[1]}});h[c]=encodeURIComponent(f);__hasProp={}.hasOwnProperty;valueArr=[];for(var g in h)__hasProp.call(h,g)&&valueArr.push(g+"="+h[g]);this.addcookie(b,valueArr.join("|"),d)},getcookie:function(b){return $.cookie(b)},getcookies:function(b,c){if(void 0===c)throw Error("subkey is no exist!");
var e=(this.getcookie(b)||"").split("|"),e=$.map(e,function(b){b=b.split("=");if(b[0]===c)return decodeURIComponent(b[1])});return e.length?e[0]:null}},f={DOMAIN_ROOT:".dhgate.com",DOMAIN_WWW:".www.dhgate.com",DOMAIN_SELLER:".seller.dhgate.com",B_U_AU:"b_u_au",B_U_AU_BLMN:"blmn",B_U_AU_BLML:"blml",B_U_AU_ME:"me",B_U_AU_TUID:"tuid",B_U_INF:"b_u_inf",B_U_INF_BID:"bid",B_U_INF_NN:"nn",B_U_INF_DN:"dn",B_U_CC:"b_u_cc",B_U_CC_UCC:"ucc",B_U_CC_IPCC:"ipcc",B_U_CC_CTCC:"ctcc",B_UE:"b_ue",B_UE_ILOGIN:"ilogin",
B_UE_IREG:"ireg",S_UE:"s_ue",S_UE_ETIP:"etip",S_UE_ERD:"erd",S_UE_SRED:"sred",S_UE_KTIP:"ktip",S_UE_COSTIP:"costip",S_UE_P2TIP:"p2tip",S_UE_ORTIP:"ortip",S_UE_PRTIP:"prtip",B_OTH_RD:"b_oth_rd",B_OTH_RD_ICODE:"icode",B_OTHER:"b_other"};window.DHCookieUtil=d;window.DHCookieConts=f;return{DHCookieUtil:d,DHCookieConts:f}});
define("tools/ntalkerim",["common/config","tools/dhgate.cookie"],function(b,c){var d=location.hostname.substring(0,location.hostname.indexOf(".")).toLowerCase(),f=c.DHCookieUtil;return{init:function(b){this.opts=$.extend(this.opts,b||{});this.link=location.href;b=d;switch(b){case "www":b="en";break;case "ru":b="ru";break;case "de":b="de";break;case "fr":b="fr";break;case "es":b="es";break;case "it":b="it";break;case "pt":b="pt";break;default:b="en"}this.hostCode=b;this.type=this.opts.type||"dh";this.version=
this.opts.version||"1708211600";b="en"==this.hostCode?"en_us":this.hostCode;this.url="dh"==this.type?(this.opts.url||"//www.dhresource.com/dhs/thirdparty/ntalker/ntkfstat.js?siteid=dh_1000&lan=")+b+"&v="+this.version:(this.opts.url||"//download.ntalker.com/dhgate3/ntkfstat_")+b+".js?v="+this.version;this.$dRoot=this.opts.dRoot||$("body");this.cBtn=this.opts.cBtn||".j-onlinechat";this.nAttrSettingid=this.opts.nAttrSettingid||"data-settingid";this.nAttrProductid=this.opts.nAttrProductid||"data-productid";
this.nAttrSupplierid=this.opts.nAttrSupplierid||"data-supplierid";this.siteid=this.opts.siteid||"dh_1000";this.sellerid=this.opts.sellerid||"dh_1000";this.settingid=this.opts.settingid||"dh_1000_9999";this.productid=this.opts.productid||"";this.supplierid=this.opts.supplierid||"";this.uid=this.opts.uid||f.getcookie("b2b_buyerid");this.uname=this.opts.uname||f.getcookie("buyerusername");this.userlevel=this.opts.userlevel||"0";this.isLogIn=this.opts.isLogIn||f.getcookie("b2b_b_t_v2")||!1;this.setNtkfParam({siteid:this.siteid,
sellerid:this.sellerid,settingid:this.settingid,uid:this.uid,uname:this.uname,userlevel:this.userlevel,itemid:this.productid});window.NTKF?this.initEvents():this.loadScript(this.url,$.proxy(this.initEvents,this))},openIM:function(b,c,f,d,m){var e=f+"-DH-"+d+"-DH-"+c;this.isLogIn?("dh"==m?NTKF&&NTKF.im_openInPageChat(b,c,null,null,e):"kf"==m&&NTKF&&NTKF.t2d&&NTKF.t2d.openChatWindow(),this.clearParams()):(m=encodeURIComponent(location.href),this.setParams(m,b,f,d,c),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+
m)},loadScript:function(b,c){$.ajax({type:"GET",url:b,async:!0,cache:!0,dataType:"script",success:c})},initEvents:function(){this.autoOpen();this.$dRoot.delegate(this.cBtn,"click",$.proxy(this.fnChatClick,this))},setNtkfParam:function(b){window.NTKF_PARAM=$.extend(!0,{},b)},autoOpen:function(){try{var b=encodeURIComponent(this.link),c=this.hashCode(b),d=f.getcookies("b2b_im_params","o"),h=f.getcookies("b2b_im_params","curl"),m=f.getcookies("b2b_im_params","s"),n=f.getcookies("b2b_im_params","p"),
p=f.getcookies("b2b_im_params","b"),t=f.getcookies("b2b_im_params","t");window.NTKF_PARAM&&this.isLogIn&&"1"===d&&h==c&&this.openIM(m,n,p,t,this.type)}catch(q){void 0!==window.console&&console.log&&console.log(q),f.rmcookie("b2b_im_params",{domain:".dhgate.com",expires:0,path:"/"})}},fnChatClick:function(b){var c=$(b.target);b=this.type;var e=c.attr(this.nAttrSettingid)||this.settingid;e.replace(/(.*)_9999/,"$1");var f=c.attr(this.nAttrProductid)||this.productid||null,c=c.attr(this.nAttrSupplierid)||
this.supplierid;this.openIM(e,f,this.uid,c,b)},setParams:function(b,c,d,h,m){f.addcookie("b2b_im_params","o=1|curl="+this.hashCode(b)+"|s="+c+"|b="+d+"|t="+h+"|p="+m+"|",{domain:".dhgate.com",expires:1,path:"/"})},getParams:function(){},clearParams:function(){f.rmcookie("b2b_im_params",{domain:".dhgate.com",expires:0,path:"/"})},hashCode:function(b){var c=0,e;b=b?b+"":"";if(0<b.length)for(var f=0;f<b.length;f++)e=b.charCodeAt(f),c=(c<<5)-c+e,c&=c;return c}}});
define("tools/template",[],function(){(function(){function b(d,f){var e=/[^a-z0-9A-Z_-]+/.test(d)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+d.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[d]=c[d]||b(document.getElementById(d).innerHTML);return f?e(f):e}var c={};return b})();
return function(b,c){return b=_.template(b)(c)}});"use strict";
define("common/tools/request",["common/config"],function(b){var c={};return c={request:function(){var c=b.countryCur||"en",f=arguments,e=f.length,g;1==e&&(g="string"===$.type(f[0])?{url:f[0]}:f[0]);2==e&&(g=f[1],g.url=f[0]);g.data=g.data||{};"string"===$.type(g.data)?g.data=g.data+"&lang="+c:g.data.lang=c;return $.ajax(g)},$L:function(b,c){c=c||{};return void 0===DH.I18N[b]?"":DH.I18N[b].replace(/\$\{(\w+)\}/ig,function(b,f){return void 0!==c[f]?c[f]:""})}}});
(function(b){"function"===typeof define&&define.amd?(b(jQuery),define("tools/jquery.xdomainrequest",["lib/jquery"],b)):"object"===typeof exports?module.exports=b(require("jquery")):b(jQuery)})(function(b){if(b.support.cors||!b.ajaxTransport||!window.XDomainRequest)return b;var c=/^(https?:)?\/\//i,d=/^get|post$/i,f=new RegExp("^(//|"+location.protocol+")","i");b.ajaxTransport("* text html xml json",function(e,g,l){if(e.crossDomain&&e.async&&d.test(e.type)&&c.test(e.url)&&f.test(e.url)){var h=null;
return{send:function(c,f,d){c="";var m=(g.dataType||"").toLowerCase();h=new XDomainRequest;/^\d+$/.test(g.timeout)&&(h.timeout=g.timeout);h.ontimeout=function(){f(500,"timeout")};h.onload=function(){var c="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,e=200,d="success",g={text:h.responseText};try{if("html"===m||/text\/html/i.test(h.contentType))g.html=h.responseText;else if("json"===m||"text"!==m&&/\/json/i.test(h.contentType))try{g.json=b.parseJSON(h.responseText)}catch(y){e=
500,d="parseerror"}else if("xml"===m||"text"!==m&&/\/xml/i.test(h.contentType)){var l=new ActiveXObject("Microsoft.XMLDOM");l.async=!1;try{l.loadXML(h.responseText)}catch(y){l=void 0}if(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)throw e=500,d="parseerror","Invalid XML: "+h.responseText;g.xml=l}}catch(y){throw y;}finally{f(e,d,g,c)}};h.onprogress=function(){};h.onerror=function(){f(500,"error",{text:h.responseText});console.log("error")};g.data&&(c="string"===b.type(g.data)?
g.data:b.param(g.data));h.open(e.type,e.url);h.send(c)},abort:function(){h&&(console.log("abort"),h.abort())}}}});return b});
define("common/feedback",["common/config","tools/dhgate.cookie"],function(b){b=function(b){this.options=$.extend({el:"#J_FeedBack",$main:".main-content",$goTop:"#J_GoTop",$survey:"#J_Survey",selector:{hover:"-j-fui-fbar"},hpx:10,html:!1},b||{});this.el=$(this.options.el);this.$main=$(this.options.$main);this.$goTop=$(this.options.$goTop);this.$survey=$(this.options.$survey);this.isIE6=$.browser.msie&&"6.0"==$.browser.version&&!$.support.style;this.init()};b.prototype={init:function(){this.bind()},
bind:function(){var b=$(window);b.height();b.width();this.el.css("z-index",99999);this.$goTop.live("click",this.goTopHandler);b.bind("scroll",$.proxy(this.scroll,this));this.el.find("."+this.options.selector.hover+"-hover").bind("mouseenter",$.proxy(this.mouseEnter,this)).bind("mouseleave",$.proxy(this.mouseLeave,this)).bind("click",$.proxy(this.mobileClick,this));this.resetPosition();this.el.show();this.QRCode()},scroll:function(b){b=$(window);var c=b.height();b.width();b.scrollTop()>c?this.$goTop.show():
this.$goTop.hide();this.isIE6?this.el.addClass("fixed-ie6"):this.el.removeClass("fixed-ie6")},mobileClick:function(b){b=$(b.target);var c=this.options.selector.hover+"-hover",f=b.attr("data-link");b.hasClass(c)&&f&&window.open(b.attr("data-link"))},mouseEnter:function(b){this.el.find("."+(this.options.selector.hover+"-tip")).show()},mouseLeave:function(b){this.el.find("."+(this.options.selector.hover+"-tip")).hide()},QRCode:function(){try{var b=$(".layerQROut");DHCookieUtil.getcookies("b_oth_b","qrcode")?
b.remove():(b.show(),b.find(".icon-sclose").bind("click",function(){DHCookieUtil.addcookies("b_oth_b","qrcode","1",{domain:".www.dhgate.com",expires:30,path:"/"});b.remove()}))}catch(d){}},resetPosition:function(){this.el.css("right",this.options.hpx||10)},goTopHandler:function(){$("html, body").animate({scrollTop:0},500,function(){$("html, body").unbind("DOMMouseScroll mousewheel")}).one("DOMMouseScroll mousewheel",function(){$("html, body").stop()})}};return b});
define("common/share/webLinkShare",["common/config"],function(b){function c(b,c,e){var f="",d=window.location.href,h=$("#canonicalUrl").attr("href");void 0==h?0<d.indexOf("#")&&(d=d.substring(0,d.indexOf("#"))):d=h;var m="";"pinterest"==b&&(m=$("#firstBImage >span >img").attr("src"));""!=m&&void 0!=m&&(m=encodeURIComponent(m));h=encodeURIComponent(d);f=encodeURIComponent(c||f);e=encodeURIComponent(e);var n,p=!0;if("email"==b)b=document.createElement("a"),b.setAttribute("href","mailto:?subject=Your friend recommends this product (via DHgate.com)&body="+
c.replace(/\&+|\@+|\'+|"+/g,"")+h),b.setAttribute("style","display:none;"),b.innerHTML="email",document.body.appendChild(b),b.click();else{switch(b){case "del.icio.us":n="https://delicious.com/post?title="+f+"&url="+h;break;case "digg":n="http://digg.com/submit?phase=2&url="+h+"&title="+f+"&bodytext="+e+"&topic=tech_deals";break;case "reddit":n="http://reddit.com/submit?url="+h+"&title="+f;break;case "furl":n="http://www.furl.net/savedialog.jsp?t="+f+"&u="+h;break;case "rawsugar":n="http://www.rawsugar.com/home/extensiontagit/?turl="+
h+"&tttl="+f;break;case "stumbleupon":n="http://www.stumbleupon.com/submit?url="+h+"&title="+f;break;case "facebook":n="http://www.facebook.com/share.php?src=bm&v=4&u="+h+"&t="+f;break;case "technorati":n="http://technorati.com/faves?sub=favthis&add="+h;break;case "spurl":n="http://www.spurl.net/spurl.php?v=3&title="+f+"&url="+h;break;case "simpy":n="http://www.simpy.com/simpy/LinkAdd.do?title="+f+"&href="+h;break;case "google":n="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk="+h+
"&title="+f;break;case "netscape":n="http://www.netscape.com/submit/?U="+h+"&T="+f+"&C="+e;break;case "slashdot":n="http://slashdot.org/bookmark.pl?url="+d+"&title="+f;break;case "backflip":n="http://www.backflip.com/add_page_pop.ihtml?title="+f+"&url="+h;break;case "bluedot":n="http://bluedot.us/Authoring.aspx?u="+h+"&t="+f;break;case "kaboodle":n="http://www.kaboodle.com/za/selectpage?p_pop=false&pa=url&u="+h;break;case "squidoo":n="http://www.squidoo.com/lensmaster/bookmark?"+h;break;case "twitter":n=
"https://twitter.com/intent/tweet?status="+f+":+"+h;break;case "pinterest":n="http://pinterest.com/pin/create/button/?url="+h+"&media="+m+"&description="+f;break;case "vk":n="http://vk.com/share.php?url="+d;break;case "bluedot":n="http://blinkbits.com/bookmarklets/save.php?v=1&source_url="+h+"&title="+f;break;case "blinkList":n="http://blinkbits.com/bookmarklets/save.php?v=1&source_url="+h+"&title="+f;break;case "linkedin":n="http://www.linkedin.com/cws/share?url="+h+"&title="+f;break;case "googleplus":n=
"https://plus.google.com/share?url="+h;break;case "browser":bookmarksite(c,d),p=!1}1==p&&window.open(n,"bookmarkWindow")}}window.description="";window.title=window.document.title;return window.loadPage=c});
define("common/share/facebookSDK",["common/config"],function(b){var c={initialize:function(b){b="[object Array]"===Object.prototype.toString.call(b)?b:["CN"];c.filter(b)&&c.getFBScript()},getFBScript:function(){$.getScript("//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=560836880717193",function(){var b,c=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(b=document.createElement("script"),b.id="facebook-jssdk",b.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=560836880717193",
c.parentNode.insertBefore(b,c))})},filter:function(b){return!0}};return c});
define("common/googletranslate",["common/config"],function(b){var c=function(b){this.config={wrap:"#t-Language",trigger:"#t-Language a",panle:"#t-Language-List",activeClass:"t-active"};this.setoptions(b);this.events=this.constructor.events=$({});this.initialize()};c.prototype={constructor:c,initialize:function(){this.$wrap=$(this.config.wrap);this.$trigger=$(this.config.trigger);this.$panle=$(this.config.panle);this.initEvents();this.initTranslate()},initTranslate:function(b){b=document.createElement("script");
var c=document.getElementsByTagName("script")[0];window.googleTranslateElementInit=this.translateElement;b.type="text/javascript";b.async=!0;b.src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";c.parentNode.insertBefore(b,c)},translateElement:function(){new google.translate.TranslateElement({pageLanguage:b.countryCur||"en",autoDisplay:!1,layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element")},setoptions:function(b){this.config=$.extend(!0,
this.config,b||{})},initEvents:function(){var b=this;this.events.on("translate:show",$.proxy(this.show,this));this.events.on("translate:hide",$.proxy(this.hide,this));this.$trigger.on("click",$.proxy(this.click,this));$(document).click(function(c){$(c.target).closest("[translate-type]").length||b.events.trigger("translate:hide")})},click:function(b){this.events.trigger("translate:show")},show:function(){this.$panle.show();this.addStyle()},hide:function(){this.$panle.hide();this.removeStyle()},addStyle:function(){var b=
this.$wrap.attr("page-type");b&&"1"==b&&this.$wrap.addClass(this.config.activeClass)},removeStyle:function(){var b=this.$wrap.attr("page-type");b&&"1"==b&&this.$wrap.removeClass(this.config.activeClass)}};return c});
define("common/recommends/recommends",["common/config","lib/backbone"],function(b){function c(b,c){var e,f,d,m,n=b.match(/(\$\{\w+\})/g);if(null!=n)for(e=0,f=n.length;e<f;e++)d=n[e],m=d.replace(/(\$\{|\})/g,""),m=void 0!==c[m]?c[m]:"",b=b.replace(d,m);return b}function d(b,c){this._cache={};this.opt=$.extend(!0,{hide:1,cycle:0,api:"",per:7,total:28,disableClass:"disable",prevClass:".j-prev",nextClass:".j-next",pageClass:".j-page",listClass:".j-list",tpl:{},param:{},el:{},onFail:function(){},onSucc:function(){},
ajaxFlag:!0},b);this.formatData=b.formatData||function(b){return b};this.currentPage=0;this.pageTotal=Math.ceil(this.opt.total/this.opt.per);this.tpl=b.tpl;this.initElement();this.initEvent()}d.init=function(c){var e=b.getVisitorType();myopt=$.extend(!0,{param:e,tpl:{item:'<li><div class="viewed-img2"><a href="${link}" title="${title}"><img src="${imgSrc}" alt="${title}" /><div class="viewed-transparent"></div><p class="viewed-text">${title}</p></a></div>${a}</li>',page:"<span>${page}</span>/${total}"}},
c);req=new d(myopt);req.page(1)};$.extend(d.prototype,{initElement:function(){var b=$(this.opt.el.box),c=this.opt;this.el={box:b,list:c.el.list?$(c.el.list):b.find(c.listClass),prev:c.el.prev?$(c.el.prev):b.find(c.prevClass),next:c.el.next?$(c.el.next):b.find(c.nextClass),page:c.el.page?$(c.el.page):b.find(c.pageClass)}},initEvent:function(){var b=this;this.el.prev.click(function(){$(this);b.page(b.currentPage-1);return!1});this.el.next.click(function(){$(this);b.page(b.currentPage+1);return!1});
this.el.box.bind("mouseenter",function(){b.el.prev.show();b.el.next.show()}).bind("mouseleave",function(){b.el.prev.hide();b.el.next.hide()})},loadData:function(b){var c=this;this.cache(b)?this.loadSuccess(b,this.cache(b)):this.opt.ajaxFlag?$.get(this.opt.api,this.getParam(b),function(e){e&&200==e.code?(c.cache(b,e.result),c.loadSuccess.apply(c,[b,e.result])):c.loadFail(b)},"json"):DH.request({url:this.opt.api,type:"get",data:this.getParam(b),dataType:"json",cache:!1,success:function(e){e&&200==e.code?
(c.cache(b,e.result),c.loadSuccess.apply(c,[b,e.result])):c.loadFail(b)},error:function(){}})},getParam:function(b){return $.extend({pagenum:b,pagesize:this.opt.per,productnum:this.opt.total,_r:(new Date).getTime()},this.opt.param)},loadSuccess:function(b,c){if(1==b&&this.opt.hide){if(!c||1>c.length){this.el.box.hide();this.opt.onFail();return}this.opt.onSucc();this.el.box.show()}this.currentPage=b;this.render(b,c)},loadFail:function(b){1==b&&(this.opt.onFail(),this.el.box.hide())},cache:function(b,
c){if(b&&c)this._cache[b]=c;else if(b)return this._cache[b]},setData:function(b){var c=Math.ceil(b.length/this.opt.per);this.pageTotal=c;for(var f=0;f<c;f++)this._cache[f+1]=b.slice(f*this.opt.per,(f+1)*this.opt.per)},page:function(b){this.opt.cycle?(1>b&&(b=this.pageTotal),b>this.pageTotal&&(b=1)):(1>=b&&(b=1),b>this.pageTotal&&(b=this.pageTotal));b!=this.currentPage&&(this.currentPage=b,this.loadData(b))},render:function(b,c){1==b&&1>c.length&&this.el.box.hide();this.showPage(b);this.renderPageContent(b,
c)},showPage:function(b){this.opt.cycle||(1==b?this.setPageButton("prev",2):this.setPageButton("prev",1),b==this.pageTotal?this.setPageButton("next",2):this.setPageButton("next",1));this.el.page.html(c(this.tpl.page,{page:b,total:this.pageTotal}))},renderPageContent:function(b,e){for(var d=[],f=0;f<e.length;f++){var h=this.formatData(e[f]);h.index=(b-1)*this.opt.per+f+1;d.push(c(this.tpl.item,h))}this.el.list.html(d.join(""))},setPageButton:function(b,c){var e="prev"==b?this.el.prev:this.el.next,
d=this.opt.disableClass;1===c&&e.removeClass(d);2===c&&e.addClass(d)}});return d});
define("common/recommends/youviewed",["common/config","lib/backbone"],function(b){return{tpl:'<li><a href="${link}" title="${title}"><img src="${imgSrc}" alt="${title}" /></a></li>',api:"/dhrec/getRecentViewsList.action",trackPre:window.tversion||"hp1504",el:{box:$("#j-youViewed"),list:$("#j-youViewed .j-viewedList")},render:function(b){var c=[];if(b&&0<b.length){this.el.box.show();for(var f=0;f<b.length;f++){var e=b[f];e.link=e.link+"#"+this.trackPre+"-viewed-"+(f+1);e=this.tpl.replace(/\$\{title\}/g,
e.title).replace(/\$\{link\}/g,e.link).replace(/\$\{imgSrc\}/g,e.imgSrc);c.push(e)}this.el.list.html(c.join(""))}else this.el.box.hide()},loadData:function(b){var c=this;0<this.el.box.length&&$.get(c.api,b,function(b){b&&c.render(b.result)},"json")},init:function(b){b=$.extend({productnum:15,rurl:location.href,_r:(new Date).getTime()},b||{});this.loadData(b)}}});
define("favorite/top-favorites",["common/config"],function(b){var c=b.hostWrite,d=function(b){this.SetOptions(b);this.Init()};d.prototype={SetOptions:function(b){this.options={};$.extend(this.options,b||{})},Init:function(){$(".j-add-store").bind("click",$.proxy(this.addStore,this));this.addNum();this.isAdd()},addNum:function(){var b=$(".j-add-store").attr("supplierid"),e=$(".j-addstore-num");$.ajax({url:c+"/favorite/getsellerfavocount.do",data:{supplierid:b},type:"GET",cache:!1,dataType:"jsonp",
success:function(b){"0"==b.data&&e.text(b.count)},error:function(){}})},isAdd:function(){var d=$(".j-add-store"),e=d.attr("supplierid");$.ajax({url:c+"/favorite/issellerfavorite.do",data:{supplierid:e},type:"GET",cache:!1,dataType:"jsonp",success:function(c){"0"==c.data&&1==c.issellerfor&&(d.addClass("have-add-fav"),"en"==b.countryCur&&d.find("span").text("Added to Favorite Stores"))},error:function(){}})},addStore:function(d){var e=$(d.currentTarget),f=$(".j-addstore-num"),l=parseInt(f.text());d=
$.trim(e.siblings("a").text());var h=e.attr("supplierid"),m=$("#suppliernumhead").val(),n=location.hostname.split(".",1).join(""),p=this,m=void 0!=m?m:$("#supplierno").val();e.hasClass("have-add-fav")||$.ajax({url:c+"/favorite/addsellerfavorite.do",data:{supplierid:h,suppliernum:m,suppliername:d,site:n},type:"GET",cache:!1,dataType:"jsonp",success:function(c){0==c.islogin?(c=encodeURIComponent(location.href),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+c):($("body").append('<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="//dg.dhgate.com/favorite/storeList.do#mydh-head-favstore">Favorite Stores</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/storeList.do#mydh-head-favstore">Go to my Favorite Stores</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>'),
$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),p.popShow(),p.closePop(),e.addClass("have-add-fav"),"en"==b.countryCur&&e.find("span").text("Added to Favorite Stores"),l++,f.text(l))},error:function(){}})},popShow:function(){var b=this;b.SetPosition();$(window).bind("scroll resize",function(){b.SetPosition()})},closePop:function(){var b=$(".j-favorite-dialog"),c=$(".j-favorite-mask");$("body").delegate(".j-close-dialog","click",function(){b.remove();
c.remove()})},SetPosition:function(){var b,c,d,l,h,m,n,p=$(".j-favorite-dialog"),t=$(".j-favorite-mask"),q=$(".j-mask-iframe");b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=p.outerHeight(!0);l=p.outerWidth(!0);h=$(window).height();m=$(window).width();n=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(l=parseInt((m-l)/2+lScroll),d=parseInt((h-d)/2+n)):(l=parseInt((m-l)/2),d=parseInt((h-d)/2));p.css({top:d,left:l});t.css({width:c,height:b});q.css({width:c,
height:b})}};return d});
define("favorite/favorites",["common/config"],function(b){var c=b.hostWrite,d=function(b){this.SetOptions(b);this.productid=$("#"+this.options.productid);this.selectors=this.options.selectors;this.isIE6=$.browser.msie&&"6.0"==$.browser.version;this.Init()};d.prototype={SetOptions:function(b){this.options={productid:"productid",selectors:{addfavbtn:".j-add-fav",addtostore:".j-addto-store",listbtn:".j-add-detail ul li",addnewbtn:".j-addnew-btn",radiobtn:".j-radio",confirmadd:".j-confirm-add",notebox:".j-add-note"}};
$.extend(this.options,b||{})},Init:function(){var b=$("body");b.delegate(this.selectors.addfavbtn,"click",$.proxy(this.addFav,this));b.delegate(this.selectors.listbtn,"click",$.proxy(this.selectList,this));b.delegate(this.selectors.addnewbtn,"click",$.proxy(this.addNew,this));b.delegate(this.selectors.radiobtn,"click",$.proxy(this.radioSelect,this));b.delegate(this.selectors.confirmadd,"click",$.proxy(this.confirmAdd,this));b.delegate(this.selectors.addtostore,"click",$.proxy(this.addToStore,this));
b.delegate(this.selectors.notebox,"keyup",$.proxy(this.textLimit,this));this.addNum();this.isAdd()},addNum:function(){var b=this.productid.val(),e=$(".j-favnum");$.ajax({url:c+"/favorite/getprodfavocount.do",data:{productid:b},type:"GET",cache:!1,dataType:"jsonp",success:function(b){"0"==b.data&&e.text(b.count)},error:function(){}})},isAdd:function(){var d=this.productid.val(),e=location.hostname.split(".",1).join(""),g=this;$.ajax({url:c+"/favorite/isprodfavorite.do",data:{productid:d,site:e},type:"GET",
cache:!1,dataType:"jsonp",success:function(c){"0"==c.data&&1==c.isprofor&&($(g.selectors.addfavbtn).addClass("have-add-fav"),"en"==b.countryCur&&$(g.selectors.addfavbtn).find(".add-btn-main").text("Added to Favorites"))},error:function(){}})},addFav:function(d){var e=$(d.currentTarget),f=location.hostname;if("en"==b.countryCur){var l=$(".j-addnew-btn"),h=e.next(".j-add-detail"),m=h.find("ul");e.hasClass("have-add-fav")||$.ajax({url:c+"/favorite/getgrouplist.do",type:"GET",cache:!1,dataType:"jsonp",
success:function(b){if(0==b.islogin){var c=encodeURIComponent(location.href);location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+c}else if(m.html(""),m.append('<li groupid="0" grouplink="//dg.dhgate.com/favorite/proddetaillist.do#mydh-head-favitem"><span>Default List</span></li>'),h.show(),c=b.data){b="";for(var e=0;e<c.length;e++)b="1"==c[e].grouptype?b+('<li groupid="'+c[e].favoritegroupid+'" grouplink="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+c[e].favoritegroupid+'#mydh-head-favitem"><span>'+
c[e].favoritegroupname+"</span> (Pubilc)</li>"):b+('<li groupid="'+c[e].favoritegroupid+'" grouplink="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+c[e].favoritegroupid+'#mydh-head-favitem"><span>'+c[e].favoritegroupname+"</span> (Private)</li>");m.append(b);11<=m.find("li").length&&l.hide()}},error:function(){}})}else if(!e.hasClass("have-add-fav")){var n=e.find(".j-favnum"),p=parseInt(n.text()),t=$("#productid").val(),q=$("#itemcode").val(),v=$("#supplierid").val(),r=$("#productname").val(),
u=$("#firstBImage").find("img").attr("src"),x=$("#isstore").val(),f=location.hostname,f=f.split(".",1).join(""),y=this;$.ajax({url:c+"/favorite/addprodfavorite.do",data:{productid:t,itemcode:q,supplierid:v,productname:r,prodimgurl:u,site:f,accesssource:"0"==x?"pc-1":"pc-2"},type:"POST",cache:!1,dataType:"jsonp",success:function(b){0==b.islogin?(b=encodeURIComponent(location.href),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+b):($("body").append('<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="//dg.dhgate.com/favorite/proddetaillist.do#mydh-head-favitem">Favorite Items</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/proddetaillist.do#mydh-head-favitem">Go to my Favorite Items</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>'),
$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),y.popShow(),y.closePop(),e.addClass("have-add-fav"),p++,n.text(p))},error:function(){}})}d.stopPropagation();this.documentClick()},selectList:function(b){var e=this,d=$(b.currentTarget),f=d.parents(".j-add-detail"),h=d.parents(".j-add-detail").siblings(".j-add-fav"),m=h.find(".j-favnum"),n=parseInt(m.text());b=d.attr("groupid");var p=d.attr("grouplink"),t=d.html(),d=$("#productid").val(),q=
$("#itemcode").val(),v=$("#supplierid").val(),r=$.trim($("#productname").val()),u=$("#firstBImage").find("img").attr("src"),x=$("#isStore").val(),y=location.hostname.split(".",1).join("");$.ajax({url:c+"/favorite/addprodfavorite.do",data:{productid:d,itemcode:q,supplierid:v,productname:r,prodimgurl:u,site:y,groupid:b,accesssource:0==x?"pc-1":"pc-2"},type:"POST",cache:!1,dataType:"jsonp",success:function(b){0==b.data&&(b='<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="'+
p+'">'+t+'</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="'+p+'">Go to my Favorite Items</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>',$("body").append(b),$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),e.popShow(),e.closePop(),f.hide(),h.addClass("have-add-fav"),h.find(".add-btn-main").text("Added to Favorites"),n++,m.text(n))},
error:function(){}})},addNew:function(b){$("body").append('<div class="newpopcon coupopbox addfavorite-popup j-favorite-dialog"><h4 class="addfavorite-title">Add a New List</h4><div class="addfavorite-con"><dl class="write-add-info"><dt>List Name</dt><dd><input type="text" class="write-add-input j-add-name" maxlength="50"><p class="error-text j-error" style="display:none;"></p></dd><dd><span class="add-type j-radio active" data-type="1">Public ( Anyone can search for and see this list. You can also share this list with friends )</span><span class="add-type j-radio" data-type="0">Private (Only you can see this list)</span><input type="hidden" value="1" class="j-add-type"></dd></dl><dl class="write-add-info"><dt>Note</dt><dd><textarea name="" maxlength="1000" class="write-add-note j-add-note"></textarea><p class="write-add-num"><span class="num-box"><span class="j-number">0</span>/1000</span></p></dd></dl></div><div class="coupop-btn alignc"><span class="n-yellow-button j-confirm-add">Confirm</span><span class="n-grey-button j-close-dialog">Cancel</span></div><span class="icon-bclose j-close-dialog"></span></div>');
$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>');this.popShow();this.closePop()},confirmAdd:function(b){var e=$(b.target).parent(".coupop-btn").siblings(".addfavorite-con"),d=e.find(".j-add-name").val();b=e.find(".j-add-note").val();var f=e.find(".j-add-type").val(),h=e.find(".j-error"),e=$(".j-add-detail").find("ul").find("li");$(".j-addnew-btn");var m=this,n=!0;""==d?h.show().html("Please enter a new list name."):(e.each(function(b,c){var e=
$(c).find("span").text();$.trim(e)==$.trim(d)&&(n=!1,h.show().html("This list name already exists."))}),n&&$.ajax({url:c+"/favorite/addgroup.do",data:{groupname:d,grouptype:f,groupnote:b},type:"POST",cache:!1,dataType:"jsonp",success:function(b){0==b.data&&($(".j-favorite-dialog").remove(),$(".j-favorite-mask").remove(),m.newAddFav(b.groupid,d,"1"==f?"Pubilc":"Private"))},error:function(){}}))},newAddFav:function(b,e,d){var f=this,h=$("#productid").val(),g=$("#itemcode").val(),n=$("#supplierid").val(),
p=$.trim($("#productname").val()),t=$("#firstBImage").find("img").attr("src"),q=$("#isstore").val(),v=$(".j-add-detail"),r=v.siblings(".j-add-fav"),u=r.find(".j-favnum"),x=parseInt(u.text()),y=location.hostname.split(".",1).join("");$.ajax({url:c+"/favorite/addprodfavorite.do",data:{productid:h,itemcode:g,supplierid:n,productname:p,prodimgurl:t,site:y,groupid:b,accesssource:0==q?"pc-1":"pc-2"},type:"POST",cache:!1,dataType:"jsonp",success:function(c){0==c.data&&(c='<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+
b+'#mydh-head-favitem">'+e+"("+d+')</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+b+'#mydh-head-favitem">Go to my Favorite Items</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>',$("body").append(c),$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),f.popShow(),f.closePop(),v.hide(),
r.addClass("have-add-fav"),r.find(".add-btn-main").text("Added to Favorites"),x++,u.text(x))},error:function(){}})},addToStore:function(b){$(b.target);var e=$(".selle-name").find("a").text();b=$("#supplierid").val();var d=$("#supplierno").val(),f=location.hostname.split(".",1).join(""),h=this,e=""!=e?e:$(".selle-name").find("b").text();$.ajax({url:c+"/favorite/addsellerfavorite.do",data:{supplierid:b,suppliernum:d,suppliername:e,site:f},type:"GET",cache:!1,dataType:"jsonp",success:function(b){0==
b.islogin?(b=encodeURIComponent(location.href),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+b):($("body").append('<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="//dg.dhgate.com/favorite/storeList.do#mydh-head-favstore">Favorite Stores</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/storeList.do#mydh-head-favstore">Go to my Favorite Stores</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>'),
$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),h.popShow(),h.closePop())},error:function(){}})},textLimit:function(b){var c=$(b.target);b=c.siblings(".write-add-num").find(".j-number");c=c.val().length;1E3>c?b.text(c):b.text(1E3)},radioSelect:function(b){b=$(b.currentTarget);var c=b.attr("data-type");b.addClass("active").siblings(".j-radio").removeClass("active");b.siblings(".j-add-type").val(c)},popShow:function(){var b=this;b.SetPosition();
$(window).bind("scroll resize",function(){b.SetPosition()})},closePop:function(){var b=$(".j-favorite-dialog"),c=$(".j-favorite-mask");$("body").delegate(".j-close-dialog","click",function(){b.remove();c.remove()})},SetPosition:function(){var b,c,d,l,h,m,n,p=$(".j-favorite-dialog"),t=$(".j-favorite-mask"),q=$(".j-mask-iframe");b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=p.outerHeight(!0);l=p.outerWidth(!0);h=$(window).height();m=$(window).width();n=$(window).scrollTop();
lScroll=$(window).scrollLeft();this.isIE6?(l=parseInt((m-l)/2+lScroll),d=parseInt((h-d)/2+n)):(l=parseInt((m-l)/2),d=parseInt((h-d)/2));p.css({top:d,left:l});t.css({width:c,height:b});q.css({width:c,height:b})},documentClick:function(){$(document).click(function(b){$(b.target).closest("[data-addnew]").length?$(".j-add-detail").show():$(".j-add-detail").hide()})}};return d});
var tnDropDown=function(b){this.SetOptions(b);this.topNav=$("#"+this.options.topNav);this.ddButton=this.options.ddButton;this.ddList=this.options.ddList;this.Init()};
tnDropDown.prototype={SetOptions:function(b){this.options={topNav:"topNav",ddButton:["tnmyDHgate","tnCommunity","tnHelp"],ddList:["tnmyDHgateList","tnCommunityList","tnHelpList"]};$.extend(this.options,b||{})},Init:function(){this.timer={};this.but={};this.list={};for(var b=0;b<this.ddButton.length;b++)document.getElementById(this.ddButton[b])&&(this.timer[b]={},this.but[b]=$("#"+this.ddButton[b]),this.list[b]=$("#"+this.ddList[b]));this.Active()},Active:function(){var b=this,c;for(c in this.but)this.but[c][0].guid=
c,this.list[c][0].guid=c,b.list[c].css({width:b.list[c].width()+1}),b.list[c].width()<b.but[c].outerWidth()&&b.list[c].css({width:b.but[c].outerWidth()+5}),this.but[c].mouseenter(function(){var c=$(this);b.timer[this.guid]&&clearTimeout(b.timer[this.guid]);c.addClass("tn-active");b.list[this.guid].css({display:"block",left:c.offset().left-b.topNav.offset().left})}).mouseleave(function(){var c=this,f=$(this);b.timer[this.guid]=setTimeout(function(){f.removeClass("tn-active");b.list[c.guid].css({display:"none"})},
300)}),this.list[c].mouseenter(function(){b.timer[this.guid]&&clearTimeout(b.timer[this.guid])}).mouseleave(function(){var c=this;b.timer[this.guid]=setTimeout(function(){b.but[c.guid].removeClass("tn-active");b.list[c.guid].css({display:"none"})},50)})}};
var sbd_config={major_delay:300,minor_delay:100,target_slop:25},navBarCategories=function(b){this.SetOptions(b);this.allCategoriesAction=$("#"+this.options.allCategoriesAction);this.navBrowseFylout=$("#"+this.options.navBrowseFylout);this.navCatsWarp=$("#"+this.options.navCatsWarp);this.navCats=$("#"+this.options.navCats);this.IE8=$.browser.msie&&"8.0"==$.browser.version;this.Init()};
navBarCategories.prototype={SetOptions:function(b){this.options={navBrowseFylout:"navBrowseFylout",navCatsWarp:"navCatsWarp",navCats:"navCats",navSubcatsWarp:"navSubcatsWarp",allCategoriesAction:"allCategoriesAction"};$.extend(this.options,b||{})},Init:function(){this.InsertContent()},InsertContent:function(){this.NavInit()},NavInit:function(){this.navSubcatsWarp=$("#"+this.options.navSubcatsWarp);var b=this,c=function(b,c){var e="c",d="c";b&&c&&(b.x<c.x1?e="l":b.x>c.x2&&(e="r"),b.y<c.y1?d="t":b.y>
c.y2&&(d="b"));return d+e},d=function(b,e){var d=0,h=b.cursor,f=b.priorCursors[0]||{},g=b.priorCursors[1]||{};if(h.x==f.x&&2>Math.abs(h.y-f.y)&&h.x>g.x)d=sbd_config.minor_delay;else{f=[h,f];switch(c(h,e)){case "tl":f.push({x:e.x1,y:e.y2},{x:e.x2,y:e.y1});break;case "bl":f.push({x:e.x1,y:e.y1},{x:e.x2,y:e.y2});break;case "cl":f.push({x:e.x1,y:e.y1},{x:e.x1,y:e.y2});break;default:f.push({x:0,y:0},{x:0,y:0}),d=-1}0==d&&(d=(f[2].x-f[1].x)*(f[3].y-f[1].y)-(f[3].x-f[1].x)*(f[2].y-f[1].y),h=((f[3].x-f[0].x)*
(f[1].y-f[0].y)-(f[1].x-f[0].x)*(f[3].y-f[0].y))/d,g=((f[1].x-f[0].x)*(f[2].y-f[0].y)-(f[2].x-f[0].x)*(f[1].y-f[0].y))/d,d=0<((f[2].x-f[0].x)*(f[3].y-f[0].y)-(f[3].x-f[0].x)*(f[2].y-f[0].y))/d&&0<h&&0<g?sbd_config.major_delay:0)}return d},f=function(c,e){var d=b.navSubcatsWarp;$subcat=$("#navSubcats"+c);$subcatChild=$subcat.children();$catWarp=b.navCatsWarp;$cat=$("#navCat"+c);d.css({display:"block",visibility:"hidden"});$subcat.css({display:"block",visibility:"hidden"});h&&($("#navSubcats"+h).css({display:"none",
visibility:"hidden"}),$("#navCat"+h).removeClass("cat_active"));var f=$catWarp.outerHeight("true"),g=0;b.IE8&&f--;for(var m=0;m<$subcatChild.length;m++)g+=parseInt($($subcatChild[m]).outerWidth("true"));$cat.addClass("cat_active");d.css({top:34,left:$catWarp.outerWidth()-2,visibility:"visible",width:g,height:f-2});$subcat.css({visibility:"visible"});f=$subcat.offset();d=f.left;f=f.top-sbd_config.target_slop;g=d+$subcat.outerWidth();m=f+$subcat.outerHeight()+sbd_config.target_slop;return{x1:d,y1:f,
x2:g,y2:m}},e=function(){var b=[],c=[{x:0,y:0}],e=0,d=!1,f=function(){for(var b=[],d=1;3>d;d++)b.push(c[(e-d+3)%3]);return $.extend(!0,{},{cursor:c[e],priorCursors:b})},h=function(d){for(var h=0;h<b.length;h++){var g=b[h],m=0<$.grep(g.rects,function(b){return c[e].x>=b[0]&&c[e].y>=b[1]&&c[e].x<b[0]+b[2]&&c[e].y<b[1]+b[3]}).length;null!==g.inside&&m&&!g.inside&&g.mouseEnter?g.inside=g.mouseEnter(f()):null!==g.inside&&!m&&g.inside&&g.mouseLeave&&(g.inside=!g.mouseLeave(d,f()))}},g=function(){$(window).scrollLeft();
$(window).scrollTop();$(document).mousemove(function(b){e=(e+1)%3;c[e]={x:b.pageX,y:b.pageY};h()});d=!0};return{add:function(c,e){d||g();var h=$.extend({rects:c},e);b.push(h);return h},remove:function(c){for(var e=0;e<b.length;e++)if(b[e]===c){b.splice(e,1);break}},checkNow:function(){h(!0)},getCallbackArgs:function(){return f()}}}(),g,l,h,m,n=[];this.navActive=function(){this.navCats.children("li").each(function(){var b=/^navCat(.+)/.exec(this.id),p=b?b[1]:"",b=$(this),v=b.offset(),b=e.add([[v.left,
v.top,b.outerWidth(),b.outerHeight()]],{inside:!1,mouseEnter:function(b){clearTimeout(l);$("nav_cat_"+p).addClass("cat_active");if(h!==p){var n=d(b,g);if(h&&0<n){var t=function(){clearTimeout(l);var n=e.getCallbackArgs(),q;m&&m.x==n.cursor.x&&m.y==n.cursor.y?(q="cc"==c(n.cursor,g)?!1:!0,q=q?0:-1):q=d(n,g);m={x:n.cursor.x,y:n.cursor.y};0<q?h!==p&&(l=setTimeout(t,q)):-1<q&&(g=f(p,b),h=p)};l=setTimeout(t,n)}else g=f(p,b),h=p}return!0},mouseLeave:function(b,c){$("#nav_cat_"+p).removeClass("nav_hover");
return!0}});n.push(b)})};this.navActive();this.navBrowseFylout.mouseleave(function(){p();b.navActive()});this.allCategoriesAction.mouseleave(function(){p();b.navActive()});var p=function(){clearTimeout(l);for(var c=0;c<n.length;c++)e.remove(n[c]);n=[];g=null;h&&($("#navSubcats"+h).css({display:"none",visibility:"hidden"}),$("#navCat"+h).removeClass("cat_active"));h=null;b.navSubcatsWarp.css({display:"none",visibility:"visible"})}}};
function changeLaugage(){var b=new Date;b.setTime(b.getTime()+31536E7);document.cookie="dh_isChange='isChange';expires="+b.toGMTString()+" ;path=/;domain=.dhgate.com";location.reload()}
function topNavShowCN(){var b;b=window.ActiveXObject?window.navigator.browserLanguage:window.navigator.language;var c=getCookie("dh_isChange");null!=b&&""!=b&&-1<b.toLowerCase().indexOf("zh-cn")&&""==c&&($("#topNavL").css({display:"none"}),$("#topNavR_EN").css({display:"none"}),$("#topNavR_CN").css({display:"block"}).html('<table border="0" cellspacing="0" cellpadding="0"><tr><td><a rel="nofollow" href="http://seller.dhgate.com/usr/loginsign.do">\u6211\u7684DHgate</a></td><td class="tn-td-split"><span></span></td><td class="family"><a rel="nofollow" href="http://seller.dhgate.com/usr/sellerregister.do?act=pageload">\u514d\u8d39\u6ce8\u518c</a></td><td class="tn-td-split"><span></span></td><td><a href="javascript:changeLaugage();">English</a></td><td class="tn-td-split"><span></span></td><td class="family"><a rel="nofollow" href="//help.dhgate.com/dhgate/sellerhelpcn.php">\u5e2e\u52a9</a></td><td class="tn-td-split"><span></span></td><td class="family"><a rel="nofollow" href="http://seller.dhgate.com">\u5356\u5bb6\u9996\u9875</a></td></tr></table>'))}
var multiLanguageEntrance={openStatus:{en:1,es:1,pt:1,ru:1,fr:1,de:1,it:1,tr:1,ar:0,ja:0,ko:0},allEntrances:[{url:"//www.dhgate.com/",code:"en",name:"English"},{url:"//es.dhgate.com/",code:"es",name:"Espa\u00f1ol"},{url:"//pt.dhgate.com/",code:"pt",name:"Portugu\u00eas"},{url:"//ru.dhgate.com/",code:"ru",name:"P\u0443\u0441\u0441\u043a\u0438\u0439"},{url:"//fr.dhgate.com/",code:"fr",name:"Fran\u00e7ais"},{url:"//de.dhgate.com/",code:"de",name:"Deutsch"},{url:"//it.dhgate.com/",code:"it",name:"Italiano"},
{url:"//tr.dhgate.com/",code:"tr",name:"T\u00fcrk\u00e7e"},{url:"//ar.dhgate.com/",code:"ar",name:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{url:"//ja.dhgate.com/",code:"ja",name:"\u65e5\u672c\u8a9e"},{url:"//ko.dhgate.com/",code:"ko",name:"\ud55c\uad6d\uc758"}],CurrentCode:function(){var b=location.hostname.substring(0,location.hostname.indexOf(".")).toLowerCase();b&&"www"!=b||(b="en");return b},languageFilter:function(){for(var b={ca:"fr",fr:"fr",es:"es",de:"pt",it:"it",tr:"tr",mx:"es",ch:"de",
cl:"es",br:"pt",be:"fr",pr:"es",co:"es",ru:"ru",ve:"es",pe:"es",ua:"ru",at:"de",pt:"pt",tp:"pt",ar:"es",ao:"pt",lt:"ru",mz:"pt",uy:"es",lv:"ru",bo:"es","do":"es",nc:"fr",ee:"ru",pa:"es",cd:"fr",cm:"fr",ec:"es",mu:"fr",az:"ru",gt:"es",cr:"es",kz:"ru",by:"ru",md:"ru",ge:"ru"},c=DHCookieUtil.getcookie("b2b_ip_country")||"",d=this.allEntrances,f=[],c=c.toLowerCase(),e=0;e<d.length;e++)d[e].code==b[c]?f.splice(1,0,d[e]):f.push(d[e]);this.allEntrances=f},Filter:function(){this.languageFilter();for(var b=
this.CurrentCode(),c=this.allEntrances,d=[],f=0,e=c.length;f<e;f++){var g=c[f].code.toLowerCase();this.openStatus[g]&&(b&&b!=g?d.push(c[f]):d.unshift(c[f]))}return d},InsertHtml:function(b,c){var d="gtag('event', 'google translate', {'event_category': 'HP','event_label': '"+DH.lang+"'});";b=document.getElementById(b);c=document.getElementById(c);var f;topNavR_ENHTML="";var e=this.Filter();DHCookieUtil.addcookie("language",e[0].code,{domain:DHCookieConts.DOMAIN_ROOT,path:"/",expires:365});DHCookieUtil.addcookie("intl_locale",
e[0].code,{domain:DHCookieConts.DOMAIN_ROOT,path:"/",expires:365});f='<li class="tn-split"></li><li class="tn-language" id="tnLanguage" page-type="1"><a href="javascript:;" rel="nofollow" translate-type="y">'+e[0].name+"</a></li>";topNavR_ENHTML='<div class="tn-language-list" id="tnLanguageList"><ul class="clearfix">';for(var g=1,l=e.length;g<l;g++)topNavR_ENHTML+='<li><a href="'+e[g].url+location.pathname.substring(1)+location.search+'#mh" rel="nofollow">'+e[g].name+"</a></li>";topNavR_ENHTML+='</ul><div id="google_translate_element" translate-type="y" onClick="'+
d+'"></div></div>';c&&$(c).append(f);b&&$(b).append(topNavR_ENHTML);multiLanguageEntrance=null}};
function topNavShowEN(){function b(b){var e=$.cookie("b2b_nick_n");c+='<li class="tnl-nickName"><strong>'+$L("common_hello")+",&nbsp;"+e+"</strong></li>";b.isLogin&&(c+='<li class="tnl-level"><span class="icon16-'+b.explevelId+'"></span></li>',b.message&&""!=b.message&&0<b.message?c+='<li class="tnl-com"><span>(</span><span class="tnl-email"><a title="View My Messages" href="//dg.dhgate.com/myaccount/message/message.do">'+b.message+"</a></span>":b.csMessage&&""!=b.csMessage&&0<b.csMessage&&(c+='<li class="tnl-com"><span>(</span>'),
b.csMessage&&""!=b.csMessage&&0<b.csMessage?c+='<span class="tnl-msg"><a href="//dg.dhgate.com/myaccount/csmsg/leavemsg.do?act=showListMsg">'+b.csMessage+"</a></span><span>)</span></li>":b.message&&""!=b.message&&0<b.message&&(c+="<span>)</span></li>"),c+='<li><a href="https://secure.dhgate.com/usr/logout.do#nhp5511-newheader">'+$L("common_siginout")+"</a></li>",$("#topNavL").html(c));$("#cartcnt").text(b.cartNum)}var c="",d={};jQuery.ajax({url:"//dg.dhgate.com/mydhgate/valid_new.do",type:"GET",dataType:"jsonp",
cache:!1,success:function(c){var e=c.login;d.isLogin=null==e||""==e||"null"==e?!1:!0;d.userName=e;d.nickName=c.cookieNickname;d.completed=c.completed||-1;d.message=c.unreadInbox;d.csMessage=c.unreadCsMessage;d.showEN=c.showEN;d.levelId=c.viplevelid;d.explevelId=c.explevelid;d.review=c.reviews;d.reviewShow=c.reviewChange;d.reviewFirst=0<c.reviewTip?!0:!1;jQuery.ajax({url:"//shoppingcart.dhgate.com/cart/cartInfo.do",type:"GET",dataType:"jsonp",cache:!1,success:function(c){d.cartNum=c.size;d.CartItemCodeList=
c.itemcode;b(d)},error:function(){b(d)}})}});null!=multiLanguageEntrance&&multiLanguageEntrance.InsertHtml("topNav","topNavR_EN")}function doheadsearch(){var b=document.getElementById("searchkey").value;for(i=0;i<b.length;i++)if(255<b.charCodeAt(i))return alert($L("search_msg_searchKeyword")),!1;return headsearch()}
function headsearch(){var b=$("#searchkey").val();$("input[name='catalog']").val();var c=$("input[name='supplierid']").val();if(""==$.trim(b)||"Search Products"==$.trim(b)){$("#searchkey").val("");if(""==b)return alert($L("header_search_keyword")),!1;""==c&&$("#searchForm").attr("action","/wholesale/dirlist.do");$("#searchForm").submit()}$("#searchForm").submit()}function changeSearchParam(){$("#searchForm").attr("action","/wholesale/store.do")}
function searchkeyEnter(b){b=$("#"+b);b.keypress(function(b){if(13==b.keyCode)return changeSearchParam(),headsearch()})}
function searchheadersuggest(){$("#searchkey").autocomplete("/wholesale/searchTools.do?act=suggest",{delay:300,minChars:1,cacheLength:11,onItemSelect:selectItem,onFindValue:findValue,formatItem:formatItem,autoFill:!1,matchCase:!1,matchSubset:!1,matchContains:!1,selectFirst:!1,scroll:!1,highlight:function(b,c){return b}});$("input#searchkey").result(function(b,c,d){c&&$("#searchBarButton").click()})}function findValue(b){if(null==b)return alert("No match!")}function selectItem(b){findValue(b)}
function formatItem(b){return b[0]+'<span class="count">'+b[1]+"</span>"}
(function(b){b.fn.extend({autocomplete:function(c,d){var f="string"==typeof c;d=b.extend({},b.Autocompleter.defaults,{url:f?c:null,data:f?null:c,delay:f?b.Autocompleter.defaults.delay:10,max:d&&!d.scroll?10:150},d);d.highlight=d.highlight||function(b){return b};d.formatMatch=d.formatMatch||d.formatItem;return this.each(function(){new b.Autocompleter(this,d)})},result:function(b){return this.bind("result",b)},search:function(b){return this.trigger("search",[b])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(b){return this.trigger("setOptions",[b])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(c,d){function f(){var c=w.selected();if(!c)return!1;var e=c.result;r=e;if(d.multiple){var h=l(q.val());1<h.length&&(e=h.slice(0,h.length-1).join(d.multipleSeparator)+d.multipleSeparator+e);e+=d.multipleSeparator}q.val(e);b("#suggestsearch").val("1");m();q.trigger("result",[c.data,c.value]);return!0}function e(){var c=w.selected2().result;if(d.multiple){var e=
l(q.val());1<e.length&&(c=e.slice(0,e.length-1).join(d.multipleSeparator)+d.multipleSeparator+c);c+=d.multipleSeparator}q.val(c);b("#suggestsearch").val("1")}function g(b,c){if(y==t.DEL)w.hide();else{var e=q.val();if(c||e!=r)r=e,e=h(e),e.length>=d.minChars?(q.addClass(d.loadingClass),d.matchCase||(e=e.toLowerCase()),p(e,n,m)):(q.removeClass(d.loadingClass),w.hide())}}function l(c){if(!c)return[""];c=c.split(d.multipleSeparator);var e=[];b.each(c,function(c,d){b.trim(d)&&(e[c]=b.trim(d))});return e}
function h(b){if(!d.multiple)return b;b=l(b);return b[b.length-1]}function m(){var e=w.visible();w.hide();clearTimeout(v);q.removeClass(d.loadingClass);d.mustMatch&&q.search(function(b){b||(d.multiple?(b=l(q.val()).slice(0,-1),q.val(b.join(d.multipleSeparator)+(b.length?d.multipleSeparator:""))):q.val(""))});e&&b.Autocompleter.Selection(c,c.value.length,c.value.length)}function n(e,f){if(f&&f.length&&x){q.removeClass(d.loadingClass);w.display(f,e);var g=f[0].value;d.autoFill&&h(q.val()).toLowerCase()==
e.toLowerCase()&&y!=t.BACKSPACE&&(q.val(q.val()+g.substring(h(r).length)),b.Autocompleter.Selection(c,r.length,r.length+g.length));w.show()}else m()}function p(e,f,g){d.matchCase||(e=e.toLowerCase());var m=b("#catalogId").val(),n=u.load(e+m);if(n&&n.length)f(e,n);else if("string"==typeof d.url&&0<d.url.length){var l={timestamp:+new Date};b.each(d.extraParams,function(b,c){l[b]="function"==typeof c?c():c});b.ajax({mode:"abort",port:"autocomplete"+c.name,dataType:d.dataType,url:d.url,data:b.extend({q:h(e),
c:m,limit:d.max},l),success:function(c){var h;if(!(h=d.parse&&d.parse(c))){h=[];c=c.split("\n");for(var g=0;g<c.length;g++){var n=b.trim(c[g]);n&&(n=n.split("|"),h[h.length]={data:n,value:n[0],result:d.formatResult&&d.formatResult(n,n[0])||n[0]})}}u.add(e+m,h);f(e,h)}})}else w.emptyList(),g(e)}var t={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},q=b(c).attr("autocomplete","off").addClass(d.inputClass),v,r="",u=b.Autocompleter.Cache(d),x=0,y,z={mouseDownOnSelect:!1},
w=b.Autocompleter.Select(d,c,f,z),A;b.browser.opera&&b(c.form).bind("submit.autocomplete",function(){if(A)return A=!1});q.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(c){y=c.keyCode;switch(c.keyCode){case t.UP:c.preventDefault();w.visible()?-1==w.prev()?q.val(r):e():g(0,!0);break;case t.DOWN:c.preventDefault();w.visible()?-1==w.next()?q.val(r):e():g(0,!0);break;case t.PAGEUP:c.preventDefault();w.visible()?w.pageUp()?q.val(r):e():g(0,!0);break;case t.PAGEDOWN:c.preventDefault();
w.visible()?-1==w.pageDown()?q.val(r):e():g(0,!0);break;case d.multiple&&","==b.trim(d.multipleSeparator)&&t.COMMA:case t.TAB:case t.RETURN:if(f())return c.preventDefault(),A=!0,!1;break;case t.ESC:w.hide();break;default:clearTimeout(v),v=setTimeout(g,d.delay)}}).focus(function(){x++}).blur(function(){x=0;z.mouseDownOnSelect||(clearTimeout(v),v=setTimeout(m,200))}).click(function(){1<x++&&!w.visible()&&g(0,!0)}).bind("search",function(){function c(b,c){var d;if(c&&c.length)for(var h=0;h<c.length;h++)if(c[h].result.toLowerCase()==
b.toLowerCase()){d=c[h];break}"function"==typeof e?e(d):q.trigger("result",d&&[d.data,d.value])}var e=1<arguments.length?arguments[1]:null;b.each(l(q.val()),function(b,e){p(e,c,c)})}).bind("flushCache",function(){u.flush()}).bind("setOptions",function(c,e){b.extend(d,e);"data"in e&&u.populate()}).bind("unautocomplete",function(){w.unbind();q.unbind();b(c.form).unbind(".autocomplete")})};b.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,
delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(b){return b[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(b,d){return b.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+d.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};b.Autocompleter.Cache=function(c){function d(b,e){c.matchCase||
(b=b.toLowerCase());var d=b.indexOf(e);return-1==d?!1:0==d||c.matchContains}function f(b,e){h>c.cacheLength&&g();l[b]||h++;l[b]=e}function e(){if(!c.data)return!1;var e={},d=0;c.url||(c.cacheLength=1);e[""]=[];for(var h=0,g=c.data.length;h<g;h++){var l=c.data[h],l="string"==typeof l?[l]:l,v=c.formatMatch(l,h+1,c.data.length);if(!1!==v){var r=v.charAt(0).toLowerCase();e[r]||(e[r]=[]);l={value:v,data:l,result:c.formatResult&&c.formatResult(l)||v};e[r].push(l);d++<c.max&&e[""].push(l)}}b.each(e,function(b,
e){c.cacheLength++;f(b,e)})}function g(){l={};h=0}var l={},h=0;setTimeout(e,25);return{flush:g,add:f,populate:e,load:function(e){if(!c.cacheLength||!h)return null;if(!c.url&&c.matchContains){var f=[],g;for(g in l)if(0<g.length){var m=l[g];b.each(m,function(b,c){d(c.value,e)&&f.push(c)})}return f}if(l[e])return l[e];if(c.matchSubset)for(g=e.length-1;g>=c.minChars;g--)if(m=l[e.substr(0,g)])return f=[],b.each(m,function(b,c){d(c.value,e)&&(f[f.length]=c)}),f;return null}}};b.Autocompleter.Select=function(c,
d,f,e){function g(){v&&(r=b("<div/>").hide().addClass(c.resultsClass).css("position","absolute").appendTo(document.body),u=b("<ul/>").appendTo(r).mouseover(function(c){l(c).nodeName&&"LI"==l(c).nodeName.toUpperCase()&&(p=b("li",u).removeClass(m.ACTIVE).index(l(c)),b(l(c)).addClass(m.ACTIVE))}).click(function(c){b(l(c)).addClass(m.ACTIVE);f();d.focus();return!1}).mousedown(function(){e.mouseDownOnSelect=!0}).mouseup(function(){e.mouseDownOnSelect=!1}).mouseleave(function(){b("li",u).removeClass(m.ACTIVE)}),
0<c.width&&r.css("width",c.width),v=!1)}function l(b){for(b=b.target;b&&"LI"!=b.tagName;)b=b.parentNode;return b?b:[]}function h(b){n.slice(p,p+1).removeClass(m.ACTIVE);p+=b;-1>p?p=n.size()-1:p>=n.size()&&(p=-1);b=n.slice(p,p+1).addClass(m.ACTIVE);if(c.scroll){var e=0;n.slice(0,p).each(function(){e+=this.offsetHeight});e+b[0].offsetHeight-u.scrollTop()>u[0].clientHeight?u.scrollTop(e+b[0].offsetHeight-u.innerHeight()):e<u.scrollTop()&&u.scrollTop(e)}}var m={ACTIVE:"ac_over"},n,p=-1,t,q="",v=!0,r,
u;return{display:function(e,d){g();t=e;q=d;u.empty();var h;h=t.length;h=c.max&&c.max<h?c.max:h;for(var f=0;f<h;f++)if(t[f]){var l=c.formatItem(t[f].data,f+1,h,t[f].value,q);!1!==l&&(l=b("<li/>").html(c.highlight(l,q)).addClass(0==f%2?"ac_even":"ac_odd").appendTo(u)[0],t[f].result=t[f].result.replace("<strong>","").replace("</strong>",""),b.data(l,"ac_data",t[f]))}n=u.find("li");c.selectFirst&&(n.slice(0,1).addClass(m.ACTIVE),p=0);b.fn.bgiframe&&u.bgiframe()},next:function(){h(1);return p},prev:function(){h(-1);
return p},pageUp:function(){0!=p&&0>p-8?h(-p):h(-8);return p},pageDown:function(){p!=n.size()-1&&p+8>n.size()?h(n.size()-1-p):h(8);return p},hide:function(){r&&r.hide();n&&n.removeClass(m.ACTIVE);p=-1},visible:function(){return r&&r.is(":visible")},current:function(){return this.visible()&&(n.filter("."+m.ACTIVE)[0]||c.selectFirst&&n[0])},show:function(){var e=b(d).offset();c.width=b(".search-bar-keyword").width();r.css({width:"string"==typeof c.width||0<c.width?c.width:b(d).outerWidth(!0),top:e.top+
d.offsetHeight,left:e.left-1}).show();if(c.scroll&&(u.scrollTop(0),u.css({maxHeight:c.scrollHeight,overflow:"auto"}),b.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var h=0;n.each(function(){h+=this.offsetHeight});e=h>c.scrollHeight;u.css("height",e?c.scrollHeight:h);e||n.width(u.width()-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right")))}},selected:function(){var c=n&&n.filter("."+m.ACTIVE).removeClass(m.ACTIVE);return c&&c.length&&b.data(c[0],"ac_data")},selected2:function(){var c=
n&&n.filter("."+m.ACTIVE);return c&&c.length&&b.data(c[0],"ac_data")},emptyList:function(){u&&u.empty()},unbind:function(){r&&r.remove()}}};b.Autocompleter.Selection=function(b,d,f){if(b.createTextRange){var c=b.createTextRange();c.collapse(!0);c.moveStart("character",d);c.moveEnd("character",f);c.select()}else!b.setSelectionRange&&b.selectionStart&&(b.selectionStart=d,b.selectionEnd=f);b.focus()}})(jQuery);
var maskMagnifier=function(b){this.SetOptions(b);this.bimgContainer=$("#"+this.options.bimgContainer);this.bimgDetails=$("#"+this.options.bimgDetails);this.bimgBlockMaskWarp=$("#"+this.options.bimgBlockMaskWarp);this.bimgBlockMask=$("#"+this.options.bimgBlockMask);this.bimgWidth=this.options.bimgWidth;this.bimgHeight=this.options.bimgHeight;this.simgList=$("#"+this.options.simgList);this.simgListItem=$("#"+this.options.simgList+" > li");this.simgListItemWidth=$(this.simgListItem[0]).outerWidth(!0);
this.simgWidth=this.options.simgWidth;this.simgHeigth=this.options.simgHeigth;this.showNum=this.options.showNum;this.simgLeft=$("#"+this.options.simgLeft);this.simgRight=$("#"+this.options.simgRight);this.OWH=[];this.WH=[];this.XY=[];this.Init()};
maskMagnifier.prototype={SetOptions:function(b){this.options={bimgContainer:"bimgContainer",bimgDetails:"bimgDetails",bimgBlockMaskWarp:"bimgBlockMaskWarp",bimgBlockMask:"bimgBlockMask",simgList:"simgList",simgWidth:36,simgHeigth:36,showNum:6,simgLeft:"simgLeft",simgRight:"simgRight",bimgWidth:308,bimgHeight:308,eventType:"click"};$.extend(this.options,b||{})},Init:function(){$(this.simgListItem[0]).addClass("current");this.bimgBlockMask.css({opacity:.5});for(var b=0;b<this.simgListItem.length;b++)this.XY.push([]),
this.WH.push([]),this.OWH.push([]);this.GetSImage();this.GetBImage();this.InitLoading();this.ClickSImage();this.LeftSliding();this.RightSliding()},ClickSImage:function(){for(var b=this,c=0;c<this.simgListItem.length;c++)(function(){var d=c;"click"==b.options.eventType?$(b.simgListItem[d]).click(function(){b.CurrentSelectedStatus(d);b.LoadingBImage(d)}):$(b.simgListItem[d]).bind("mouseenter",function(){b.CurrentSelectedStatus(d);b.LoadingBImage(d)})})()},CurrentSelectedStatus:function(b){for(var c=
0;c<this.simgListItem.length;c++)b==c?$(this.simgListItem[b]).addClass("current"):$(this.simgListItem[c]).removeClass("current")},ReturnSImageLocation:function(){for(var b=0;b<this.simgListItem.length;b++)if($(this.simgListItem[b]).hasClass("current"))return b},GetSImage:function(){this.sImageSrc=[];this.sImage=[];for(var b=0;b<this.simgListItem.length;b++)this.sImageSrc.push($(this.simgListItem[b]).attr("s-init")),this.sImage.push(new Image)},LoadingSImage:function(b){if($(this.simgListItem[b]).attr("s-init")){$(this.simgListItem[b]).removeAttr("s-init");
var c=this,d=[];$(c.sImage[b]).load(function(){d.push(c.AutoScaling(c.sImage[b],c.simgWidth,c.simgHeigth));$(c.simgListItem[b]).append("<span><img src="+c.sImageSrc[b]+" width="+d[0][0]+" height="+d[0][1]+" /></span>");c.sImage[b]=new Image;c.sImageSrc[b]=null;d=[]});c.sImage[b].src=c.sImageSrc[b]}},InitLoading:function(){var b;this.LoadingBImage(0);b=this.simgListItem.length<=this.showNum?this.simgListItem.length:this.showNum;for(var c=0;c<b;c++)this.LoadingSImage(c)},GetSImgScrollValue:function(){return parseInt(this.simgList.css("margin-left"))},
CurrentSImgLoad:function(){var b=Math.abs(parseInt(this.GetSImgScrollValue()/this.simgListItemWidth));this.LoadingSImage(b+this.showNum)},AutoScaling:function(b,c,d){var f,e;0<b.width&&0<b.height&&(b.width/b.height>=c/d?b.width>c?(f=c,e=b.height*c/b.width):(f=b.width,e=b.height):b.height>d?(e=d,f=b.width*d/b.height):(f=b.width,e=b.height));new Image;return[parseInt(f),parseInt(e)]},LeftSliding:function(){var b=this;this.GetSImgScrollValue();this.simgListItem.length<=this.showNum||(this.simgListItem.length>
this.showNum&&this.simgLeft.mouseenter(function(){0<=b.GetSImgScrollValue()||$(this).removeClass("simg-lg-arrow").addClass("simg-lh-arrow")}).mouseleave(function(){$(this).removeClass("simg-lh-arrow").addClass("simg-lg-arrow")}),this.simgLeft.click(function(){0<=b.GetSImgScrollValue()||$("#"+b.options.simgList+":not(:animated)").animate({"margin-left":"+="+b.simgListItemWidth},{duration:100,complete:function(){0<=b.GetSImgScrollValue()&&b.simgLeft.removeClass("simg-lh-arrow").addClass("simg-lg-arrow")}})}))},
RightSliding:function(){var b=this;this.GetSImgScrollValue();this.simgListItem.length<=this.showNum||(this.simgRight.mouseenter(function(){b.GetSImgScrollValue()<=(b.simgListItem.length-b.showNum)*-b.simgListItemWidth||$(this).removeClass("simg-rg-arrow").addClass("simg-rh-arrow")}).mouseleave(function(){$(this).removeClass("simg-rh-arrow").addClass("simg-rg-arrow")}),this.simgRight.click(function(){b.GetSImgScrollValue()<=(b.simgListItem.length-b.showNum)*-b.simgListItemWidth||(b.CurrentSImgLoad(),
$("#"+b.options.simgList+":not(:animated)").animate({"margin-left":"-="+b.simgListItemWidth},{duration:100,complete:function(){b.GetSImgScrollValue()<=(b.simgListItem.length-b.showNum)*-b.simgListItemWidth&&b.simgRight.removeClass("simg-rh-arrow").addClass("simg-rg-arrow")}}))}))},GetBImage:function(){this.bImageSrc=[];this.bImage=[];for(var b=0;b<this.simgListItem.length;b++)this.bImageSrc.push($(this.simgListItem[b]).attr("b-init")),this.bImage.push(new Image)},LoadingBImage:function(b){if($(this.simgListItem[b]).attr("b-init")){$(this.simgListItem[b]).removeAttr("b-init");
this.HideAllBImage();var c=this,d=[],f=this.bimgContainer.find("img:last");0===b?(this.OWH[b].push(firstBImageWidth,firstBImageHeight),this.ControlBImageDisplay(b),0!=f.offset().left&&(this.WH[b]=this.GetBlockMaskWarpSize(f,this.OWH[b][0],this.OWH[b][1]),this.XY[b]=this.GetXY(f,b)),this.BImageOver(f,b,this.OWH[b][0],this.OWH[b][1]),this.BlockMaskWarpMove(f,b),this.bImage[b]=new Image,this.bImageSrc[b]=null):($(c.bImage[b]).load(function(){d.push(c.AutoScaling(c.bImage[b],c.bimgWidth,c.bimgHeight));
c.bimgContainer.append("<div class='bimg-inner' index="+b+"><span><img src="+c.bImageSrc[b]+" width="+d[0][0]+" height="+d[0][1]+" /></span></div>");var e=c.bimgContainer.find("img:last");c.bimgDetails.append("<img index="+b+" src="+e.attr("src")+" />");c.OWH[b].push(c.bImage[b].width,c.bImage[b].height);c.ControlBImageDisplay(b);0!=e.offset().left&&(c.WH[b]=c.GetBlockMaskWarpSize(e,c.OWH[b][0],c.OWH[b][1]),c.XY[b]=c.GetXY(e,b));c.BImageOver(e,b,c.OWH[b][0],c.OWH[b][1]);c.BlockMaskWarpMove(e,b);c.bImage[b]=
new Image;c.bImageSrc[b]=null;d=[]}),c.bImage[b].src=c.bImageSrc[b])}else this.ControlBImageDisplay(b)},ControlBImageDisplay:function(b){var c=this.ReturnSImageLocation(),d=this.bimgContainer.children("div.bimg-inner");if(c==b)for(b=0;b<d.length;b++)$(d[b]).attr("index")==c?$(d[b]).css({display:"block"}):$(d[b]).css({display:"none"})},HideAllBImage:function(){var b=this.bimgContainer.children("div.bimg-inner");for(k=0;k<b.length;k++)$(b[k]).css({display:"none"})},BImageOver:function(b,c,d,f){var e=
this;b.mouseenter(function(g){var l;0==e.WH[c].length&&(e.WH[c]=e.GetBlockMaskWarpSize(b,d,f));e.XY[c]=e.GetXY(b,c);l=e.GetFinalXY(g,c);e.bimgBlockMaskWarp.css({display:"block",left:l[0],top:l[1],width:e.WH[c][0],height:e.WH[c][1]});e.bimgDetails.css({display:"block"});e.ControlBimgDetailsDisplay(c);e.BImageDetailsShift(g,c,l)}).mouseleave(function(b){$(b.relatedTarget).attr("id")!=e.options.bimgBlockMask&&(e.bimgBlockMaskWarp.css({display:"none"}),e.bimgDetails.css({display:"none"}))})},GetBlockMaskWarpSize:function(b,
c,d){var f;f=parseInt(b.attr("width"));b=parseInt(b.attr("height"));c/=this.bimgWidth;d/=this.bimgHeight;return[f<=Math.floor(f/c)?f-2:Math.floor(f/c),b<=Math.floor(b/d)?b-2:Math.floor(b/d),f,b]},BlockMaskWarpMove:function(b,c){var d=this;this.bimgBlockMaskWarp.mousemove(function(b){var e;e=d.ReturnSImageLocation();c==e&&0!=d.WH[c].length&&(e=d.GetFinalXY(b,c),d.bimgBlockMaskWarp.css({left:e[0],top:e[1]}),d.BImageDetailsShift(b,c,e))}).mouseleave(function(){d.bimgBlockMaskWarp.css({display:"none"});
d.bimgDetails.css({display:"none"})})},GetXY:function(b,c){var d=[],f,e,g,l,h,m;f=this.bimgContainer.offset().left;e=b.offset().left;g=e+parseInt(b.attr("width"));f=e-f-1;l=Math.floor((this.WH[c][0]+2)/2);h=parseInt(b.attr("width"));m=this.WH[c][0]+2;var n=[],p,t,q,v,r,u;p=this.bimgContainer.offset().top;t=b.offset().top;q=t+parseInt(b.attr("height"));p=t-p-1;v=Math.floor((this.WH[c][1]+2)/2);r=parseInt(b.attr("height"));u=this.WH[c][1]+2;d.push(e,g,f,l,h,m);n.push(t,q,p,v,r,u);return[d,n]},GetFinalXY:function(b,
c){final_x=b.pageX<=this.XY[c][0][0]+this.XY[c][0][3]?this.XY[c][0][2]:b.pageX>this.XY[c][0][0]+this.XY[c][0][3]&&b.pageX<this.XY[c][0][1]-this.XY[c][0][3]?b.pageX-(this.XY[c][0][0]+this.XY[c][0][3])+this.XY[c][0][2]:this.XY[c][0][4]-this.XY[c][0][5]+this.XY[c][0][2];final_y=b.pageY<=this.XY[c][1][0]+this.XY[c][1][3]?this.XY[c][1][2]:b.pageY>this.XY[c][1][0]+this.XY[c][1][3]&&b.pageY<this.XY[c][1][1]-this.XY[c][1][3]?b.pageY-(this.XY[c][1][0]+this.XY[c][1][3])+this.XY[c][1][2]:this.XY[c][1][4]-this.XY[c][1][5]+
this.XY[c][1][2];return[final_x,final_y]},ControlBimgDetailsDisplay:function(b){for(var c=this.bimgDetails.find("img"),d=0;d<c.length;d++)$(c[d]).attr("index")==b?$(c[d]).css({display:"block"}):$(c[d]).css({display:"none"})},BImageDetailsShift:function(b,c,d){var f,e,g,l;f=this.bimgDetails.find("img:visible");dWidth=f.width();dHeight=f.height();e=this.WH[c][2];g=this.WH[c][3];l=d[0];d=d[1];wScale=dWidth/e;hScale=dHeight/g;l=e<this.bimgWidth?Math.ceil((l-(this.bimgWidth-e)/2)*wScale):Math.ceil(l*wScale);
d=g<this.bimgHeight?Math.ceil((d-(this.bimgHeight-g)/2)*hScale):Math.ceil(d*hScale);dWidth<this.bimgWidth&&(l=-(this.bimgWidth-dWidth)/2);dHeight<this.bimgHeight&&(d=-(this.bimgHeight-dHeight)/2);dWidth>this.bimgWidth&&(e=e-this.WH[c][0]+(this.XY[c][0][0]+Math.floor(this.WH[c][0]/2)),b.pageX>e&&(l=dWidth-this.bimgWidth));dHeight>this.bimgHeight&&(c=g-this.WH[c][1]+(this.XY[c][1][0]+Math.floor(this.WH[c][1]/2)),b.pageY>c&&(d=dHeight-this.bimgHeight));f.css({left:-l,top:-d})}};
(function(b,c,d,f){d=function(b){this.config=$.extend({container:"#container",list:"#listBuy_1 >li",reference:null,imgWrap:"#bimgContainer",imgdetails:"#bimgDetails",customClass:".js-attr-linkage",smallImg:"#simgList li"},b);this._cache={smallImg:[]};this.flag=0;this.init()};d.prototype={init:function(){this.setOptions();this._cacheSmallImg();this.events()},_cacheSmallImg:function(){var b=this;$(b.config.smallImg).each(function(c,e){var d=$(e).attr("b-init");d&&1<d.length&&b._cache.smallImg.push(d)})},
events:function(){var b=this.config;$(document).delegate(b.list,"click",$.proxy(this.linkage,this))},setOptions:function(b){this.config=$.extend(!0,this.config,b||{});this.container=$(this.config.container)},linkage:function(b){var c;b.stopPropagation();c=$(b.target);switch(c[0].nodeName){case "SPAN":c=c.parent();break;case "IMG":c=c.parent().parent()}b=c.attr("data-simg");c=c.attr("data-bimg");b&&0<b.length&&this.insertHtml(b,c)},insertHtml:function(b,c){var e=this.config,d=$(e.imgWrap);this.flag--;
this.getImgInfo();e=$(e.customClass,d);0<e.length?(e.html('<span><img src="'+b+'" style="max-width:308px;max-height:308px"></span>'),d.find(".bimg-inner").hide()):(e=$('<div class="bimg-inner js-attr-linkage" index="'+this.flag+'" style="display: none;"><span><img  src="'+b+'" style="max-width:308px;max-height:308px"></span></div>'),d.find(".bimg-inner").hide(),d.append(e));e.css({display:"table"})},getImgInfo:function(b){var c=[],e;e=new Image;e.src=b;e.complete?c.push(e.width,e.height):e.load=function(){c.push(e.width,
e.height)};return c}};c[b]=$.extend(!0,{},c[b]||{});c[b].Detail=c[b].Detail||{};c[b].Detail.attributeLinkage=d})("DH",window,document);
(function(b,c,d,f){d=function(b){this.config=$.extend({container:"#container",wrap:".wrap",reference:null,direction:"top",className:"tab-toolbar"},b);this.init()};d.prototype={init:function(){this.setOptions();this.events()},events:function(){$(c).bind("scroll",$.proxy(this.scroll,this))},scroll:function(b,d){var e=this.config,h=$(c).scrollTop();(e.reference?$(e.reference).offset():this.container.offset()).top<=h?this.wrap.addClass(e.className):this.wrap.removeClass(e.className)},setOptions:function(b){this.config=
$.extend(!0,this.config,b||{});this.container=$(this.config.container);this.wrap=$(this.config.wrap,this.container)}};c[b]=$.extend(!0,{},c[b]||{});c[b].Detail=c[b].Detail||{};c[b].Detail.shortcut=d})("DH",window,document);
(function(b,c,d){b.DH=$.extend(!0,{},b.DH||{});DH.Store=DH.Store||{};DH.Store.StoreCoupon=function(b){this.config=$.extend(!0,{container:"#container",cList:".lsit",cBtn:".cBtn",disabledCls:"disabled",curNum:".js-num",supplierid:null,buyerid:null,ajax:{uri:"//dg.dhgate.com/myaccount/coupon/seller_coupon.do",params:{}},isLogin:!1,zIndex:900},b||{});this.init()};$.extend(DH.Store.StoreCoupon.prototype,{init:function(){var b=this.config;this.container=$(b.container);this.isLogin=b.isLogin||!!DHCookieUtil.getcookie("b2b_b_t_v2")||
!1;this.events();this.autoCoupon()},events:function(){var c=this.config;this.container.delegate(c.cList+" "+c.cBtn,"click",$.proxy(this._getCoupun,this));$(document).delegate(".js-couponLayer-close","click",$.proxy(this.colseLayer,this));$(b).bind("resize",$.proxy(this.setCSS,this));this.container.bind("events_coupon",$.proxy(this.getCoupon,this))},getQueryString:function(c){c=new RegExp("(^|&)"+c+"=([^&]*)(&|$)","i");c=b.location.search.substr(1).match(c);return null!=c?unescape(c[2]):null},_f5:function(){var b=
this.getQueryString("getcoupon");b&&1<b.length&&(location.href=location.href.replace(location.search,""))},_getCoupun:function(b){this.container.trigger("events_coupon",{target:$(b.target).parents(this.config.cList)})},autoCoupon:function(){var b=this.config,c=this.getQueryString("getcoupon");c&&1<c.length&&(b=$(b.cList+"[couponcode="+c+"]",this.container),this.container.trigger("events_coupon",{target:b,couponcode:c}))},getCoupon:function(b,c){var e=this,d=this.config,h=$(c.target),f,n;b.stopPropagation();
b.preventDefault();f=h.attr("couponcode");n=h.attr("supplierid");n=$.extend(!0,d.ajax.params,{couponCode:f||c.couponcode,supplierId:n||d.supplierid||"",buyerId:d.buyerId||$.cookie("b2b_buyerid")});if(!n.couponCode)return!1;if(!this.isLogin)return d=location.href,d=d.replace(/\#.*/ig,"").replace(/\?getcoupon=.*/ig,"").replace(/getcoupon=.*/ig,""),d=d+(-1==d.indexOf("?")?"?":"&")+"getcoupon="+f,location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+encodeURIComponent(d),!1;this.request(d.ajax.uri,
n,function(b){b?(200==b.code&&(e.changeNum(b.usedNumber,b.totalNumber,h),e.changeStatus(b.totalNumber>b.usedNumber?1:0,h)),e.showResult(b)):e.showResult({code:500,msg:$L("store_tips_coupon_error_title")})})},changeNum:function(b,c,d){$(this.config.curNum,d).text(b)},changeStatus:function(b,c){var e=$(this.config.cBtn,c),d=e.parent();switch(b){case 0:e.remove();d.append('<span class="frt">'+$L("store_tips_coupon_outOf_button")+"</span>");c.addClass("coup-out");break;case 1:e.remove(),d.append('<input type="button" class="coupbtn n-unclick-button" disabled="disabled" value="'+
$L("store_tips_coupon_received_button")+'">')}},changeLogin:function(){this.isLogin=!!DHCookieUtil.getcookie("b2b_b_t_v2")},showResult:function(b){var c=['<div class="newpopcon coupopbox clearfix  js-couponLayer-container" style="display:block; visibility: hidden;">',"<% if(data.code == 200) {%>","<% if(data.couponStatus ==2){ %>",'<div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span><%= $L("store_tips_coupon_successAlready_title") %></div>','<p class="alignc"><%= $L("store_tips_coupon_successAlready_content",{amount: data.couponAmount,expires: data.expireDateFormat}) %></p>',
"<% }else if(data.couponStatus ==4){ %>",'<div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span><%= $L("store_tips_coupon_success_title") %></div>','<% if(typeof data.isappcoupon != "undefined" && data.isappcoupon == 1){ %>','<p class="alignc"><%= $L("store_tips_app_coupon_success_content",{amount: data.couponAmount,expires: data.expireDateFormat}) %></p>',"<% }else{ %>",'<p class="alignc"><%= $L("store_tips_coupon_success_content",{amount: data.couponAmount,expires: data.expireDateFormat}) %></p>',
"<% } %>","<% } else if(data.couponStatus == 1){%>",'<div class="newpopcon-bt alignc orange"><span class="icon-big-warning"></span><%= $L("store_tips_coupon_outOf_content") %> </div>',"<%}%>","<% } else { %>",'<div class="newpopcon-bt alignc orange"><span class="icon-big-warning"></span><%= data.msg || $L("store_tips_coupon_successAlready_title") %> </div>',"<% } %>",'<div class="coupop-btn alignc">','<% if(data.isappcoupon == 0 || typeof data.isappcoupon == "undefined"){ %>','<input type="button" value="<% if(data.code == 200) {%>',
"<% if(data.couponStatus ==1 ||data.couponStatus ==5){ %>",'<%= $L("store_tips_coupon_error_button")%>',"<% }else{ %>",'<%= $L("store_tips_coupon_success_button")%>',"<% } %>","<% }else{ %>",'<%= $L("store_tips_coupon_error_button")%>','<% } %>"',' class="n-yellow-button js-couponLayer-close">',"<% } %>",'<a href="//dg.dhgate.com/myaccount/coupon/coupon.do#mydh-summ-cou" class="n-grey-button"><%= $L("store_tips_coupon_view_button") %></a>',"</div>",'<% if(typeof data.isappcoupon != "undefined" && data.isappcoupon == 1){ %>',
'<div class="download">','<p class="downloadtext"><%= $L("store_tips_app_coupon_download_content")%></p>','<ul class="downloadlist">','<li class="tdcode"></li>','<li class="googleplay"><a href="//m.dhgate.com/activities/promotion/googlePlay-Android.html?type=appcoupon" style="height:54px;width:200px;display:block;"></a></li>','<li class="appstore"><a href="https://app.appsflyer.com/id905869418?pid=AppSCP&c=itempage" style="height:54px;width:200px;display:block;"></a></li>',"</ul>","</div>","<% } %>",
'<span class="icon-bclose js-couponLayer-close"></span>',"</div>"],c=c.join(""),c=this.tmpl(c,{data:b});this._layer={HTML:$(c),MASK:$('<div style="display:none"></div>')};$("body").append(this._layer.HTML).append(this._layer.MASK);this.setCSS()},setCSS:function(){if(!this._layer)return!1;var c=$(b),e=$("body"),d=c.height(),l=c.width(),h=this._layer.HTML.outerHeight(1),m=this._layer.HTML.outerWidth(1),l=l-m,d=d-h;this._layer.HTML.css({left:(0>l?0:l/2)+c.scrollLeft(),top:(0>d?0:d/2)+c.scrollTop(),visibility:"visible",
position:"absolute",zIndex:this.config.zIndex});this._layer.MASK.css({width:e.width(),height:e.height(),top:0,left:0,position:"absolute",display:"block",background:"#ccc",opacity:.5,zIndex:this.config.zIndex-1})},colseLayer:function(){this._layer.HTML.remove();this._layer.MASK.remove();this._f5()},request:function(b,c,d){var e=this;if(e.flag)return!1;e.flag=!0;$.ajax({url:b,dataType:"jsonp",cache:!1,data:c,success:function(b){e.flag=!1;"function"===typeof d?d.call(e,b):""},error:function(){e.flag=
!1;"function"===typeof d?d.call(e):""}})},tmpl:function(){function b(e,d){var h=/[^a-z0-9A-Z_-]+/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[e]=c[e]||b(document.getElementById(e).innerHTML);return d?h(d):h}var c={};return b}()})})(window,
document);
(function(b,c,d,f){d=function(b){this.config=$.extend(!0,{container:"#container",goUp:".up",top:500,selectAttr:".js-attribute-wrap",selectClass:"buyinfo-wrap",tabTrigger:".tab-toolbar ul > li"},b||{});this.init()};d.prototype={init:function(){this.setOptions();this.events()},events:function(){var b=this.config;this.container.delegate(b.goUp,"click",$.proxy(this._up,this));this.container.delegate(b.tabTrigger,"click",$.proxy(this.changeTab,this))},_up:function(){var b=this,c=$(b.config.selectAttr);$("html, body").animate({scrollTop:b.config.top},
500,function(){$("html, body").unbind("DOMMouseScroll mousewheel")}).one("DOMMouseScroll mousewheel",function(){$("html, body").stop()});c.addClass(b.config.selectClass);setTimeout(function(){c.removeClass(b.config.selectClass)},3E3)},changeTab:function(){$(window).scrollTop($("#ctabBox").parent().offset().top-2)},setOptions:function(b){this.config=$.extend(!0,this.config,b||{});this.container=$(this.config.container);this.wrap=$(this.config.wrap,this.container)}};c[b]=$.extend(!0,{},c[b]||{});c[b].Detail=
c[b].Detail||{};c[b].Detail.toolbar=d})("DH",window,document);var Bubbling=function(b){this.SetOptions(b);this.colmain=$("."+this.options.colmain);this.init()};
Bubbling.prototype={SetOptions:function(b){this.options={colmain:"col-main"};$.extend(this.options,b||{})},init:function(){var b=this;this.colmain.delegate(".bubblingbtn","mouseenter",function(c){c=$(c.currentTarget);b.hover(1,c)});this.colmain.delegate(".bubblingbtn","mouseleave",function(c){c=$(c.currentTarget);b.hover(0,c)})},hover:function(b,c){1===b?c.find(".newpopcon").show():c.find(".newpopcon ").hide()}};
function navToggle(b,c){var d=!1;$(b).mouseenter(function(){$(this).hasClass("current")&&($(this).removeClass("current"),d=!0);$(this).addClass(c)}).mouseleave(function(){$(this).removeClass(c);d&&$(this).addClass("current")})}$(document).ready(function(){0<$("#storepromotion").length&&new Bubbling;0<$("#js-sale-item").length&&navToggle("#js-sale-item","showLayer")});
function getCookie(b){var c;c=b+"=";if(0<document.cookie.length)return b=document.cookie.indexOf(c),-1!=b?(b+=c.length,c=document.cookie.indexOf(";",b),-1==c&&(c=document.cookie.length),document.cookie.substring(b,c)):""}var fixedPosition=function(b){this.SetOptions(b);this.IE6="6.0"==$.browser.version&&$.browser.msie;this.timer=null;this.Init()};
fixedPosition.prototype={SetOptions:function(b){this.options={researchId:"researchEntrance",researchContent:null};$.extend(this.options,b||{})},Init:function(){$("body").append('<div id="'+this.options.researchId+'" class="research">'+this.options.researchContent+"</div>");this.researchEntrance=$("#"+this.options.researchId);this.researchEntranceHeight=this.researchEntrance.height();this.researchEntranceWidth=this.researchEntrance.width();var b=this.researchEntrance.find("a"),c=b.attr("href");this.researchEntrance.click(function(){getCookie("b2b_buyerid")?
(alert($.Cookie("b2b_buyerid")),b.attr({href:c+"&orgid="+getCookie("b2b_buyerid")})):b.attr({href:c+"&orgid=null"})});this.SetLocation()},GetSize:function(){this.hWindow=$(window).height();this.wWindow=$(window).width();this.tScroll=$(window).scrollTop();this.lScroll=$(window).scrollLeft()},SetLocation:function(){this.timer&&clearTimeout(this.timer);var b=this;this.GetSize();this.researchEntrance.css({top:this.IE6?(this.hWindow-this.researchEntranceHeight)/2+this.tScroll:(this.hWindow-this.researchEntranceHeight)/
2,left:this.wWindow-this.researchEntranceWidth});this.timer=setTimeout(function(){b.SetLocation()},50)}};function DHQueryString(b){return(b=location.search.match(new RegExp("[?&]"+b+"=([^&]*)(&?)","i")))?b[1]:b}var interpret=function(b){this.SetOptions(b);this.openId=this.options.openId;this.closeId=this.options.closeId;this.contentId=this.options.contentId;this.Init()};
interpret.prototype={SetOptions:function(b){this.options={openId:[],closeId:[],contentId:[]};$.extend(this.options,b||{})},Init:function(){this.openArray=[];this.closeArray=[];this.contentArray=[];for(var b=0;b<this.openId.length;b++)$("#"+this.openId[b])[0]&&(this.openArray.push($("#"+this.openId[b])),this.closeArray.push($("#"+this.closeId[b])),this.contentArray.push($("#"+this.contentId[b])));this.Control();this.OtherClick()},Control:function(){for(var b=this,c=0;c<this.openArray.length;c++)(function(){var d=
c;b.openArray[d].click(function(f){f.stopPropagation();for(f=0;f<c;f++)f==d?"none"==b.contentArray[d].css("display")?b.contentArray[d].css({display:"block"}):b.contentArray[d].css({display:"none"}):b.contentArray[f].css({display:"none"})});b.closeArray[d].click(function(){b.contentArray[d].css({display:"none"})});b.contentArray[d].click(function(b){b.stopPropagation()})})()},OtherClick:function(){for(var b=this,c=0;c<this.contentArray.length;c++)(function(){var d=c;$(document).click(function(){"block"==
b.contentArray[d].css("display")&&b.contentArray[d].css({display:"none"})})})()}};var expandpop=function(b){this.SetOptions(b);this.openId=this.options.openId;this.closeId=this.options.closeId;this.contentId=this.options.contentId;this.Init()};
expandpop.prototype={SetOptions:function(b){this.options={openId:[],closeId:[],contentId:[]};$.extend(this.options,b||{})},Init:function(){this.openArray=[];this.closeArray=[];this.contentArray=[];for(var b=0;b<this.openId.length;b++)$("#"+this.openId[b])[0]&&(this.openArray.push($("#"+this.openId[b])),this.closeArray.push($("#"+this.closeId[b])),this.contentArray.push($("#"+this.contentId[b])));this.Control();this.OtherClick()},Control:function(){for(var b=this,c=0;c<this.openArray.length;c++)(function(){var d=
c;b.openArray[d].click(function(f){f.stopPropagation();for(f=0;f<c;f++)f==d?("none"==b.contentArray[d].css("display")?b.contentArray[d].css({display:"block"}):b.contentArray[d].css({display:"none"}),b.contentArray[d].css({left:b.openArray[d].offset().left-12,top:b.openArray[d].offset().top+18})):b.contentArray[f].css({display:"none"})});b.closeArray[d].click(function(){b.contentArray[d].css({display:"none"})});b.contentArray[d].click(function(b){b.stopPropagation()})})()},OtherClick:function(){for(var b=
this,c=0;c<this.contentArray.length;c++)(function(){var d=c;$(document).click(function(){"block"==b.contentArray[d].css("display")&&b.contentArray[d].css({display:"none"})})})()}};
var selectUnitPriceCountry=function(b){this.SetOptions(b);$("#"+this.options.unitPriceCountryContent)[0]&&(this.unitPriceCountryContent=$("#"+this.options.unitPriceCountryContent),this.unitPriceConuntryList=this.options.unitPriceConuntryList,this.unitPriceWrapper=$("."+this.options.unitPriceWrapper),this.unitPriceButton=$("#"+this.options.unitPriceButton),this.unitPriceCountryTextarea=$("#"+this.options.unitPriceCountryTextarea),this.unitPriceConuntryClose=this.options.unitPriceConuntryClose,this.Init())};
selectUnitPriceCountry.prototype={SetOptions:function(b){this.options={unitPriceWrapper:"key-info",unitPriceButton:"unitPriceButton",unitPriceConuntryList:"unitPriceConuntryListUl",unitPriceCountryContent:"unitPriceCountryContent",unitPriceCountryTextarea:"unitPriceCountryTextarea",unitPriceConuntryClose:["unitPriceConuntryClose","unitPriceConuntryClose1"]};$.extend(this.options,b||{})},Init:function(){this.Click()},Click:function(){var b=this;this.unitPriceButton.mouseenter(function(){b.unitPriceWrapper.addClass("zIndex7");
$("#"+b.options.unitPriceCountryTextarea)[0]?(b.unitPriceCountryContent.html(b.unitPriceCountryTextarea.html()).css({display:"block"}),b.unitPriceCountryTextarea.remove(),b.LoadingNationLogo(),b.Close()):"none"==b.unitPriceCountryContent.css("display")?b.unitPriceCountryContent.css({display:"block"}):b.unitPriceCountryContent.css({display:"none"})}).mouseleave(function(){"block"==b.unitPriceCountryContent.css("display")&&b.unitPriceCountryContent.css({display:"none"});b.unitPriceWrapper.removeClass("zIndex7")});
this.unitPriceButton.click(function(c){c.stopPropagation();$("#"+b.options.unitPriceCountryTextarea)[0]?(b.unitPriceCountryContent.html(b.unitPriceCountryTextarea.html()).css({display:"block"}),b.unitPriceCountryTextarea.remove(),b.LoadingNationLogo(),b.Close()):"none"==b.unitPriceCountryContent.css("display")?b.unitPriceCountryContent.css({display:"block"}):b.unitPriceCountryContent.css({display:"none"})});this.unitPriceCountryContent.click(function(b){b.stopPropagation()})},HighlightDefaultStatus:function(){$(this.unitPriceConuntryList[0]).addClass("hover");
for(var b=1;b<this.unitPriceConuntryList.length;b++)$(this.unitPriceConuntryList[b]).removeClass("hover")},Close:function(){var b=this;$(document).click(function(){"block"==b.unitPriceCountryContent.css("display")&&b.unitPriceCountryContent.css({display:"none"})});for(var c=0;c<this.unitPriceConuntryClose.length;c++)$("#"+this.unitPriceConuntryClose[c]).click(function(){"block"==b.unitPriceCountryContent.css("display")&&b.unitPriceCountryContent.css({display:"none"})})},LoadingNationLogo:function(){var b=
$("#"+this.unitPriceConuntryList+"> li");for(i=0;i<b.length;i++){var c=$(b[i]).attr("init-src");$(b[i]).removeAttr("init-src");$(b[i]).prepend('<img src="'+c+'" width="16" height="11" />')}}};
var imitationSelect=function(b){this.SetOptions(b);this.selectWarp=this.options.selectWarp;this.hiddenInput=this.options.hiddenInput;this.textInput=this.options.textInput;this.arrow=this.options.arrow;this.list=this.options.list;this.ship_quantity=$("#"+this.options.ship_quantity);this.defaultLength=this.options.defaultLength;this.yScrollClass=this.options.yScrollClass;0!=this.selectWarp.length&&this.Init()};
imitationSelect.prototype={SetOptions:function(b){this.options={selectWarp:[],hiddenInput:[],textInput:[],arrow:[],list:[],defaultLength:12,ship_quantity:"ship_quantity",yScrollClass:"simulation-select-yScroll"};$.extend(this.options,b||{})},Init:function(){this.params={_From:this.options.selectWarp};this.selectWarpArray=[];this.hiddenInputArray=[];this.textInputArray=[];this.arrowArray=[];this.listArray=[];for(var b=0;b<this.selectWarp.length;b++)$("#"+this.selectWarp[b])[0]&&(this.selectWarpArray.push($("#"+
this.selectWarp[b])),this.hiddenInputArray.push($("#"+this.hiddenInput[b])),this.textInputArray.push($("#"+this.textInput[b])),this.arrowArray.push($("#"+this.arrow[b])),this.listArray.push($("#"+this.list[b])));this.FocusInput();this.ControlArrow();this.OpenSelectList()},FocusInput:function(){this.ship_quantity.blur(function(){calculateCost()})},ControlArrow:function(){for(var b=this,c=0;c<this.selectWarpArray.length;c++)(function(){var d=c;b.selectWarpArray[d].mouseenter(function(){b.arrowArray[d].addClass("simulation-select-harrow")}).mouseleave(function(){b.arrowArray[d].removeClass("simulation-select-harrow")})})()},
HighlightDefaultStatus:function(b,c){$(c[0]).addClass("hover");for(var d=1;d<c.length;d++)$(c[d]).removeClass("hover")},OpenSelectList:function(){for(var b=this,c=0;c<this.listArray.length;c++)(function(){var d=c,f=$("#"+b.options.list[d]+" > ul"),e=$("#"+b.options.list[d]+" > ul > li"),g=e.height()*e.length;f.prepend('<li style="overlfow:hidden;float:left;padding:0;margin-left:-1px;width:1px;height:'+g+'px"></li>');b.selectWarpArray[d].click(function(f){f.stopPropagation();b.HighlightDefaultStatus(d,
e);for(f=0;f<c;f++)f==d?"none"==b.listArray[d].css("display")?b.listArray[d].css({display:"block",visibility:"visible"}):b.listArray[d].css({display:"none",visibility:"hidden"}):b.listArray[f].css({display:"none",visibility:"hidden"})});e.length>b.defaultLength&&f.addClass(b.yScrollClass);b.SelectList(d,e);b.ClickList(d,e);b.Close(d,f,e)})()},SelectList:function(b,c){for(var d=0;d<c.length;d++)(function(){var b=d;$(c[b]).mouseenter(function(){$(this).addClass("hover");for(var e=0;e<d;e++)e!=b&&$(c[e]).removeClass("hover")})})()},
ClickList:function(b,c){for(var d=this,f=0;f<c.length;f++)$(c[f]).click(function(){d.textInputArray[b].val($(this).text());d.hiddenInputArray[b].val($(this).attr("vHidden"));"shippingSelect"==d.params._From&&calculateCost()})},Close:function(b,c){var d=this;$(document).click(function(){"block"==d.listArray[b].css("display")&&(d.listArray[b].css({display:"none",visibility:"hidden"}),d.HighlightDefaultStatus(b,c))})}};function isCon(b,c){for(var d=0;d<b.length;d++)if(b[d]==c)return!0;return!1}
function saleAttr(b,c,d,f,e,g,l,h,m,n){if(1<f.length){var p=h.split("__"),t=p[0],q=p[1],v=c.split("___")[0],p=d.split("___")[0],t=(p==v?h+"___":q+"__"+t+"___")+(r+"__"+u);if(d==c){r=$("#"+f[1]).attr("attrid");c=$("#"+r+" >li ");d=c.length;for(g=1;g<c.length;g++){u=$(c[g]).attr("vhidden");h=$(c[g]).html();f=p+"___"+m;var r=e.split("__"),u,r=r[1];0<=n.indexOf(f)&&r==u&&0==l&&(b+=1,$(c[g]).css({display:"none"}),r=$("#textSale_2").val(),h==r&&$("#textSale_2").val(""))}b==d&&($("#textSale_2").val(""),
$("#warpSale_2").css({display:"none"}),$("#warpSalenew_2").css({display:"block"}))}else if(r=e.split("__"),u=r[0],r=r[1],u==g)for(e=r.split("_")[0],p=$("#"+e+" >li "),g=1;g<p.length;g++)b=$(p[g]).attr("vhidden"),e=$(p[g]).html(),f=h+"___"+u,0<=d.indexOf(f)&&r==b&&(0==l?($(p[g]).css({display:"none"}),b=$("#textSale_1").val(),b==e&&$("#textSale_1").val("")):$(p[g]).css({display:"block"}));else if(r==g)for(e=u.split("_")[0],c=$("#"+e+" >li "),g=1;g<c.length;g++)b=$(c[g]).attr("vhidden"),e=$(c[g]).html(),
f=p+"___"+r+"__",t.indexOf(f)&&b==u&&(0==l?($(c[g]).css({display:"none"}),b=$("#textSale_2").val(),b==e&&$("#textSale_2").val("")):$(c[g]).css({display:"block"}))}else if(1==f.length)for(r=$("#"+f[0]).attr("attrid"),c=$("#"+r+" >li "),g=1;g<c.length;g++)u=$(c[g]).attr("vhidden"),p=$(c[g]).html(),f=h+"___",0<=d.indexOf(f)&&e==u&&(0==l?($(c[g]).css({display:"none"}),r=$("#textSale_1").val(),p==r&&$("#textSale_1").val("")):$(c[g]).css({display:"block"}))}
function inputTextTips(){var b=$("#messageTextarea"),c=$L("detail_tips_inputTextTips");b.val(c);b.focus(function(){1!=this.markTextarea?$(this).val("").css({color:"#000"}):1==this.markTextarea&&(this.markTextarea=2)}).blur(function(){""==$.trim($(this).val())?$(this).css({color:"#999"}).val(c):this.markTextarea=1});var b=$("#verifycodeInput"),d=$("#MzImgExpPwd"),f=$("#aMzImgExpPwd"),e=$L("detail_login_verifycode");b.val(e);b.focus(function(){"inline"!=d.css("display")&&d.css({display:"inline"}).attr({src:"https://secure.dhgate.com/verifycode.jsp?width=72&height=22&fontsize=19&charlength=4&temp="+
(new Date).getTime().toString(36)});1!=this.markInput?$(this).val("").css({color:"#000"}):1==this.markInput&&(this.markInput=2)}).blur(function(){""==$.trim($(this).val())?$(this).css({color:"#999"}).val(e):this.markInput=1});f.click(function(){d.css({display:"inline"}).attr({src:"https://secure.dhgate.com/verifycode.jsp?width=72&height=22&fontsize=19&charlength=4&temp="+(new Date).getTime().toString(36)})})}
fixedPosition=function(b){this.SetOptions(b);this.fpElement=$("#"+this.options.fpElement);this.fpElementHeight=this.fpElement.height();this.fpElementWidth=this.fpElement.width();this.timer=null;this.Init()};
fixedPosition.prototype={SetOptions:function(b){this.options={fpElement:"dhim"};$.extend(this.options,b||{})},Init:function(){$.browser.msie&&"6.0"==$.browser.version?this.SetLocation():this.fpElement.css({bottom:0,right:0})},GetSize:function(){this.hWindow=$(window).height();this.wWindow=$(window).width();this.tScroll=$(window).scrollTop();this.lScroll=$(window).scrollLeft()},SetLocation:function(){this.timer&&clearTimeout(this.timer);var b=this;this.GetSize();this.fpElement.css({top:this.hWindow+
this.tScroll-this.fpElementHeight,left:this.wWindow+this.lScroll-this.fpElementWidth});this.timer=setTimeout(function(){b.SetLocation()},50)}};var researchPosition=function(b){this.SetOptions(b);this.IE6="6.0"==$.browser.version&&$.browser.msie;this.timer=null;this.Init()};
researchPosition.prototype={SetOptions:function(b){this.options={researchId:"researchEntrance",researchContent:null};$.extend(this.options,b||{})},Init:function(){$("body").append('<div id="'+this.options.researchId+'" class="research">'+this.options.researchContent+"</div>");this.researchEntrance=$("#"+this.options.researchId);this.researchEntranceHeight=this.researchEntrance.height();this.researchEntranceWidth=this.researchEntrance.width();var b=this.researchEntrance.find("a"),c=b.attr("href");
this.researchEntrance.click(function(){getCookie("b2b_buyerid")?b.attr({href:c+"&orgid="+getCookie("b2b_buyerid")}):b.attr({href:c+"&orgid=null"})});this.SetLocation()},GetSize:function(){this.hWindow=$(window).height();this.wWindow=$(window).width();this.tScroll=$(window).scrollTop();this.lScroll=$(window).scrollLeft()},SetLocation:function(){this.timer&&clearTimeout(this.timer);var b=this;this.GetSize();this.researchEntrance.css({top:this.IE6?(this.hWindow-this.researchEntranceHeight)/2+this.tScroll:
(this.hWindow-this.researchEntranceHeight)/2,left:this.wWindow-this.researchEntranceWidth});this.timer=setTimeout(function(){b.SetLocation()},50)}};
var addToCartProduct=function(b){this.SetOptions(b);if(document.getElementById(this.options.addToCartButton)||document.getElementById(this.options.buyItNow))this.quantity=$("#"+this.options.quantity),this.prosizeid=$("#"+this.options.prosizeid),this.isBlackBuyer=$("#"+this.options.isBlackBuyer),this.sel_country=$("#"+this.options.sel_country),this.matrixbuykeys=$("#"+this.options.matrixbuykeys),this.matrixsalekeys=$("#"+this.options.matrixsalekeys),this.buyerCountryId=$("#"+this.options.buyerCountryId),
this.toolalreadyadd=$("#"+this.options.toolalreadyadd),this.getASampleArea=$("#"+this.options.getASampleArea),this.continueShopping=this.options.continueShopping,this.buyItNow=$("#"+this.options.buyItNow),this.addToCartButton=$("#"+this.options.addToCartButton),this.addToCartProduct=$("#"+this.options.addToCartProduct),this.selectPropertiesNotice=$("#"+this.options.selectPropertiesNotice),this.selectPropertiesNoticeList=$("#"+this.options.selectPropertiesNoticeList),this.addToCartProductContent=$("#"+
this.options.addToCartProductContent),this.addToCartProductMask=$("#"+this.options.addToCartProductMask),this.addToCartProductMaskIframe=$("#"+this.options.addToCartProductMaskIframe),this.cartpopclose=this.options.cartpopclose,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init()};
addToCartProduct.prototype={SetOptions:function(b){this.options={quantity:"quantity",prosizeid:"hiddenOptions",buyItNow:"buyItNow",sel_country:"hiddenCountry",isBlackBuyer:"isBlackBuyer",matrixbuykeys:"matrixbuykeys",matrixsalekeys:"matrixsalekeys",buyerCountryId:"buyercountryid",toolalreadyadd:"toolalreadyadd",getASampleArea:"getASampleArea",continueShopping:"continueShopping",addToCartButton:"addToCartButton",addToCartProduct:"addToCartProduct",addToCartProductContent:"addToCartProductContent",
addToCartProductMask:"ShippingCostMask",selectPropertiesNotice:"selectPropertiesNotice",selectPropertiesNoticeList:"selectPropertiesNoticeList",addToCartProductMaskIframe:"ShippingCostMaskIframe",cartpopclose:"cartpopclose"};$.extend(this.options,b||{})},Init:function(){this.params={_BuyProductNow:"BuyProductNow"};this.prosizeidValue=this.prosizeid.val();this.prosizeidValue||(this.prosizeidValue="");this.selCountryValue="0"==this.productType?this.sel_country.val():this.buyerCountryId.val();this.Load()},
CheckBuyAttrVal:function(b){b.stopPropagation();b=$(b.target);for(var c="",d="",f=DH_Product_Properties_Color_Object.colorListHiddenInput,e=0;e<f.length;e++){var g=f[e];if(0<=g.indexOf("hiddenBuy_")){var l="listBuy_"+g.split("_")[1],h=$("#"+l+" li"),m=$("#"+l).attr("attrid");if(0<h.length){for(var n=0,p=0,g=0;g<h.length;g++)$(h[g]).is("[selectedattr='js-selectedAttr']")?n++:"color-fail"==$(h[g]).attr("class")&&p++;0>=n&&p<h.length&&(function(){var b=$("#"+l).parent(),c=b.find(".js-attr-error");0<
c.length?c.show():b.append('<div class="qtyerror js-attr-error" style="display: block;">'+$L("detial_valid_unSelected",{select:$("#"+m).text().replace(":","")})+"</div>")}(),b.attr("id")==this.options.toolAddtoCart&&$(window).scrollTop(100),d+="<li>"+$("#"+m).text().substring(0,$("#"+m).text().length-1)+"</li>")}}else if(h=$("#customSize li"),0<h.length){for(var p=n=0,t=$("#customSize").attr("vhidden"),g=0;g<h.length;g++)$(h[g]).is("[selectedattr='js-selectedAttr']")?n++:"color-fail"==$(h[g]).attr("class")&&
p++;0>=n&&p<h.length&&(function(){var b=$("#customSize").parent(),c=b.find(".js-attr-error");0<c.length?c.show():b.append('<div class="qtyerror js-attr-error" style="display: block;">'+$L("detial_valid_unSelected",{select:$("#"+t).text().replace(":","")})+"</div>")}(),d+="<li>"+$("#"+t).text().substring(0,$("#"+t).text().length-1)+"</li>")}""==d&&(c+=$("#"+f[e]).val()+"-")}return""==d?!0:!1},DhgateBtnTrack:function(b){_dhq=_dhq||[];_dhq.push(["setVar","itemcode",_itemcode]);_dhq.push(["setVar","cid",
_pro_catalogid]);_dhq.push(["setVar","pid",_pid]);_dhq.push(["pageview",b])},BuyProductNow:function(){var b=this;b.buyItNow.click(function(c){if(b.CheckBuyAttrVal(c,"BuyProductNow")&&""!=$("#selectedSkuVal").val())if($("#returnurl").val(window.location.href),$("#impressionInfo").val(b.setLocationHash()),c=c=$("#_cur_shippingtypeid").val()||"",$("#shipType").val(c),$("#inventoryLocationCountryId").val(),$("#stProductDiv").is(":hidden")){var d=$("#hiddenCountry").val();$("#shipCoutry").val(d);b.DhgateBtnTrack("pdbn");
document.productdisplayForm.submit()}else if(c=$("#planchoosebox .this"),0<c.length){d=$("#hiddenCountry").val();$("#shipCoutry").val(d);d="";0<c.length&&(c=$(c[0]).attr("id"),d=$("#"+c+"AddCart").val());if(""!=d)for(c=d.split("&"),d=0;d<c.length;d++){var f=c[d].split("=");"stSkuId"==f[0]&&$("#stSkuId").val(f[1]);"stSkuMd5"==f[0]&&$("#stSkuMd5").val(f[1]);"stItemCode"==f[0]&&$("#stItemCode").val(f[1]);"stSupplierid"==f[0]&&$("#stSupplierid").val(f[1])}$("#selectedSkuVal").val();d=$(".js-wholesale-list li");
c="";0<d.length&&(c=d.eq(0).attr("price")||0,d=$("#radixUnit").val(),c/=d);$("#productToSTPrice").val(c);b.DhgateBtnTrack("pdbn");document.productdisplayForm.submit()}else new buySt({isDisplay:1==$("#tuangou").val()||1!=$("#isCallStProd").val()?!1:!0})})},setLocationHash:function(){var b=location.hash;""!=b&&1<b.length&&(b=b.substr(1));return b},Load:function(){var b=this,c="",d="",f="",e="";this.BuyProductNow();this.addToCartButton.click(function(g){if(b.CheckBuyAttrVal(g)&&(c=$("#selectedSkuVal").val(),
d=$("#selectedSkuMd5Val").val(),""!=c&&"block"!=b.isBlackBuyer.css("display"))){b.addToCartProductContent.html('<div class="popup-loading"></div>');b.addToCartProduct.css({display:"block"});b.addToCartProductMask.css({display:"block"});b.Resize();g="";"block"==$("#customSizeInfo").css("display")&&(f=$("#hiddenAttrvalcm").val(),0<$("#remarksText").length&&(g=$("#remarksText").val()),""!=g&&(g=escape(g)),$("#remarksText").val(),e=$("#customSizeInput").val());var l=$("#hiddenCountry").val(),h=b.setLocationHash(),
m=$("#stSupplierid").val(),n=$("#inventoryLocationCountryId").val(),p="",p=$("li.current").find('input[name="shippingtypeid"]').attr("vhidden");g="//shoppingcart.dhgate.com/cart/addToCartForProduct.do?addfrom=7&shipType="+p+"&act=addToCartforProduct&isblank=true&stSupplierid="+m+"&shipCoutry="+l+"&supplierid="+_toid+"&itemcode="+_itemcode+"&skuId="+c+"&skuMd5="+d+"&quantity="+$.trim(b.quantity.val())+"&cou="+b.selCountryValue+"&customattr="+f+"&specification="+g+"&unit="+e+"&counterfeittypeid="+_counterfeittypeid+
"&impressionInfo="+h+"&inventoryLocationCountryId="+n+"&sy="+$("#shopifysign").val()+"&ifpb="+$("#displayBannerSign").val();$("#stProductDiv").is(":hidden")||(l=$("#planchoosebox .this"),h="",0<l.length&&(l=$(l[0]).attr("id"),h=$("#"+l+"AddCart").val()),""!=h&&(g=g+"&"+h),$("#selectedSkuVal").val(),h=$(".js-wholesale-list li"),l="",0<h.length&&(l=h.eq(0).attr("price")||0,h=$("#radixUnit").val(),l/=h),g=g+"&productToSTPrice="+l);b.prosizeidValue||(b.prosizeidValue="");DH.request({url:g,type:"GET",
dataType:"jsonp",cache:!1,success:function(c){c=c?c.result:"";null==c||""==c?(b.addToCartProduct.css({display:"none"}),b.addToCartProductMask.css({display:"none"}),b.isBlackBuyer.css({display:"block"}),b.toolalreadyadd.html($L("detail_msg_addProdctToCartError",{_sellerDomainname:_sellerDomainname})),b.toolalreadyadd.css({display:"block"})):(b.addToCartButton.removeAttr("init-src"),b.addToCartProductContent.find("div").remove(),b.addToCartProductContent.append(c),b.addToCartProduct.css({visibility:"hidden"}),
b.Close(),b.Load.first="true",$("#cartcnt").text($("#basketSize").val()),b.toolalreadyadd.css({display:"block"}),$("#isaddtocart").val("1"),b.LoadCrossPromotion())}})}})},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.addToCartProduct.css("display")){var b,c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.addToCartProduct.children("table").height();
f=this.addToCartProduct.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.addToCartProduct.css({top:e,left:g,width:f,height:d});this.addToCartProductMask.css({width:c,height:b,opacity:.5});this.addToCartProductMaskIframe.css({width:c,height:b,opacity:0});"true"==this.Load.first&&this.addToCartProduct.css({visibility:"visible"})}},
Close:function(){var b=this;$("#"+this.cartpopclose).click(function(){b.addToCartProduct.css({display:"none"});b.addToCartProductMask.css({display:"none"})});$("#"+this.continueShopping).click(function(){b.addToCartProduct.css({display:"none"});b.addToCartProductMask.css({display:"none"})})},LoadCrossPromotion:function(){var b=this;$("#loadcross").load("/dhrec/add_to_cart_recommendation.action?pagetype=9&itemcode="+_itemcode+"&catalog="+_pro_catalogid,function(c){try{var d=$.parseJSON(c);c="";null!=
d.ot&&(c=$.trim(d.ot));var f=$.trim(d.pagetrack);""!=c&&""!=f&&b.CropSale(c,f);null==$.trim(d.content)||""==$.trim(d.content)?$("#loadcross").html(""):$("#loadcross").html(d.content)}catch(e){$("#loadcross").html("")}})},CropSale:function(b,c){try{var d=_dhta.getTracker();d.setVar("searchcontent",c);d.pageview(b)}catch(f){}}};
var loadCommonCp=function(b){this.SetOptions(b);document.getElementById(this.options.crossPromotionWarp)&&(this.crossPromotionWarp=$("#"+this.options.crossPromotionWarp),this.timer=null,this.Init())};
loadCommonCp.prototype={SetOptions:function(b){this.options={crossPromotionWarp:"crossPromotionWarp"};$.extend(this.options,b||{})},Init:function(){this.Run()},Run:function(){this.timer&&clearTimeout(this.timer);var b=this,c=this.crossPromotionWarp.offset().top,d=$(window).height(),f=$(window).scrollTop();if(c<=d+f)if(b.isload)this.timer&&clearTimeout(this.timer);else{b.isload=!0;b.Load();return}this.timer=setTimeout(function(){b.Run()},50)},Load:function(){new commonCp}};
var commonCp=function(b){this.SetOptions(b);this.commonCpBoxWarp=$("#"+this.options.commonCpBoxWarp);this.commonCpBox=$("#"+this.options.commonCpBox);this.itemWidth=this.options.itemWidth;this.nextButton=$("#"+this.options.nextButton);this.backButton=$("#"+this.options.backButton);this.splitString=this.options.splitString;this.pageNum=$("#"+this.options.pageNum);this.pageTotal=$("#"+this.options.pageTotal);this.showFirst=$("#"+this.options.showFirst);this.timer1=this.timer=null;this.Init()};
commonCp.prototype={SetOptions:function(b){this.options={nextButton:"nextButton",backButton:"backButton",commonCpBoxWarp:"commonCpBoxWarp",commonCpBox:"commonCpBox",commonCpList:"commonCpBox > li",itemWidth:193,splitString:"SPLITFLAG",pageNum:"pageNum",pageTotal:"pageTotal",showFirst:"showFirst"}},Init:function(){this.Load()},Load:function(){var b=this,c=!0,d="",f=window.location.href;-1!=f.indexOf("#")&&(d=f.substring(f.indexOf("#")+1,f.length));DH.request({type:"GET",url:"/dhrec/recommend_for_store_product_html.action",
dataType:"JSON",data:"pagetype="+$("#pagetype").val()+"&itemcode="+_itemcode+"&catalog="+_pro_catalogid+"&recinfo="+d,cache:"false",success:function(e){c=!1;if(null==e||""==$.trim(e))$("#crossPromotionWarp").css({display:"none"});else{var d=$.trim(e.ot),f=$.trim(e.pagetrack),h=$.trim(e.sppagetrack),m=$.trim(e.spot);""!=d&&""!=f&&b.CropSale(d,f);""!=m&&""!=h&&b.CropSaleSp(m,h);e=e.content.split(b.splitString);$("#crossPromotionWarp").css({display:"block"});for(d=0;d<e.length;d++)""!==e[d]&&b.commonCpBoxWarp.data("cache"+
d,e[d]);b.dataLength=e.length-1;b.visualSum=Math.floor(b.commonCpBoxWarp.width()/b.itemWidth);b.cPage=1;b.sPage=Math.ceil(b.dataLength/b.visualSum);b.pageNum.html(b.cPage);b.pageTotal.html(b.sPage);for(e=0;e<b.visualSum;e++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+e));b.Monitor();b.Page()}},complete:function(b){c&&$("#crossPromotionWarp").css({display:"none"})}})},Monitor:function(){var b=this;this.timer&&clearTimeout(this.timer);this.visualWidth=this.commonCpBoxWarp.width();this.visualWidth!=
this.Monitor._visualWidth&&this.Monitor._visualSum&&(this.commonCpList=$("#"+this.options.commonCpList),this.visualSum=Math.floor(this.visualWidth/this.itemWidth),this.sPage=Math.ceil(this.dataLength/this.visualSum),this.cPage=Math.ceil((this.Monitor._visualSum*this.Monitor._cPage-(this.Monitor._visualSum-1))/this.visualSum),this.pageNum.html(this.cPage),this.pageTotal.html(this.sPage),this.DisplayChange(this.visualSum,this.Monitor._visualSum,this.cPage),this.showFirstPro());this.Monitor._visualWidth=
this.visualWidth;this.Monitor._visualSum=this.visualSum;this.Monitor._cPage=this.cPage;this.timer=setTimeout(function(){b.Monitor()},50)},DisplayChange:function(b,c,d){if(b<c)for(;b<c;b++)this.commonCpList[b]&&$(this.commonCpList[b]).remove();else for(this.commonCpBox.html(""),c=b*d,b=b*d-b;b<c;b++)this.commonCpBoxWarp.data("cache"+b)&&this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+b))},Page:function(){var b=this;this.nextButton.click(function(){b.cPage++;b.cPage>b.sPage&&(b.cPage=1);b.Add("right");
b.pageNum.html(b.cPage);b.showFirstPro()});this.backButton.click(function(){b.cPage--;0>=b.cPage&&(b.cPage=b.sPage);b.Add("left");b.pageNum.html(b.cPage);b.showFirstPro()})},showFirstPro:function(){var b=this;1==this.cPage?b.showFirst.html(""):this.showFirst.html('( <a href="javascript:void(0)">Start over</a> )');this.showFirst.click(function(){b.cPage=1;b.commonCpBox.html("");for(var c=0;c<b.visualSum;c++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+c));b.showFirst.html("");b.pageNum.html(b.cPage)})},
Add:function(b){var c=this;if("true"!=this.Add.flag)switch(this.commonCpList=$("#"+this.options.commonCpList),b&&(this.Add.direction=b),this.Add.direction){case "left":this.Add.sVar=this.visualSum*this.cPage-this.visualSum;this.Add.eVar=this.visualSum*this.cPage;this.Add.i=0;break;case "right":this.Add.sVar=this.visualSum*this.cPage-1,this.Add.eVar=this.visualSum*this.cPage-this.visualSum,this.Add.i=this.visualSum-1}this.timer1&&clearTimeout(this.timer1);switch(this.Add.direction){case "left":if(this.Add.i>
this.visualSum||this.Add.sVar>=this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).before(this.commonCpBoxWarp.data("cache"+this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)));break;case "right":if(0>this.Add.i||this.Add.sVar<this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).after(this.commonCpBoxWarp.data("cache"+
this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)))}this.commonCpList[this.Add.i]&&$(this.commonCpList[this.Add.i]).remove();switch(this.Add.direction){case "left":this.Add.sVar++;this.Add.i++;break;case "right":this.Add.sVar--,this.Add.i--}this.Add.flag="true";this.timer1=setTimeout(function(){c.Add()},20)},CropSale:function(b,c){try{var d=_dhta.getTracker();d.setVar("searchcontent",c);d.pageview(b)}catch(f){}},CropSaleSp:function(b,c){try{var d=_dhta.getTracker();
d.setVar("vd",c);d.pageview(b)}catch(f){}}};function MM_openBrWindow(b,c,d){window.open(b,c,d)}function Pt(b,c){var d=_dhta.getTracker();d.setVar("vd",c);d.pageview(b)}function Pts(b,c,d){var f=_dhta.getTracker();f.setVar("vd",c);f.setVar("itemcode",d);f.pageview(b)}function ResetValue(){$("#productdisplayForm")[0].reset();for(var b=$("input[type=hidden]"),c=0;c<b.length;c++)"1"==$(b[c]).attr("reset")&&$(b[c]).val($(b[c]).attr("initial"))}
function InitProperty(){if(0<_buyAttrListSize){0<_buyAttrCustomListSize&&(DH_Product_Properties_Color_Object.colorList.push("customSize"),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuycustomSize"));for(var b=1;b<=_buyAttrListSize;b++)DH_Product_Properties_Color_Object.colorList.push("listBuy_"+b),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuy_"+b);for(b=0;b<DH_Product_Properties_Color_Object.colorList.length;b++)document.getElementById(DH_Product_Properties_Color_Object.colorList[b])||
(DH_Product_Properties_Color_Object.colorList.splice(b,1),DH_Product_Properties_Color_Object.colorListHiddenInput.splice(b,1))}}
function calculateCost(){var b=$("#ship_quantity").attr("value"),c=$("#_cur_maxordersize").val(),d=$("#minQuantity").val(),f=$("#shippingSelectHiddenInput").attr("value");/^\d+$/.test(b)?"0"==b?(alert("Purchase quantity is zero,Please checkout!"),$("#ship_quantity").val(d)):(b=parseInt(b),c=parseInt(c),d=parseInt(d),b>c&&($("#ship_quantity").val(c),b=c),b<d&&($("#ship_quantity").val(d),b=d),DH.request({url:"/product/shippingpayment.do?ship_country="+f+"&ship_quantity="+b+"&pid="+_pid+"&itemcode="+
_itemcode,type:"GET",dataType:"html",success:function(b){b=b.split('<div name="separator"></div>');$("#_ShippingAndPayment_sub0").html(b[0]);$("#_ShippingAndPayment_sub1").html(b[1])}}),gtag("event","caculate",{event_category:"Checkout-product",event_label:""})):(alert("Quantity entered must be a number!"),$("#ship_quantity").val(d))}
function ShowLocalTime(){var b=new Date,c=b.getTimezoneOffset()/60,d=b.getDate(),f=b.getDay(),e=b.getMonth(),c=b.getHours()+c+8,b=b.getMinutes(),g;0>c?(c=eval(24+c),f=0==f?6:f-1):24>c||(c%=24,f=6==f?0:f+1);f="Sun Mon Tue Wed Thu Fri Sat".split(" ")[f];e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[e];0<=c&&12>c?g="AM":12<=c&&(g="PM",c-=12);d=(10>c?"0":"")+c+(10>b?":0":":")+b+" "+g+" "+f+" "+e+" "+d+" Now";$("#sellertime").html(d);$("#sellertime").css({display:"block"})}
function ckm(){var b=navigator.userAgent,c=$("body"),d='<div id="wapTips"><div class="wapbox"><div class="wapbox2"><a href="'+$("#mobileProductUrl").val()+'" class="waplink">Tap here</a> to visit DHgate\'s Mobile Website for a better mobile shopping experience.</div></div><div class="wapclose" id="closeWapTips"></div></div>',f=/android|netscape|iphone|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;
"yes"!=$.cookie("wapEntrance")&&(f.test(b)&&c.before(d),$("#closeWapTips").click(function(){$("#wapTips").remove();$.cookie("wapEntrance","yes",{expires:.5,path:"/"})}))}var second_num=0;function secondCnt(){second_num++;setTimeout(secondCnt,1E3)}var loadTransactionHistory=function(b){this.SetOptions(b);document.getElementById(this.options.transactionHistoryWarp)&&(this.transactionHistoryWarp=$("#"+this.options.transactionHistoryWarp),this.timer1=this.timer=null,this.Init())};
loadTransactionHistory.prototype={SetOptions:function(b){this.options={transactionHistoryWarp:"transactionHistoryWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){if("true"!=this.Load.flag){var b=this;DH.request({url:this.transactionHistoryWarp.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.transactionHistoryWarp.removeAttr("init-src");b.transactionHistoryWarp.find("div").remove();b.transactionHistoryWarp.append(c);$(window).unbind("scroll.TransactionHistory").unbind("resize.TransactionHistory");
new historyTurnPage({historyParent:"transactionHistoryWarp"})}});this.Load.flag="true"}},Monitor:function(){var b=this;$(window).bind("scroll.TransactionHistory",function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.TransactionHistory",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.transactionHistoryWarp.offset().top<=b+c&&this.Load()}};
var loadTransactionFeedback=function(b){this.SetOptions(b);document.getElementById(this.options.transactionFeedbackWarp)&&(this.transactionFeedbackWarp=$("#"+this.options.transactionFeedbackWarp),this.timer1=this.timer=null,this.Init())};
loadTransactionFeedback.prototype={SetOptions:function(b){this.options={transactionFeedbackWarp:"transactionFeedbackWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){if("true"!=this.Load.flag){var b=this;DH.request({url:this.transactionFeedbackWarp.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.transactionFeedbackWarp.removeAttr("init-src");b.transactionFeedbackWarp.find("div").remove();b.transactionFeedbackWarp.append(c);$(window).unbind("scroll.TransactionFeedback").unbind("resize.TransactionFeedback");
new feedbackTurnPage({feedbackParent:"transactionFeedbackWarp"})}});this.Load.flag="true"}},Monitor:function(){var b=this;$(window).bind("scroll.TransactionFeedback",function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.TransactionFeedback",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.transactionFeedbackWarp.offset().top<=b+c&&this.Load()}};
var loadProductReviews=function(b){this.SetOptions(b);document.getElementById(this.options.productReviewsWarp)&&(this.productReviewsWarp=$("#"+this.options.productReviewsWarp),this.timer1=this.timer=null,this.Init())};
loadProductReviews.prototype={SetOptions:function(b){this.options={productReviewsWarp:"productReviewsWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){if("true"!=this.Load.flag){var b=this;DH.request({url:this.productReviewsWarp.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.productReviewsWarp.removeAttr("init-src");b.productReviewsWarp.find("div").remove();b.productReviewsWarp.append(c);$(window).unbind("scroll.ProductReviews").unbind("resize.ProductReviews");
window.DH_Product_Reviews_Sign_PopUp||(window.DH_Product_Reviews_Sign_PopUp=new productReviewsSignPopUp);new PRScaling;window.DH_PR_IM_Popup||(window.DH_PR_IM_Popup=new PRIMPopup);officialReviewInfo()}});this.Load.flag="true"}},Monitor:function(){var b=this;$(window).bind("scroll.ProductReviews",function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.ProductReviews",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},
5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.productReviewsWarp.offset().top<=b+c&&this.Load()}};function writeReview(b){window.location.replace(b)}var loadOtherItems=function(b){this.SetOptions(b);document.getElementById(this.options.otherItemsWarp)&&(this.otherItemsWarp=$("#"+this.options.otherItemsWarp),this.timer1=this.timer=null,this.Init())};
loadOtherItems.prototype={SetOptions:function(b){this.options={otherItemsWarp:"otherItemsWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){if("true"!=this.Load.flag){var b=this;DH.request({url:this.otherItemsWarp.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.otherItemsWarp.removeAttr("init-src");b.otherItemsWarp.find("div").remove();b.otherItemsWarp.append(c);$(window).unbind("scroll.OtherItems").unbind("resize.OtherItems")}});this.Load.flag=
"true"}},Monitor:function(){var b=this;$(window).bind("scroll.OtherItems",function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.OtherItems",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.otherItemsWarp.offset().top<=b+c&&this.Load()}};
function changeCountry(){var b=$("#listCountry>ul>li"),c;$("#hiddenCountry").val();for(var d=0;d<b.length;d++)(function(){var c=d;$(b[c]).mouseenter(function(){$(this).addClass("hover");for(var e=0;e<d;e++)e!=c&&$(b[e]).removeClass("hover")})})(),$(b[d]).click(function(){c=$(this).attr("vHidden");var b=$(this).attr("vName");$("#hiddenCountry").val(c);$("#textCountry").val(b);b=$("#_init_epacket_shippingtypeid").val();"US"!=c||"CHINAPOSTAIR"!=b&&"HONGKONGPOST"!=b&&"SINGAPOREPOST"!=b||"1"!=$("#epacketflag").val()?
$("#recommendePacket").css({display:"none"}):$("#recommendePacket").css({display:"block"})})}
var cTab=function(b){this.SetOptions(b);this.ctabBoxItems=$("#"+this.options.ctabBoxItems);this.cItemDescription=this.options.cItemDescription;this.cShippingAndPayment=this.options.cShippingAndPayment;this.cTransactionHistory=this.options.cTransactionHistory;this.cProductReviews=this.options.cProductReviews;this.itemDescription=$("#"+this.options.itemDescription);this.shippingAndPayment=$("#"+this.options.shippingAndPayment);this.transactionHistory=$("#"+this.options.transactionHistory);this.productReviews=
$("#"+this.options.productReviews);this.anchorProductReviews=this.options.anchorProductReviews;this.anchorTransactionHistory=this.options.anchorTransactionHistory;this.Init()};
cTab.prototype={SetOptions:function(b){this.options={ctabBoxItems:"ctabBox  ul > li",cItemDescription:"ctab-itemDescription",cShippingAndPayment:"ctab-shippingAndPayment",cTransactionHistory:"ctab-transactionHistory",cProductReviews:"ctab-productReviews",itemDescription:"itemDescription",shippingAndPayment:"shippingAndPayment",transactionHistory:"transactionHistory",productReviews:"productReviews",anchorProductReviews:"anchor-productReviews",anchorTransactionHistory:"anchor-transactionHistory"};$.extend(this.options,
b||{})},Init:function(){this.Open();this.OpenProductReviews();this.AnchorPoint()},Open:function(){for(var b=this,c=0;c<this.ctabBoxItems.length;c++)(function(){var d=c;$(b.ctabBoxItems[d]).click(function(){b.Open.__index||(b.Open.__index=b.RetrunCurrentIndex(),b.Open.__id=$(b.ctabBoxItems[b.Open.__index]).attr("id").split("ctab-")[1]);if(b.Open.__index!=d){$(b.ctabBoxItems[d]).addClass("current");$(b.ctabBoxItems[b.Open.__index]).removeClass("current");switch($(b.ctabBoxItems[d]).attr("id")){case b.cItemDescription:b.itemDescription.css({display:"block"});
break;case b.cShippingAndPayment:b.shippingAndPayment.css({display:"block"});b.LoadShippingAndPayment();break;case b.cTransactionHistory:b.transactionHistory.css({display:"block"});b.LoadTransactionHistory();break;case b.cProductReviews:b.productReviews.css({display:"block"}),b.LoadProductReviews()}$("#"+b.Open.__id).css({display:"none"});b.Open.__index=d;b.Open.__id=$(b.ctabBoxItems[d]).attr("id").split("ctab-")[1]}})})()},AnchorPoint:function(){var b=this;document.getElementById(this.anchorProductReviews)&&
$("#"+this.anchorProductReviews).click(function(){var c=b.RetrunCurrentIndex(),d=$(b.ctabBoxItems[c]).attr("id").split("ctab-")[1];$(b.ctabBoxItems[c]).removeClass("current");$("#"+d).css({display:"none"});$("#"+b.cProductReviews).addClass("current");$("#"+b.cProductReviews.split("ctab-")[1]).css({display:"block"});b.productReviews.css({display:"block"});b.LoadProductReviews();b.Open.__index=b.RetrunCurrentIndex();b.Open.__id=$(b.ctabBoxItems[b.Open.__index]).attr("id").split("ctab-")[1];gtag("event",
"pd-tab",{event_category:"Seller store",event_label:"customerreview-top"})});document.getElementById(this.anchorTransactionHistory)&&$("#"+this.anchorTransactionHistory).click(function(){var c=b.RetrunCurrentIndex(),d=$(b.ctabBoxItems[c]).attr("id").split("ctab-")[1];$(b.ctabBoxItems[c]).removeClass("current");$("#"+d).css({display:"none"});$("#"+b.cTransactionHistory).addClass("current");$("#"+b.cTransactionHistory.split("ctab-")[1]).css({display:"block"});b.transactionHistory.css({display:"block"});
b.LoadTransactionHistory();b.Open.__index=b.RetrunCurrentIndex();b.Open.__id=$(b.ctabBoxItems[b.Open.__index]).attr("id").split("ctab-")[1];gtag("event","pd-tab",{event_category:"Checkout-product",event_label:"transaction-top"})})},RetrunCurrentIndex:function(){for(var b=0;b<this.ctabBoxItems.length;b++)if($(this.ctabBoxItems[b]).hasClass("current"))return b},LoadShippingAndPayment:function(){if("true"!=this.LoadShippingAndPayment.flag){var b=this;DH.request({url:b.shippingAndPayment.attr("init-src"),
type:"GET",dataType:"html",cache:!1,success:function(c){b.shippingAndPayment.removeAttr("init-src");b.shippingAndPayment.find("div").remove();b.shippingAndPayment.append(c);new interpret({openId:["stacQaIcon"],closeId:["stacQaClose"],contentId:["stacQa"]});new imitationSelect({selectWarp:["shippingSelect"],hiddenInput:["shippingSelectHiddenInput"],textInput:["shippingSelectInput"],arrow:["shippingSelectArrow"],list:["shippingSelectList"]})}});this.LoadShippingAndPayment.flag="true"}},LoadTransactionHistory:function(){if("true"!=
this.LoadTransactionHistory.flag){var b=this;DH.request({url:b.transactionHistory.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.transactionHistory.removeAttr("init-src");b.transactionHistory.find("div").remove();b.transactionHistory.append(c);new historyTurnPage({historyParent:"transactionHistory"})}});this.LoadTransactionHistory.flag="true";gtag("event","pd-tab",{event_category:"Checkout-product",event_label:"transactionhis"})}},LoadProductReviews:function(){if("true"!=
this.LoadProductReviews.flag){gtag("event","pd-tab",{event_category:"Seller store",event_label:"customerreview"});var b=this;DH.request({url:b.productReviews.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.productReviews.removeAttr("init-src");b.productReviews.find("div").remove();b.productReviews.append(c);window.DH_Product_Reviews_Sign_PopUp||(window.DH_Product_Reviews_Sign_PopUp=new productReviewsSignPopUp);new PRScaling;window.DH_PR_IM_Popup||(window.DH_PR_IM_Popup=
new PRIMPopup);officialReviewInfo()}});this.LoadProductReviews.flag="true"}},OpenProductReviews:function(){if("yes"==this.QueryString("productreviews")&&document.getElementById(this.cProductReviews)){$(window).scrollTop($("#"+this.cProductReviews).offset().top);var b=this.RetrunCurrentIndex(),c=$(this.ctabBoxItems[b]).attr("id").split("ctab-")[1];$(this.ctabBoxItems[b]).removeClass("current");$("#"+c).css({display:"none"});$("#"+this.cProductReviews).addClass("current");$("#"+this.cProductReviews.split("ctab-")[1]).css({display:"block"});
this.productReviews.css({display:"block"});this.LoadProductReviews();this.Open.__index=this.RetrunCurrentIndex();this.Open.__id=$(this.ctabBoxItems[this.Open.__index]).attr("id").split("ctab-")[1]}},QueryString:function(b){return(b=location.search.match(new RegExp("[?&]"+b+"=([^&]*)(&?)","i")))?b[1]:b}};
var historyTurnPage=function(b){this.SetOptions(b);document.getElementById(this.options.historyParent)&&(this.historyParent=$("#"+this.options.historyParent),this.historyPage=$(this.options.historyPage),this.pageUrl=this.options.pageUrl,this._window=$(window),this.Init())};
historyTurnPage.prototype={SetOptions:function(b){this.options={historyParent:null,historyPage:".transaction-page",pageUrl:"/product/displayorder.do"};$.extend(this.options,b||{})},Init:function(){this.historyParent.data("history1",this.historyParent.html());this.Page()},Page:function(){var b=this;this.historyPage.live("click",function(c){switch(c.target.nodeName){case "A":b._window.scrollTop(b.historyParent.offset().top);b.Load($(c.target).attr("page"));break;case "EM":b._window.scrollTop(b.historyParent.offset().top),
b.Load($(c.target).parent("a").attr("page"))}})},Load:function(b){var c=this;c.historyParent.data("history"+b)?c.historyParent.html(c.historyParent.data("history"+b)):DH.request({url:this.pageUrl,type:"GET",dataType:"html",cache:!1,data:{act:"pageload",appid:"dh",page:b,prodLineId:_productlineid,productid:_pid,supplierid:_toid,itemcode:_itemcode},success:function(d){c.historyParent.data("history"+b,d);c.historyParent.html(c.historyParent.data("history"+b))}})}};
var feedbackTurnPage=function(b){this.SetOptions(b);document.getElementById(this.options.feedbackParent)&&(this.feedbackParent=$("#"+this.options.feedbackParent),this.feedbackPage=$(this.options.feedbackPage),this.pageUrl=this.options.pageUrl,this._window=$(window),this.Init())};
feedbackTurnPage.prototype={SetOptions:function(b){this.options={feedbackParent:null,feedbackPage:".transaction-feedback-page",pageUrl:"/product/displayfeedback.do"};$.extend(this.options,b||{})},Init:function(){this.feedbackParent.data("feedback1",this.feedbackParent.html());this.Page()},Page:function(){var b=this;this.feedbackPage.live("click",function(c){switch(c.target.nodeName){case "A":b._window.scrollTop(b.feedbackParent.offset().top);b.Load($(c.target).attr("page"));break;case "EM":b._window.scrollTop(b.feedbackParent.offset().top),
b.Load($(c.target).parent("a").attr("page"))}})},Load:function(b){var c=this;c.feedbackParent.data("feedback"+b)?c.feedbackParent.html(c.feedbackParent.data("feedback"+b)):DH.request({url:this.pageUrl,type:"GET",dataType:"html",cache:!1,data:{productid:_pid,supplierid:_toid,page:b},success:function(d){c.feedbackParent.data("feedback"+b,d);c.feedbackParent.html(c.feedbackParent.data("feedback"+b))}})}};
var productReviewsSignPopUp=function(b){this.SetOptions(b);document.getElementById(this.options.productReviewsSign)&&(this.productReviewsSign=$("#"+this.options.productReviewsSign),this.productReviewsSignContent=$("#"+this.options.productReviewsSignContent),this.productReviewsMask=$("#"+this.options.productReviewsMask),this.productReviewsMaskIframe=$("#"+this.options.productReviewsMaskIframe),this.productreviewsYesButton=$(this.options.productreviewsYesButton),this.productreviewsNoButton=$(this.options.productreviewsNoButton),
this.productReviewsSigncClose=this.options.productReviewsSigncClose,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};
productReviewsSignPopUp.prototype={SetOptions:function(b){this.options={productreviewsYesButton:".productreviews-yes",productreviewsNoButton:".productreviews-no",productReviewsSign:"productReviewsSign",productReviewsSignContent:"productReviewsSignContent",productReviewsMask:"productReviewsMask",productReviewsMaskIframe:"productReviewsMaskIframe",productReviewsSigncClose:"productReviewsSigncClose"};$.extend(this.options,b||{})},Init:function(){this.Load()},Load:function(){var b=this;this.productreviewsYesButton.live("click",
function(){b.ButtonFunction(this)});this.productreviewsNoButton.live("click",function(){b.ButtonFunction(this)})},ButtonFunction:function(b){var c=this;c.productReviewsSign.css({display:"block"});c.productReviewsMask.css({display:"block"});var d=$(b).attr("reviewid"),f=$(b).attr("reviewvalue"),e="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_successText_No")+"</li>",g="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_ownText")+"</li>",l="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_repeatedText")+
"</li>",h="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_successText_No")+"</li>";b="//"+_wwwURL+location.pathname+"?helpclick=yes&productreviews=yes";"true"!=$("#islogin").val()&&c.Resize();"true"!=$("#islogin").val()?DH.request({url:"/product/turnForSignin.do?returnURL="+escape(b),type:"GET",dataType:"html",cache:!1,success:function(b){c.productReviewsSignContent.html(b);c.productReviewsSign.css({visibility:"hidden"});$("#productReviewsSignButton").click(function(){c.checkSigninForm()});
c.Close();c.Load.first="true"}}):($.ajax({url:"//dg.dhgate.com/reviewweb/savereviewhelp.do",data:{act:"saveHelpfulInfo",reviewid:d,ishelpful:f},cache:!1,type:"get",dataType:"jsonp",success:function(b){b=b?b.result:null;var c="",m=b[0];0==m?(c=1==f?h:e,0<b[1]&&$(".yes_result_"+d).html("(<b>"+b[1]+"</b>)"),0<b[2]&&$(".no_result_"+d).html("(<b>"+b[2]+"</b>)")):-1==m?c=g:-2==m?c=l:-3==m&&(c=h);$(".result_div_"+d).html(c)}}),$("#productReviewsMask").css({display:"none"}))},checkSigninForm:function(){var b=
$L("detail_valid_singninFormName"),c=$L("detail_valid_signinFormPassword"),d=$L("detail_valid_signinFormSecurityCode"),f=$("#username").val(),e=$("#password").val(),g="",l="";$("#code_input").is(":visible")&&(g=$("#checkcode").val());if(0==f.length)return $("#errorBox").html(b),!1;if(0==e.length)return $("#errorBox").html(c),!1;if($("#code_input").is(":visible")&&0==g.length)return $("#errorBox").html(d),!1;DH.request({type:"post",async:!1,url:"/product/favorite.do?act=signinAndAdd",data:"username="+
f+"&password="+e+"&checkcode="+g,success:function(b){b&&""!=b&&(l=b)}});if(""!=l)return $("#errorBox").html(l),$("#MzImgExpPwd")&&$("#MzImgExpPwd").attr("src","/verifycode.jsp?width=205&height=45&fontsize=42&charlength=4&temp="+(new Date).getTime().toString(36)),$("#code_img").show(),$("#code_input").show(),!1;setTimeout(function(){document.productreviewsigninForm.submit()},1)},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},
100)},SetPosition:function(){if("none"!=this.productReviewsSign.css("display")){var b,c,d,f,e,g,l;b=Math.min($(document).height(),$("body").outerHeight(!0));c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.productReviewsSign.children("table").height();f=this.productReviewsSign.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=
parseInt((e-d)/2));this.productReviewsSign.css({top:e,left:g,width:f,height:d});this.productReviewsMask.css({width:c,height:b,opacity:.5});this.productReviewsMaskIframe.css({width:c,height:b,opacity:0});"true"==this.Load.first&&this.productReviewsSign.css({visibility:"visible"})}},Close:function(){var b=this;$("."+this.productReviewsSigncClose).click(function(){b.productReviewsSignContent.html('<div class="popup-loading"></div>');b.productReviewsSign.css({display:"none"});b.productReviewsMask.css({display:"none"})})}};
var favoriteItemsPopup=function(b){this.SetOptions(b);document.getElementById(this.options.favoriteItemsButton)&&(this.favoriteItemsButton=$("#"+this.options.favoriteItemsButton),this.favoriteItemsInfo=$("#"+this.options.favoriteItemsInfo),this.favoriteItemsInfoContent=$("#"+this.options.favoriteItemsInfoContent),this.favoriteItemsInfoMask=$("#"+this.options.favoriteItemsInfoMask),this.favoriteItemsInfoMaskIframe=$("#"+this.options.favoriteItemsInfoMaskIframe),this.favoriteInner=this.options.favoriteInner,
this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init(),this.favoriteItemsInfoMask.css({"z-index":999}),this.favoriteItemsInfoMaskIframe.css({"z-index":998}))};
favoriteItemsPopup.prototype={SetOptions:function(b){this.options={favoriteItemsButton:"favoriteItemsButton",favoriteItemsInfo:"favoriteItemsInfo",favoriteItemsInfoContent:"favoriteItemsInfoContent",favoriteItemsInfoMask:"favoriteItemsInfoMask",favoriteItemsInfoMaskIframe:"favoriteItemsInfoMaskIframe",favoriteItemsSignButton:"favoriteItemsSignButton",favoriteInner:"wish-list-popup-inner",favoriteItemsClose:"favoriteItemsClose",favoriteFacebook:"favoriteFacebook",favoriteGoogle:"favoriteGoogle"};$.extend(this.options,
b||{})},Init:function(){this.Load()},Load:function(){var b=this;b.favoriteItemsButton.click(function(){b.favoriteItemsInfo.css({display:"block"});b.favoriteItemsInfoMask.css({display:"block"});b.GetUserStatus()?b.Favorite():b.SignIn();b.Resize()})},SignIn:function(){var b=this,c=location.hash;""!=c&&null!=c&&(c=c.substr(1));DH.request({url:$("#favorite-wrap").attr("init-src")+"&impressionInfo="+c,type:"GET",dataType:"html",cache:!1,success:function(c){b.favoriteItemsInfoContent.find("div").remove();
b.favoriteItemsInfoContent.append(c);b.favoriteItemsInfo.css({visibility:"hidden"});b.favoriteItemsSignButton=$("#"+b.options.favoriteItemsSignButton);b.favoriteItemsSignButton.click(function(){var b=$("#favorUsername").val(),c=$("#favorPassword").val(),d="";$("#codeInput").is(":visible")&&(d=$("#favorCheckcode").val());var l="";if(""==b)return $("#wish-list-sign-notice").show(),$("#wish-list-sign-notice").html($L("detail_valid_singninFormName")),!1;if(""==c)return $("#wish-list-sign-notice").show(),
$("#wish-list-sign-notice").html($L("detail_valid_signinFormPassword")),!1;if($("#codeInput").is(":visible")&&""==d)return $("#wish-list-sign-notice").show(),$("#wish-list-sign-notice").html($L("detail_valid_signinFormSecurityCode")),!1;DH.request({type:"post",async:!1,url:"/product/favorite.do?act=signinAndAdd",data:"username="+b+"&password="+c+"&checkcode="+d,success:function(b){b&&""!=b&&(l=b)}});if(""!=l)return $("#wish-list-sign-notice").show(),$("#wish-list-sign-notice").html(l),$("#favorMzImgExpPwd")&&
$("#favorMzImgExpPwd").attr("src","/verifycode.jsp?width=205&height=45&fontsize=42&charlength=4&temp="+(new Date).getTime().toString(36)),$("#codeImg").show(),$("#codeInput").show(),!1;-1==document.location.href.indexOf("actionOnload=addFavor")?0<document.location.href.indexOf("?")?$("#favorSigninReturnURL").val(document.location.href+"&actionOnload=addFavor"):$("#favorSigninReturnURL").val(document.location.href+"?actionOnload=addFavor"):$("#favorSigninReturnURL").val(document.location.href);$("#favorSigninReturnURL").val(document.location.href+
"?actionOnload=addFavor");$("#favorSigninForm").submit()});b.favoriteItemsClose=b.options.favoriteItemsClose;b.GetUserStatus();b.Close();b.favoriteFacebook=$("#"+b.options.favoriteFacebook);b.favoriteGoogle=$("#"+b.options.favoriteGoogle);b.favoriteFacebook.bind("click",function(){window.signIn&&signIn.paltformLogin("facebook",{onSuccess:function(b,c,d){b=location.href;b=b.replace(/\#.*/,"");b=b+(/\?/.test(b)?"&":"?")+"actionOnload=addFavor";location.href=b}});b.favoriteItemsInfo.css({display:"none"});
b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})});b.favoriteGoogle.bind("click",function(){window.signIn&&signIn.paltformLogin("google+",{onSuccess:function(b,c,d){b=location.href;b=b.replace(/\#.*/,"");b=b+(/\?/.test(b)?"&":"?")+"actionOnload=addFavor";location.href=b}});b.favoriteItemsInfo.css({display:"none"});b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})})}})},
GetUserStatus:function(){return"true"==$("#islogin").val()},Favorite:function(){"N"==this.favoriteCollection&&(this.favoriteInner.html(this.haveFavorite+this.recommedPro),this.favoriteCollection="y",delete this.noFavorite,delete this.haveFavorite,delete this.recommedPro);if("y"!=this.favoriteCollection){var b=this;DH.request({url:$("#favorite-wrap").attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.favoriteItemsInfoContent.html(c);b.favoriteItemsClose=b.options.favoriteItemsClose;
b.favoriteItemsInfo.css({visibility:"hidden"});b.Close();$("#favor-recommend-product").load($("#favoriteCommandInfo").attr("init-src"))}})}},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.favoriteItemsInfo.css("display")){var b,c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.favoriteItemsInfo.children("table").height();f=
this.favoriteItemsInfo.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.favoriteItemsInfo.css({top:e,left:g,width:f,height:d});this.favoriteItemsInfoMask.css({width:c,height:b,opacity:.5});this.favoriteItemsInfoMaskIframe.css({width:c,height:b,opacity:0});this.favoriteItemsInfo.css({visibility:"visible"})}},Close:function(){var b=
this;$("#"+this.favoriteItemsClose).click(function(){b.favoriteItemsInfo.css({display:"none"});b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})});$("#favorContinueShopping").click(function(){b.favoriteItemsInfo.css({display:"none"});b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})})}};
function firstBImageLoad(){firstBImageLoad.firstBImageTime&&clearTimeout(firstBImageLoad.firstBImageTime);window.firstBImageReady?new maskMagnifier({eventType:"hover"}):firstBImageLoad.firstBImageTime=setTimeout(firstBImageLoad,50)}var EmbedFeedBackLoad=function(b){this.SetOptions(b);document.getElementById(this.options.iframeFeedBack)&&(this.iframeFeedBack=$("#"+this.options.iframeFeedBack),this.feedBackControl=$("#"+this.options.feedBackControl),this.FBTimer2=this.FBTimer1=null,this.Init())};
EmbedFeedBackLoad.prototype={SetOptions:function(b){this.options={iframeFeedBack:"iframeFeedBack",feedBackControl:"feedBackControl"};$.extend(this.options,b||{})},Init:function(){this.Load()},Load:function(){var b=this;$(document).click(function(c){c=$(c.target);"yesfeedback"==c.attr("rel")&&(c.parent().addClass("current").siblings().removeClass("current"),b.showFeedBackInfo("yesfeedback"));"nofeedback"==c.attr("rel")&&(c.parent().addClass("current").siblings().removeClass("current"),b.showFeedBackInfo("nofeedback"))})},
showFeedBackInfo:function(b){var c=this;this.FBTimer1&&clearTimeout(this.FBTimer1);var d=this.iframeFeedBack.attr("init-src");d&&this.iframeFeedBack.removeAttr("init-src").attr("src",d);if((d=c.getFeedBackData())&&d.getElementById("question2109")){var f=d.getElementById("question2109").getElementsByTagName("label");if("yesfeedback"==b){var e=d.getElementById(f[0].getAttribute("for"));e||(e=d.getElementById(f[0].getAttribute("htmlFor")));e.click()}"nofeedback"==b&&((e=d.getElementById(f[1].getAttribute("for")))||
(e=d.getElementById(f[1].getAttribute("htmlFor"))),e.click());this.getFeedBackHeight()}else this.FBTimer1=setTimeout(function(){c.showFeedBackInfo(b)},500)},getFeedBackHeight:function(){var b=this;this.FBTimer2&&clearTimeout(this.FBTimer2);var c=b.getFeedBackData();$$height=$(c.body).height();this.iframeFeedBack.css({height:$$height});this.FBTimer2=setTimeout(function(){b.getFeedBackHeight()},500)},getFeedBackData:function(){try{return FBDocument=(document.frames?document.frames.iframeFeedBack:document.getElementById("iframeFeedBack").contentWindow).document}catch(b){}}};
function pageviewevent(){try{var b=location.hash,c="",d="",f="";if(""!=b&&null!=b)var b=b.substr(1),e=b.split("-"),f=e[0],c=e[1],d=e[2];_dhq.push(["setVar","pic",_itemcode]);_dhq.push(["setVar","clkloc",f]);_dhq.push(["setVar","pos",c]);_dhq.push(["setVar","type",d]);_dhq.push(["setVar","cid",_catelogID]);_dhq.push(["setVar","supplierid",_toid]);_dhq.push(["setVar","catepubid",_pro_catepubid]);_dhq.push(["event","Item_U0001"])}catch(g){}}
function initDetailedSellerRatings(){$("#loadSellerInformation").delegate("#detailedSellerRatings","mouseover",function(){$("#sellerinfoRatingspop").show()})}function initCloseSellerinfoRatingspop(){$("#loadSellerInformation").delegate("#detailedSellerRatings","mouseout",function(){$("#sellerinfoRatingspop").hide()})}
function initStLiClick(){$("#planchoosebox li").click(function(){0<=($(this).attr("class")||"").indexOf("this")?$(this).removeClass("this"):($("#oneYearSt").removeClass("this"),$("#twoYearSt").removeClass("this"),$(this).addClass("this"))})}
function initbuyStLiClick(){$("#buyplanchoosebox li").click(function(){0<=($(this).attr("class")||"").indexOf("this")?($(this).removeClass("this"),$("#buyStYesBtnSpan").removeClass("n-yellow-button"),$("#buyStYesBtnSpan").addClass("n-unclick-button"),$("#buyStYesBtn").attr("disabled",!0),$("#buyStYesBtn").unbind("click",buyStYesBtnClick)):($("#buyoneYearSt").removeClass("this"),$("#buytwoYearSt").removeClass("this"),$(this).addClass("this"),$("#buyStYesBtnSpan").removeClass("n-unclick-button"),$("#buyStYesBtnSpan").addClass("n-yellow-button"),
$("#buyStYesBtn").attr("disabled",!1),$("#buyStYesBtn").bind("click",buyStYesBtnClick))})}function stockIn(){}
function buyStYesBtnClick(){var b=$("#hiddenCountry").val();$("#shipCoutry").val(b);var b=$("#buyplanchoosebox .this"),c="";0<b.length&&(b=$(b[0]).attr("id"),c=$("#"+b+"AddCart").val());if(""!=c)for(b=c.split("&"),c=0;c<b.length;c++){var d=b[c].split("=");"stSkuId"==d[0]&&$("#stSkuId").val(d[1]);"stSkuMd5"==d[0]&&$("#stSkuMd5").val(d[1]);"stItemCode"==d[0]&&$("#stItemCode").val(d[1]);"stSupplierid"==d[0]&&$("#stSupplierid").val(d[1])}b=$("#selectedSkuVal").val();b=$("[vhidden="+b+"]");c="";0<b.length&&
(c=$(b[0]).attr("prominfooldprice"),c=""==c?$(b[0]).attr("price"):c,b=$("#radixUnit").val(),c/=b);$("#productToSTPrice").val(c);dhgateBtnTrackST("pdbn");document.productdisplayForm.submit()}function buyStNoBtnClick(){$("#stSkuId").val("");$("#stSkuMd5").val("");$("#stItemCode").val("");var b=$("#hiddenCountry").val();$("#shipCoutry").val(b);dhgateBtnTrackST("pdbn");document.productdisplayForm.submit()}
function dhgateBtnTrackST(b){_dhq=_dhq||[];_dhq.push(["setVar","itemcode",_itemcode]);_dhq.push(["setVar","cid",_pro_catalogid]);_dhq.push(["setVar","pid",_pid]);_dhq.push(["pageview",b])}var PRScaling=function(b){this.SetOptions(b);this.imgs=$(this.options.warp+" img");this.sSize=this.options.smallSize.split("|");this.bSize=this.options.bigSize.split("|");this.Init()};
PRScaling.prototype={SetOptions:function(b){this.options={warp:".picture-review",smallSize:"100|100",bigSize:"500|450"};$.extend(this.options,b||{})},Init:function(){this.Scaling()},Scaling:function(){for(var b=this,c,d,f=0;f<this.imgs.length;f++)(function(){var e=f,g=new Image;$(g).load(function(){c=b.AutoScalingIMG(this,b.sSize[0],b.sSize[1]);d=b.AutoScalingIMG(this,b.bSize[0],b.bSize[1]);b.imgs[e].width=c[0];b.imgs[e].height=c[1];b.imgs[e].style.visibility="visible";$(b.imgs[e]).attr({bigSize:d.join("|")});
g=new Image});g.src=b.imgs[e].src})()},AutoScalingIMG:function(b,c,d){var f,e;0<b.width&&0<b.height&&(b.width/b.height>=c/d?b.width>c?(f=c,e=b.height*c/b.width):(f=b.width,e=b.height):b.height>d?(e=d,f=b.width*d/b.height):(f=b.width,e=b.height));new Image;return[parseInt(f),parseInt(e)]}};var PRIMPopup=function(b){this.SetOptions(b);this.sSize=this.options.smallSize.split("|");this.bSize=this.options.bigSize.split("|");this.timer=null;this.isIE6=$.browser.msie&&"6.0"==$.browser.version;this.Init()};
PRIMPopup.prototype={SetOptions:function(){this.options={warp:".picture-review",productReviewMedia:"productReviewMedia",productReviewMediaContent:"productReviewMediaContent",productReviewMediaMask:"productReviewMediaMask",productReviewMediaMaskIframe:"productReviewMediaMaskIframe",reviewMediaBig:"reviewMediaBig",reviewMediaSmall:"reviewMediaSmall",smallSize:"100|100",bigSize:"500|450"}},Init:function(){document.getElementById(this.options.productReviewMedia)||$("body").append('<div id="productReviewMedia" style="display:none;"><table class="popup-frame"><tr><td class="tLt"></td><td class="tMid"></td><td class="tRi"></td></tr><tr><td class="mLt"></td><td id="productReviewMediaContent" class="mMid"><div class="popup-loading"></div></td><td class="mRi"></td></tr><tr><td class="bLt"></td><td class="bMid"></td><td class="bRi"></td></tr></table></div><div id="productReviewMediaMask" style="display:none;"><iframe id="productReviewMediaMaskIframe"></iframe></div>');
this.productReviewMedia=$("#"+this.options.productReviewMedia);this.productReviewMediaContent=$("#"+this.options.productReviewMediaContent);this.productReviewMediaMask=$("#"+this.options.productReviewMediaMask);this.productReviewMediaMaskIframe=$("#"+this.options.productReviewMediaMaskIframe);this.Open()},Open:function(){var b=this;$(document).click(function(c){var d=c.target;c=$(d);if("pictureplayer"==c.attr("rel")){for(var f=$(b.options.warp),e={},g=0;g<f.length;g++)if(parseInt($(f[g]).css("width"))&&
parseInt($(f[g]).css("height"))){e[g]=[];for(var l=$(f[g]).find("img"),h=0;h<l.length;h++)$(l[h]).attr({pindex:g}),e[g].push(l[h])}for(var m=h="",n,p,f=[],l=[],g=c.attr("pindex"),e=e[g],h=h+('<ul id="'+b.options.reviewMediaSmall+'">'),m=m+('<ul id="'+b.options.reviewMediaBig+'">'),g=0;g<e.length;g++)"visible"==$(e[g]).css("visibility")?(n=$(e[g]).attr("bigsize").split("|"),p=n[0],n=n[1],d!=e[g]?(m+='<li><span><img width="'+p+'" height="'+n+'" src="'+e[g].src+'"></span></li>',h+='<li><span><img cindex="'+
g+'" width="'+e[g].width+'" height="'+e[g].height+'" rel="prSwitching" src="'+e[g].src+'"></span></li>'):(m+='<li style="z-index:2;"><span><img width="'+p+'" height="'+n+'" src="'+e[g].src+'" bigsize="250|250"></span></li>',h+='<li class="current"><span><img cindex="'+g+'" width="'+e[g].width+'" height="'+e[g].height+'" rel="prSwitching" src="'+e[g].src+'"></span></li>',b.cIndex=g)):"hidden"==$(e[g]).css("visibility")&&(m+="<li><span></span></li>",h+="<li><span></span></li>",f.push(e[g]),l.push(g));
d='<div class="mMid-inner"><div class="product-review-picture-inner"><div class="reviewMediaStage">'+(m+"</ul>")+(h+"</ul>")+'<span id="productReviewMediaClose" rel="close"></span></div></div></div>';gtag("event","customer reviews",{event_category:"Seller store",event_label:"pic"});b.Insert(d);b.Control();f.length&&b.Scaling(f,l)}"videoplayer"==c.attr("rel")&&(d='<div class="mMid-inner"><div class="product-review-video-inner"><iframe width="600" height="480" src="'+c.attr("init-src")+'" frameborder="0" allowfullscreen></iframe><span id="productReviewMediaClose" rel="close"></span></div></div>',
gtag("event","customer reviews",{event_category:"Seller store",event_label:"video"}),b.Insert(d),b.Control())})},Insert:function(b){this.productReviewMedia.css({display:"block"});this.productReviewMediaMask.css({display:"block"});this.productReviewMedia.find("div").remove();this.productReviewMediaContent.html(b);this.productReviewMedia.css({visibility:"hidden"});this.reviewMediaBigList=$("#"+this.options.reviewMediaBig+" li");this.reviewMediaSmallList=$("#"+this.options.reviewMediaSmall+" li");this.Open.first=
"true";this.Resize()},Control:function(){var b=this;b.Control.flag||this.productReviewMedia.click(function(c){c.stopPropagation();c=c.target;var d=$(c);switch(!0){case "SPAN"==c.nodeName&&"close"==d.attr("rel"):b.productReviewMedia.css({display:"none"});b.productReviewMediaMask.css({display:"none"});b.productReviewMediaContent.html('<div class="popup-loading"></div>');break;case "IMG"==c.nodeName&&"prSwitching"==d.attr("rel"):c=d.attr("cindex");if(c==b.cIndex)return;$(b.reviewMediaBigList[b.cIndex]).css({"z-index":1});
$(b.reviewMediaSmallList[b.cIndex]).removeClass("current");$(b.reviewMediaBigList[c]).css({"z-index":2});$(b.reviewMediaSmallList[c]).addClass("current");b.cIndex=c}b.Control.flag=!0})},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.productReviewMedia.css("display")){var b,c,d,f,e,g,l;b=Math.min($(document).height(),$("body").outerHeight(!0));c=Math.min($(document).width(),
$("body").outerWidth(!0));d=this.productReviewMedia.children("table").height();f=this.productReviewMedia.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.productReviewMedia.css({top:e,left:g,width:f,height:d});this.productReviewMediaMask.css({width:c,height:b,opacity:.5});this.productReviewMediaMaskIframe.css({width:c,
height:b,opacity:0});"true"==this.Open.first&&this.productReviewMedia.css({visibility:"visible"})}},Scaling:function(b,c){for(var d=this,f,e,g=0;g<b.length;g++)(function(){var l=g,h=new Image;$(h).load(function(){f=d.AutoScalingIMG(this,d.sSize[0],d.sSize[1]);e=d.AutoScalingIMG(this,d.bSize[0],d.bSize[1]);$(d.reviewMediaBigList[c[l]]).html('<span><img width="'+e[0]+'" height="'+e[1]+'" src="'+this.src+'"></span>');$(d.reviewMediaSmallList[c[l]]).html('<span><img cindex="'+c[l]+'" width="'+f[0]+'" height="'+
f[1]+'" rel="prSwitching" src="'+this.src+'"></span>');h=new Image});h.src=b[l].src})()},AutoScalingIMG:function(b,c,d){var f,e;0<b.width&&0<b.height&&(b.width/b.height>=c/d?b.width>c?(f=c,e=b.height*c/b.width):(f=b.width,e=b.height):b.height>d?(e=d,f=b.width*d/b.height):(f=b.width,e=b.height));new Image;return[parseInt(f),parseInt(e)]}};
function officialReviewInfo(){for(var b=$(".official-review-warp"),c=0;c<b.length;c++)$(b[c]).mouseenter(function(){$(this).children(".official-review-content").css({display:"block"})}).mouseleave(function(){$(this).children(".official-review-content").css({display:"none"})})}
var storeInfoHoverToggle=function(b){this.SetOption(b);this.storeInfo=$("#"+this.options.storeInfo);this.dhimtop=$("#"+this.options.dhimtop);this.submitMsg=$("#"+this.options.submitMsg);this.freeinfowrap=$("."+this.options.freeinfowrap);this.infoexpand=this.options.infoexpand;this.timeWrap=$("#"+this.options.timeWrap);this.feedbackstyle=$("."+this.options.feedbackstyle);this.feedbackwrap=$("."+this.options.feedbackwrap);this.bestservice=$("#"+this.options.bestservice);this.HoverContent()};
storeInfoHoverToggle.prototype={SetOption:function(b){this.options={storeInfo:"storeInfoMain",dhimtop:"dhimtop",submitMsg:"submitMsg",infoexpand:"infoexpand",timeWrap:"timeWrap",freeinfowrap:"freeinfowrap",feedbackwrap:"feedback-info",feedbackstyle:"feedback-info li a",bestservice:"bestService"};$.extend(this.options||b,{})},HoverContent:function(){var b=this;this.storeInfo.mouseenter(function(){b.timer&&clearTimeout(b.timer);$(this).addClass(b.infoexpand)}).mouseleave(function(){b.timer=setTimeout(function(){b.storeInfo.removeClass(b.infoexpand)},
200)})}};
function topshare(){var b=$("#TopShare"),c=$("#TopShareCon");b.mouseenter(function(){topshare.timer&&clearTimeout(topshare.timer);b.addClass("topsharehover");c.css({display:"block"})}).mouseleave(function(){topshare.timer=setTimeout(function(){b.removeClass("topsharehover");c.css({display:"none"})},300)});c.mouseenter(function(){topshare.timer&&clearTimeout(topshare.timer)}).mouseleave(function(){topshare.timer=setTimeout(function(){b.removeClass("topsharehover");c.css({display:"none"})},50)})}
function TabSubcategory(){$("#tabsTitle");for(var b=$("#tabsTitle span"),c=$(".tabs-main"),d=0,f=b.length;d<f;d++)$(b[d])[0].index=d,$(b[d]).mouseenter(function(){for(var e=0;e<d;e++)e==this.index?($(b[this.index]).addClass("current"),$(c[this.index]).css({display:"block"})):($(b[e]).removeClass("current"),$(c[e]).css({display:"none"}))})}
function contentMore(b,c){var d=$("#"+b),f=$("#"+c);d.click(function(){$(this).hasClass("toggleClass")?($(this).removeClass("toggleClass"),$(this).find("span").eq(0).html("More"),f.css({display:"none"})):($(this).addClass("toggleClass"),$(this).find("span").eq(0).html("Less"),f.css({display:"block"}))})}
function toggleCatelist(){var b=$("#CatelistWrap dt");$("#CatelistWrap dd");for(var c=0;c<b.length;c++)$(b[c])[0].index=c,$(b[c]).click(function(){$(b).attr("class","");$(b).siblings().css({display:"none"});$(b[this.index]).attr("class","current");$(b[this.index]).siblings().css({display:"block"})})}
var LazyLoad=function(b){this.SetOptions(b);this.container=$("#"+this.options.container);this.childs=$(this.options.childs);this.data=[];this.proheight=$(this.options.proheight);this.oldScroll=this.options.oldScroll;this.newScroll=this.options.newScroll;this.ImgWidth=this.options.ImgWidth;this.ImgHeight=this.options.ImgHeight;this.isZoom=this.options.isZoom;this.Initialize();this.ScrollLoad();this.ResizeLoad()};
LazyLoad.prototype={SetOptions:function(b){this.options={container:null,childs:null,proheight:null,oldScroll:0,newScroll:0,isZoom:!1,ImgWidth:160,ImgHeight:160};$.extend(this.options,b||{})},Initialize:function(){this.isZoom&&this.CreateImage();this.Mheight=this.container.height()+this.container.offset().top;for(var b=0;b<this.childs.length;b++)this.data.push($(this.childs[b]).offset().top);this.RunLoad()},CreateImage:function(){this.image=[];this.image_src=[];for(var b=0;b<this.childs.length;b++)this.image_src.push($(this.childs[b]).attr("lazyload-src")),
this.image.push(new Image)},LoadImage:function(b){var c=this;(function(){$(c.image[b]).load(function(){0!=c.image[b].width&&0!=c.image[b].height&&(c.AutoScaling(c.image[b],b),c.image[b]=new Image)});c.image[b].src=c.image_src[b]})()},AutoScaling:function(b,c){var d=$(this.options.childs+" > img");0<b.width&&0<b.height&&(b.width/b.height>=this.ImgWidth/this.ImgHeight?b.width>this.ImgWidth?($(d[c]).width(this.ImgWidth),$(d[c]).height(b.height*this.ImgWidth/b.width)):($(d[c]).width(b.width),$(d[c]).height(b.height)):
b.height>this.ImgHeight?($(d[c]).height(this.ImgHeight),$(d[c]).width(b.width*this.ImgHeight/b.height)):($(d[c]).width(b.width),$(d[c]).height(b.height)));new Image},Before:function(){return $(window).height()+$(window).scrollTop()},Compare:function(b){return this.Before()-b},RunLoad:function(){var b,c=$(this.proheight[0]).outerHeight();"proList"==this.options.container&&(c=2*$(this.proheight[0]).outerHeight());this.oldScroll=$(window).scrollTop();for(var d=0;d<this.data.length;d++)b=this.Compare(this.data[d]),
b>-c&&$(this.childs[d]).attr("lazyload-src")&&($(this.childs[d]).append("<img src="+this.image_src[d]+" />"),$(this.childs[d]).removeAttr("lazyload-src"),this.isZoom&&this.LoadImage(d))},ScrollLoad:function(){var b=this;$(window).bind("scroll."+b.options.container,function(){b.newScroll=$(window).scrollTop();b.StopLoad();0>b.newScroll-b.oldScroll||b.RunLoad()})},ResizeLoad:function(){var b=this;$(window).bind("resize."+b.options.container,function(){b.RunLoad()})},StopLoad:function(){this.Before()>
this.Mheight&&($(window).unbind("scroll."+this.options.container),$(window).unbind("resize."+this.options.container))}};function toggleCategories(){var b=$("#moreLink"),c=$("#moreMultidimensioncate");b.click(function(){"none"==c.css("display")?($(this).attr("class","moreactive"),$(this).html($L("common_fewer")),c.show()):"block"==c.css("display")&&($(this).attr("class","morebtn"),$(this).html($L("common_more")),c.hide())})}var countDownInterface=function(){this.getServerTime()};
countDownInterface.prototype.getServerTime=function(){var b=this;DH.request({url:"/common/buyertime.do",type:"GET",dataType:"jsonp",cache:!1,success:function(c){b.serverTime=1*c.time}})};
countDownInterface.prototype.setRemainingTime=function(b,c,d){for(var f,e,g,l=0,h=c.length;l<h;l++)_related=c[l],$related=$(c[l]),f=$related.attr(d).split("|"),e=(new Date(f[1])).getTime(),g=(new Date(f[2])).getTime(),_related.discount=f[0],_related.dname=f[3],b<g?_related.active=Math.floor((g-b)/1E3):b<e?_related.ready=Math.floor((e-b)/1E3):b>g&&(_related.end=!0)};var DH_CountDownInterface=new countDownInterface;
function salesPromotionCountDown(b,c){salesPromotionCountDown.timer&&clearTimeout(salesPromotionCountDown.timer);var d,f;if(d=DH_CountDownInterface.serverTime){f=$(b+"["+c+"]");if(!f[0])return;DH_CountDownInterface.setRemainingTime(d,f,c);d=0;for(var e=f.length;d<e;d++)salesPromotionCountDown.run(f[d]);salesPromotionCountDown.sum=0;salesPromotionCountDown.checkTime();if(DH_CountDownInterface.serverTime){delete DH_CountDownInterface.serverTime;return}}salesPromotionCountDown.timer=setTimeout(function(){salesPromotionCountDown(b,
c)},300)}salesPromotionCountDown.run=function(b){b.discount=b.discount;b.active&&(b.curTimeout=salesPromotionCountDown.createSingleTimeout(b),b.curTimeout())};
salesPromotionCountDown.createSingleTimeout=function(b){return function(){b.timer&&clearTimeout(b.timer);var c=$(b),d,f,e;d=Math.floor(b.active/86400);f=Math.floor(b.active/3600)%24;e=Math.floor(b.active/60)%60;if(1<parseInt(d,10))d="<span>"+d+" days </span>left!";else if(0<parseInt(f,10)||0<parseInt(e,10))d="<span>"+f+" hours "+e+" mins</span> left!";else return;b.active--;b.dname?c.html('<span class="discountnum"><span>$'+b.discount+'</span> OFF,</span><span class="discountime">'+d+"</span>"):c.html('<span class="discountnum"><span>'+
b.discount+'% </span> OFF,</span><span class="discountime">'+d+"</span>");b.timer=setTimeout(function(){b.curTimeout()},1E3)}};salesPromotionCountDown.checkTime=function(){180==salesPromotionCountDown.sum&&(DH_CountDownInterface.getServerTime(),salesPromotionCountDown("span","discountCountDown"));salesPromotionCountDown.time1&&clearTimeout(salesPromotionCountDown.time1);salesPromotionCountDown.time1=setTimeout(function(){salesPromotionCountDown.sum++;salesPromotionCountDown.checkTime()},1E3)};
var IcoHoverOut=function(b){this.SetOptions(b);this.hoverIco=this.options.hoverIco;this.hoverContent=this.options.hoverContent;this.closeIco=this.options.closeIco;this.Init()};
IcoHoverOut.prototype={SetOptions:function(b){this.options={hoverIco:["playNoteLink"],hoverContent:["playNoteInfo"],closeIco:["playNoteClose"]};$.extend(this.options,b||{})},Init:function(){this.timer={};this.hovi={};this.hcon={};this.closei={};for(var b=0;b<this.hoverIco.length;b++)document.getElementById(this.hoverIco[b])&&(this.timer[b]={},this.hovi[b]=$("#"+this.hoverIco[b]),this.hcon[b]=$("#"+this.hoverContent[b]),this.closei[b]=$("#"+this.closeIco[b]));this.Active()},Active:function(){var b=
this,c;for(c in this.hovi)this.hovi[c][0].guid=c,this.hcon[c][0].guid=c,this.closei[c][0].guid=c,this.hovi[c].mouseenter(function(){var c=$(this);b.timer[this.guid]&&clearTimeout(b.timer[this.guid]);b.hcon[this.guid].css({display:"block",left:c.offset().left+2*c.width()-b.hcon[this.guid].width(),top:c.offset().top+c.height()+3})}).mouseleave(function(){var c=this;$(this);b.timer[this.guid]=setTimeout(function(){b.hcon[c.guid].css({display:"none"})},50)}),this.hcon[c].mouseenter(function(){b.timer[this.guid]&&
clearTimeout(b.timer[this.guid])}).mouseleave(function(){var c=this;b.timer[this.guid]=setTimeout(function(){b.hcon[c.guid].css({display:"none"})},50)}),this.closei[c].click(function(){b.hcon[this.guid].css({display:"none"})})}};
(function(b){b.fn.scrollLoading=function(c){var d=b.extend({},{attr:"data-url"},c||{});d.cache=[];b(this).each(function(){var c=this.nodeName.toLowerCase(),e=b(this).attr(d.attr);e&&(c={obj:b(this),tag:c,url:e},d.cache.push(c))});c=function(){var c=b(window).scrollTop(),e=c+b(window).height();b.each(d.cache,function(d,f){var h=f.obj,g=f.url;h&&(post=h.position().top,posb=post+h.height(),post>c&&post<e||posb>c&&posb<e)&&("en"!=DH.lang&&(g=g.replace("txt.dhstatics.com",location.hostname||"www.dhgate.com")),
DH.request({url:g,type:"GET",dataType:"html",cache:!1,success:function(c){b("#specificationInfo").html(c)},error:function(){DH.request({url:g.replace("txt.dhstatics.com",location.hostname||"www.dhgate.com"),type:"GET",dataType:"html",cache:!1,success:function(c){b("#specificationInfo").html(c)}})}}),f.obj=null)});return!1};c();b(window).bind("scroll",c)}})(jQuery);
var GetCouponPopup=function(b){this.SetOptions(b);document.getElementById(this.options.getcouponButton)&&(this.getcouponWrap=$("#"+this.options.getcouponWrap),this.getcouponButton=$("#"+this.options.getcouponButton),this.getCouponInfo=$("#"+this.options.getCouponInfo),this.getCouponInfoContent=$("#"+this.options.getCouponInfoContent),this.getCouponInfoMask=$("#"+this.options.getCouponInfoMask),this.getCouponInfoMaskIframe=$("#"+this.options.getCouponInfoMaskIframe),this.getcouponClose=$("#"+this.options.getcouponClose),
this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};
GetCouponPopup.prototype={SetOptions:function(b){this.options={getcouponWrap:"getcouponWrap",getcouponButton:"getcouponButton",getCouponInfo:"getCouponInfo",getCouponInfoContent:"getCouponInfoContent",getCouponInfoMask:"getCouponInfoMask",getCouponInfoMaskIframe:"getCouponInfoMaskIframe",getcouponSignButton:"getcouponSignButton",getcouponClose:"getcouponClose",getcouponSignPopClose:"getcouponSignPopClose",getCouponURL:"//www.dhgate.com/product/bindCouponWithBuyer.do",getCouponAgain:"getCouponAgain",
getCouponBox:"js-getcouponwrap"};$.extend(this.options,b||{})},Init:function(){this.Load()},Load:function(){function b(){c.getCouponInfo.css({display:"block"});c.getCouponInfoMask.css({display:"block"});c.CouponDo();c.Resize()}var c=this;$("#"+c.options.getCouponAgain).live("click",b);this.getcouponButton.live("click",b);(function(){var b=$("."+c.options.getCouponBox+":hidden");0<b.length&&(b.css({display:"block",height:"0px"}),b.animate({height:"72px"},800))})()},getVerifycode:function(){$("#MzImgExpPwd")&&
$("#MzImgExpPwd").attr("src","/verifycode.jsp?width=205&height=45&fontsize=42&charlength=4&temp="+(new Date).getTime().toString(36));$("#codeImg").show();$("#codeInput").show()},SignIn:function(){var b=this;DH.request({url:b.getcouponWrap.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.getCouponInfoContent.find("div").remove();b.getCouponInfoContent.append(c);b.getCouponInfo.css({visibility:"hidden"});b.getcouponSignButton=$("#"+b.options.getcouponSignButton);b.getcouponSignButton.click(function(){var c=
$("#Usernameinput").val(),f=$("#favorPassword").val(),e="";$("#codeInput").is(":visible")&&(e=$("#Checkcodeinput").val());if(""==c)return $("#SignNotice").html($L("detail_valid_singninFormName")),!1;if(""==f)return $("#SignNotice").html($L("detail_valid_signinFormPassword")),!1;if($("#codeInput").is(":visible")&&""==e)return $("#SignNotice").html($L("detail_valid_signinFormSecurityCode")),!1;b.CouponDo({username:c,password:f,checkcode:e,coupon:"get"},1)});b.getcouponSignPopClose=b.options.getcouponSignPopClose;
b.ClosePop()}})},GetUserStatus:function(){return"true"==$("#islogin").val()?1:0},CouponDo:function(b){function c(b){b.addClass("cannotgetcouponwrap");b.find(".getcoupon-inner").html($L("detail_msg_couponNO",{tryAgain:'<a rel="nofollow" id="getCouponAgain" href="javascript:;">'+$L("common_tryAgain")+"</a>"}))}function d(){f.getCouponInfo.css({display:"none"});f.getCouponInfoMask.css({display:"none"})}var f=this,e=$("#"+f.options.getcouponWrap),g={coupon:"get"},g=b||{};DH.request({url:this.options.getCouponURL,
type:"GET",data:g,dataType:"json",cache:!1,success:function(b){switch(parseInt(b.code)){case 200:f.isSignIn=!0;e.addClass("alreadygetcouponwrap").removeClass("cannotgetcouponwrap");e.find(".getcoupon-inner").html($L("detail_msg_couponOK",{dollar:b.dollar,checkCoupon:"Check Coupons"}));d();break;case 201:f.isSignIn=!1;f.SignIn();b=window.location.href.split("/");var h=b[b.length-1].split(".")[0],g=b[b.length-2],n="0";"store"==b[3]&&(n="1");window.location.href="https://secure.dhgate.com/usr/signin.do?returnURL=//www.dhgate.com/product/bindCouponWithBuyer.do?itemcode_p="+
h+"dhgate"+g+"dhgate"+n;break;case 202:f.isSignIn=!1;$("#SignNotice").html($L("detail_valid_signinFormSecurityCode"));f.getVerifycode();break;case 203:f.isSignIn=!1;$("#SignNotice").html($L("detail_msg_signinError"));break;default:f.isSignIn=!0,c(e),d()}},error:function(){c(e);d()}})},CloseCoupon:function(){},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.getCouponInfo.css("display")){var b,
c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.getCouponInfo.children("table").height();f=this.getCouponInfo.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.getCouponInfo.css({top:e,left:g,width:f,height:d});this.getCouponInfoMask.css({width:c,height:b,opacity:.5});
this.getCouponInfoMaskIframe.css({width:c,height:b,opacity:0});this.getCouponInfo.css({visibility:"visible"})}},ClosePop:function(){var b=this;$("#"+this.getcouponSignPopClose).click(function(){b.getCouponInfo.css({display:"none"});b.getCouponInfoMask.css({display:"none"});b.getCouponInfoContent.find("div").remove()})}};
(function(b){var c=function(c){this.options=b.extend({serverTime:0,endTime:0,type:"weekend",formatDay:!0},c||{});this.init()};c.prototype={init:function(){this.getServerTime(this.getStartTime)},getServerTime:function(b){var c=this;DH.request({url:"//www.dhgate.com/common/buyertime.do",dataType:"jsonp",success:function(e){c.options.serverTime=parseInt(e.time);"function"===typeof b?b.call(c):""}})},getEndTime:function(){if("daily"===this.options.type)this.setEndTime();else{var b=parseInt(this.options.endTime);
(0>=b||isNaN(b))&&this.setEndTime()}},setEndTime:function(){var b;b=new Date(this.options.serverTime);b=[b.getFullYear(),b.getMonth()+1,b.getDate()].join("/")+" 23:59:59";this.options.endTime=+new Date(b)},getStartTime:function(){var b=1,c=this;c.getEndTime();this._interval=setInterval(function(){1800<=b&&(b=1,c.getServerTime());b++;c.getTimeData();"function"===typeof c.options.returnData&&c.options.returnData(c.data)},1E3)},clearTime:function(){clearInterval(this._interval)},getDifferTime:function(){return(parseInt(this.options.endTime)-
this.options.serverTime)/1E3},getTimeData:function(){var b={},c=this.getDifferTime();1<=c?(this.options.formatDay&&(b.day=parseInt(c/86400),c%=86400),b.hour=parseInt(c/3600),c%=3600,b.minute=parseInt(c/60),b.seconds=parseInt(c%60),10>b.day&&(b.day="0"+b.day),10>b.hour&&(b.hour="0"+b.hour),10>b.minute&&(b.minute="0"+b.minute),10>b.seconds&&(b.seconds="0"+b.seconds),this.options.serverTime+=1E3,this.data=b):this.data={day:"00",hour:"00",minute:"00",seconds:"00"}}};b(document).ready(function(){var d=
b("#dh-discountTime"),f=+new Date(d.data("endtime"));0<d.length&&(window.DownTime=new c({endTime:f,type:"weekend",formatDay:!1,returnData:function(b){d.find("span.dh-time").html(b.hour+"h&nbsp;"+b.minute+"m&nbsp;"+b.seconds+"s").andSelf().show()}}))});window.getCountdownTime=c})(jQuery);
function getStProdFun(b){$("#stProductDiv").hide();if("1"==$("#isCallStProd").val()){var c=$("#hiddenCountry").val();if("US"==c||"us"==c){c=$("#twocatePubCateId").val();$("#selectedSkuVal").val();var d=$(".js-wholesale-list li");if(0>=d.length)return!1;b=b||d.eq(0).attr("price")||0;d=$("#radixUnit").val();DH.request({type:"post",async:!1,cache:!1,dataType:"json",url:"/product/getstprodinfo.do",data:"twoCatePubId="+c+"&price="+b/d,success:function(b){try{0<b.productDTOs.length&&2==b.productDTOs.length&&
($("#stProductDiv").show(),$("#oneYearStPrice").html(" US $"+b.productDTOs[0].productSaleSettingDTO.minBuyerPrice),$("#oneYearStName").html("1 Year for"),$("#oneYearStAddCart").val("stSkuId="+b.productDTOs[0].productSkuList[0].skuId+"&stSkuMd5="+b.productDTOs[0].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[0].itemcode),$("#twoYearStPrice").html(" US $"+b.productDTOs[1].productSaleSettingDTO.minBuyerPrice),$("#twoYearStName").html("2 Years for"),$("#twoYearStAddCart").val("stSkuId="+b.productDTOs[1].productSkuList[0].skuId+
"&stSkuMd5="+b.productDTOs[1].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[1].itemcode),$("#buyoneYearStPrice").html(" US $"+b.productDTOs[0].productSaleSettingDTO.minBuyerPrice),$("#buyoneYearStName").html("1 Year for"),$("#buyoneYearStAddCart").val("stSkuId="+b.productDTOs[0].productSkuList[0].skuId+"&stSkuMd5="+b.productDTOs[0].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[0].itemcode),$("#buytwoYearStPrice").html(" US $"+b.productDTOs[1].productSaleSettingDTO.minBuyerPrice),$("#buytwoYearStName").html("2 Years for"),
$("#buytwoYearStAddCart").val("stSkuId="+b.productDTOs[1].productSkuList[0].skuId+"&stSkuMd5="+b.productDTOs[1].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[1].itemcode))}catch(e){window.console&&console.log("%c SquareTrade interface Error: productDTOs is undefined","font-size:26px"),window.console&&console.log("%c "+e,"color:red;font-size:26px")}}})}}}
var buySt=function(b){this.SetOptions(b);document.getElementById(this.options.buyStButton)&&(this.buyStButton=$("#"+this.options.buyStButton),this.buySt=$("#"+this.options.buySt),this.buyStContent=$("#"+this.options.buyStContent),this.buyStMask=$("#"+this.options.buyStMask),this.buyStMaskIframe=$("#"+this.options.buyStMaskIframe),this.buyStNoBtn=this.options.buyStNoBtn,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};
buySt.prototype={SetOptions:function(b){this.options={buyStButton:"buyItNow",buySt:"buyerstdiv",buyStMask:"ShippingCostMask",buyStMaskIframe:"ShippingCostMaskIframe",buyStNoBtn:"buyStNoBtn",isDisplay:!0};$.extend(this.options,b||{})},Init:function(){this.options.isDisplay?(this.buySt.css({display:"block"}),this.buyStMask.css({display:"block"}),this.Resize(),$("#buyStNoBtn").bind("click",buyStNoBtnClick)):buyStNoBtnClick()},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();
this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.buySt.css("display")){var b,c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.buySt.height();f=this.buySt.width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.buySt.css({top:e,left:g,width:f,height:d});
this.buyStMask.css({width:c,height:b,opacity:.5});this.buyStMaskIframe.css({width:c,height:b,opacity:0})}},ClickBuySt:function(){$("#"+this.buyStNoBtn).click(function(){buyStYesBtnClick()})},Close:function(){$("#"+this.buyStNoBtn).click(function(){buyStNoBtnClick()})}};
function getPriceRange(){window.priceRange={};var b=1==$("#isvipprod").val()?!0:!1,c=$("#selectedSkuVal").val(),c=$(".js-wholesale-wrap[data-sku="+c+"]"),c=$(".js-wholesale-list li.current",c);$.each(c,function(c,f){var e=$(f).attr("nums");window.priceRange[e]=b?$(f).attr("vipprice"):$(f).attr("price")})}
(function(b){b.fn.extend({myPlaceholder:function(){if(!("placeholder"in document.createElement("input")))return this.each(function(){var c=b(this),d=c.attr("placeholder"),f=b("<span>");f.attr("class","placeholder");f.text(d);c.before(f);c.val()&&f.addClass("placeholder-hide");f.bind("focus",function(){f.addClass("placeholder-hide");c.focus()});c.bind("focus",function(){f.addClass("placeholder-hide")}).bind("blur",function(){c.val().length||f.removeClass("placeholder-hide")})})}})})(jQuery);
$(function(){$("#js-topBanner").length&&new CheckTopBanner("#js-topBanner");(function(){var b=function(){1280>window.screen.width||1259>$(window).width()?$(".col-left-inner").addClass("lowscreen"):$(".col-left-inner").removeClass("lowscreen")};b();$(window).resize(function(){b()})})()});
function changeLotToPiecesPrice(b){var c=$.trim($(".purchase-quantity-lot").html());if("Lot"==c||"Lots"==c){var c=$("#plural").val(),d=$("#radixUnit").val();""!=c&&("Square Feet"!=c&&(c=c.substr(0,c.length-1)),"undefined"!=typeof b&&""!=b&&(b=(parseFloat(b)/d).toFixed(2),""!=b&&(b="( US $"+b+" / "+c+" )",$(".new-lot-show-pieces").eq(0).html(b))))}}
$(function(){var b=function(b){this.SetOptions(b);this.wrapper=$("#"+this.options.wrapper);this.commonCpBoxWarp=$("#"+this.options.commonCpBoxWarp);this.commonCpBox=$("#"+this.options.commonCpBox);this.itemWidth=this.options.itemWidth;this.nextButton=$("#"+this.options.nextButton);this.backButton=$("#"+this.options.backButton);this.pageNum=$("#"+this.options.pageNum);this.pageTotal=$("#"+this.options.pageTotal);this.showFirst=$("#"+this.options.showFirst);this.dataList=this.options.dataList;this.timer1=
this.timer=null;this.Init()};b.prototype={SetOptions:function(b){this.options={wrapper:"otherItemsWarp",nextButton:"js-nextButton",backButton:"js-prevButton",commonCpBoxWarp:"js-commonCpBoxWarp",commonCpBox:"js-commonCpBox",commonCpList:"js-commonCpBox > li",itemWidth:193,pageNum:"js-pageNum",pageTotal:"js-pageTotal",showFirst:"js-showFirst",dataList:b.dataList}},Init:function(){this.Load()},Load:function(){if(this.dataList&&0!=this.dataList.length){var b=this.dataList;this.wrapper.show();for(var d=
0;d<b.length;d++)if(b[d]){var f="//www.dhgate.com/store/product/"+b[d].url+"/"+b[d].itemcode+".html",f=["<li>",'<div class="common-cp-img"><a title="'+b[d].productname+'" href="'+f+'.html"><img src="'+b[d].imageurl+'" alt="'+b[d].productname+'"/></a></div>','<div class="common-cp-title"><a title="'+b[d].productname+'" href="'+f+'">'+b[d].productname+"</a></div>",'<div class="common-cp-price"><strong>'+b[d].unitprice+"</strong></div>","</li>"].join("");this.commonCpBoxWarp.data("cache"+d,f)}this.dataLength=
b.length-1;this.visualSum=Math.floor(this.commonCpBoxWarp.width()/this.itemWidth);this.cPage=1;this.sPage=Math.ceil(this.dataLength/this.visualSum);this.pageNum.html(this.cPage);this.pageTotal.html(this.sPage);this.commonCpBox.html("");for(b=0;b<this.visualSum;b++)this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+b));this.Monitor();this.Page()}else this.wrapper.hide()},Monitor:function(){var b=this;this.visualWidth=this.commonCpBoxWarp.width();this.visualWidth!=this.Monitor._visualWidth&&
this.Monitor._visualSum&&(this.commonCpList=$("#"+this.options.commonCpList),this.visualSum=Math.floor(this.visualWidth/this.itemWidth),this.sPage=Math.ceil(this.dataLength/this.visualSum),this.cPage=Math.ceil((this.Monitor._visualSum*this.Monitor._cPage-(this.Monitor._visualSum-1))/this.visualSum),this.pageNum.html(this.cPage),this.pageTotal.html(this.sPage),this.DisplayChange(this.visualSum,this.Monitor._visualSum,this.cPage),this.showFirstPro());this.Monitor._visualWidth=this.visualWidth;this.Monitor._visualSum=
this.visualSum;this.Monitor._cPage=this.cPage;this.timer=setTimeout(function(){b.Monitor()},50)},DisplayChange:function(b,d,f){if(b<d)for(;b<d;b++)this.commonCpList[b]&&$(this.commonCpList[b]).remove();else for(this.commonCpBox.html(""),d=b*f,b=b*f-b;b<d;b++)this.commonCpBoxWarp.data("cache"+b)&&this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+b))},Page:function(){var b=this;this.nextButton.click(function(){b.cPage++;b.cPage>b.sPage&&(b.cPage=1);b.Add("right");b.pageNum.html(b.cPage);b.showFirstPro()});
this.backButton.click(function(){b.cPage--;0>=b.cPage&&(b.cPage=b.sPage);b.Add("left");b.pageNum.html(b.cPage);b.showFirstPro()})},showFirstPro:function(){var b=this;1==this.cPage?b.showFirst.html(""):this.showFirst.html('( <a href="javascript:void(0)">Start over</a> )');this.showFirst.click(function(){b.cPage=1;b.commonCpBox.html("");for(var c=0;c<b.visualSum;c++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+c));b.showFirst.html("");b.pageNum.html(b.cPage)})},Add:function(b){var c=this;if("true"!=
this.Add.flag)switch(this.commonCpList=$("#"+this.options.commonCpList),b&&(this.Add.direction=b),this.Add.direction){case "left":this.Add.sVar=this.visualSum*this.cPage-this.visualSum;this.Add.eVar=this.visualSum*this.cPage;this.Add.i=0;break;case "right":this.Add.sVar=this.visualSum*this.cPage-1,this.Add.eVar=this.visualSum*this.cPage-this.visualSum,this.Add.i=this.visualSum-1}this.timer1&&clearTimeout(this.timer1);switch(this.Add.direction){case "left":if(this.Add.i>this.visualSum||this.Add.sVar>=
this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).before(this.commonCpBoxWarp.data("cache"+this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)));break;case "right":if(0>this.Add.i||this.Add.sVar<this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).after(this.commonCpBoxWarp.data("cache"+
this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)))}this.commonCpList[this.Add.i]&&$(this.commonCpList[this.Add.i]).remove();switch(this.Add.direction){case "left":this.Add.sVar++;this.Add.i++;break;case "right":this.Add.sVar--,this.Add.i--}this.Add.flag="true";this.timer1=setTimeout(function(){c.Add()},20)}};({num:22,url:"/wholesale/listajax.do",selector:{seoKeyWord:"#seoKeyWord",leftWrapper:"#js-leftPopularProdWrapper",leftTabsMain:"#js-leftPopularProdWrapper .js-tabsMain",
leftTabsMainMore:"#js-leftPopularProdWrapper .js-tabsMainMore",moreBtn:"#js-leftPopularProdWrapper .js-viewMore",rightWrapper:".js-rightPopularProdWrapper"},init:function(){var b=this;if(!$(b.selector.leftWrapper).length)return!1;b.getProductList();$(b.selector.leftWrapper).delegate(b.selector.moreBtn,"click",function(){$(this).hasClass("more")?($(b.selector.leftTabsMainMore).show(),$(this).removeClass("more").html("-View Less")):($(b.selector.leftTabsMainMore).hide(),$(this).addClass("more").html("+View More"))})},
getProductList:function(){var b=this;$.ajax({type:"get",url:b.url,dataType:"json",data:{t:1,act:"randomItemcode",num:b.num,cid:_pro_catalogid,keyword:$(b.selector.seoKeyWord).val()||""},success:function(c){"object"===typeof c&&c.plist&&(b.getLeftPopularProducts(c.plist.slice(0,10)),b.getRightPopularProducts(c.plist.slice(10,c.plist.length)))}})},getLeftPopularProducts:function(b){var c=[],f=[];if(!b||!b.length)return $(this.selector.leftWrapper).hide(),!1;6>=b.length&&$(this.selector.moreBtn).hide();
for(var e=0,g=b.length;e<g;e++){var l=b[e].unitprice.split(" / "),h="//www.dhgate.com/store/product/"+b[e].url+"/"+b[e].itemcode+".html",l=['<div class="sitems clearfix">','<div class="photo"><a class="pic sthumbnail" rel="nofollow" href="'+h+'"><img src="'+b[e].imageurl+'" alt="'+b[e].productname+'" /></a></div>','<div class="list-pro">','<p class="pro-title"><a href="'+h+'">'+b[e].productname+"</a></p>",'<div class="price"><span>'+l[0]+"</span> / "+l[1]+"</div>","</div></div>"].join("");6>e?c.push(l):
f.push(l)}$(this.selector.leftTabsMain).html(c.join(""));$(this.selector.leftTabsMainMore).html(f.join(""))},getRightPopularProducts:function(c){new b({dataList:c})}}).init()});
$(function(){1==$("#tuangou").val()&&$(".j-countdown").each(function(b,c){var d=$(c).attr("starttime")||0,f=setInterval(function(){var b=$(c),g=(d-+new Date)/1E3;if(0>=g)clearInterval(f),b.hide();else{var l=parseInt(g/86400),h=parseInt((g-86400*l)/3600),m=parseInt((g-86400*l-3600*h)/60),g=parseInt(g-86400*l-3600*h-60*m);b.is(":hidden")&&b.show();b.find("span").text((0<l?l+"d : ":"")+(9<h?h+"h":"0"+h+"h")+" : "+(9<m?m+"m":"0"+m+"m")+" : "+(9<g?g+"s":"0"+g+"s"))}},1E3)})});
$(function(){if(1==$("#tuangou").val()){var b;$(".tellmyfriend").hover(function(){b&&clearTimeout(b);$(this).nextAll(".sharelayyer").addClass("share-show")},function(){var c=$(this);b=setTimeout(function(){c.nextAll(".sharelayyer").removeClass("share-show")},50)});$(".sharelayyer").hover(function(){clearTimeout(b);$(this).addClass("share-show")},function(){var c=$(this);b=setTimeout(function(){c.removeClass("share-show")},50)})}});
$(function(){if(1==$("#tuangou").val()){var b=+$("#maxGroupNumPerPeoper").val(),c=+$("#surplusSalesNum").val(),d=$("#_cur_maxordersize").val();selectedInventory="1"==$("#isHasInventory").val()?Math.min(Math.min(b,c),d):Math.min(b,c)}});$(function(){1==$("#tuangou").val()&&($(".wprice-list.js-wholesale-box").hide(),$(".s-arrow").hide())});
function sjzxprice(){jQuery.ajax({url:"/product/mobileprict.do",type:"GET",dataType:"json",data:{isblank:!0,itemcode:_itemcode,supplierid:_toid,commtype:$("#commtype").val(),isvipprod:$("#isvipprod").val()},cache:!1,success:function(b){var c=$("#languageId").val();if(null!=b){var d=$("#sjzx_price_show").html(),d=b.mobilePriceVO.promVipMaxMobileBuyerPrice==b.mobilePriceVO.promVipMinMobileBuyerPrice?"PT"==c||"pt"==c?d+"<span class='aprice'> "+b.mobilePriceVO.promVipMinMobileBuyerPrice+" USD</span>":
d+"<span class='aprice'> US $"+b.mobilePriceVO.promVipMinMobileBuyerPrice+"</span>":"PT"==c||"pt"==c?d+"<span class='aprice'> "+b.mobilePriceVO.promVipMinMobileBuyerPrice+"-"+b.mobilePriceVO.promVipMaxMobileBuyerPrice+" USD</span>":d+"<span class='aprice'> US $"+b.mobilePriceVO.promVipMinMobileBuyerPrice+"-"+b.mobilePriceVO.promVipMaxMobileBuyerPrice+"</span>";$("#sjzx_price_show").html(d);$("#sjzx_price_show").show()}},error:function(b){}})}$(document).ready(function(){sjzxprice()});
define("appDetail/tpl/wholesaleTpl",[],function(b){return{wrap:'<div class="key-info-ri clearfix ">;<div class="wprice-list js-wholesale-box">;<ul class="js-wholesale-list"></ul>;</div>;<div class="s-arrow"><span class="s-ltarrow disnone js-prev"></span><span class="s-rtarrow disnone js-next"></span></div>;</div>'.split(";"),item:'<li nums="<%=nums%>" class="<% if(index==0){ %>current<% } %>" price="<%=price%>">;<span class="col1"><%=start%> +</span>;<span class="col2">US $<%=price%></span>;<%if(price != originalPrice){%>;<span class="col3">US $<%=originalPrice%></span>;<%}%>;</li>'.split(";")}});
define("appDetail/tpl/attributeTpl",[],function(){return{moreAttribute:['<div class="select-moreattr"><span class="moreAttr-btn"><span class="unit-price-button color-more ">more</span></span><div class="newpopcon opt-layer colorattr-list clearfix" style="display:none"><ul class="color-list clearfix"></ul></div></div>']}});
define("appDetail/common/wholesalePrice",["common/config","lib/backbone","tools/template"],function(b,c,d){function f(b){function c(c){if(b.circular)c<=b.start-u-1?(x.css(h,-((w-2*u)*A)+"px"),c=c==b.start-u-1?w-2*u-1:w-2*u-b.scroll):c>=w-u+1&&(x.css(h,-(u*A)+"px"),c=c==w-u+1?u+1:u+b.scroll);else if(0>c||c>w)return;return c}var e=this;if(!(e instanceof f))return new f($.extend(l,b||{}));b=$.extend(l,b||{});e.config=b;e.container=$(b.container);e.guid=++GUID+"carousel";var d=b.disableBtnCls;g.isString(d)&&
(d=b.disableBtnCls=[d,d]);g.isString(b.panels)&&(b.panels=$(b.panels,e.container));var h=b.vertical?"top":"left",q=b.vertical?"height":"width",v=b.panels,r=v.size(),u=b.visible;b.visible>r&&(b.circular=!1);b.btnPrev&&(g.isString(b.btnPrev)&&(b.btnPrev=$(b.btnPrev,e.container)),b.btnPrev.click(function(){b.btnPrev.hasClass(d[0])||e.go(e.curr-b.scroll);return!1}),b.btnPrev[["removeClass","addClass"][~~(!b.start&&!b.circular)]](d[0]));b.btnNext&&(g.isString(b.btnNext)&&(b.btnNext=$(b.btnNext,e.container)),
b.btnNext.click(function(){b.btnNext.hasClass(d[1])||e.go(e.curr+b.scroll);return!1}),b.btnNext[["removeClass","addClass"][~~(r<b.scroll)]](d[1]));if(!r)return!1;var x=$(b.panels[0].parentNode),y=x.parent();v.each(function(b,c){$(c).attr("es-r",b+1)});b.circular&&(x.prepend(v.slice(r-u).clone()).append(v.slice(0,u).clone()),b.start+=u);var z=x.children(),w=z.size();e.curr=b.start;y.css("visibility","visible");z.css({overflow:"hidden","float":b.vertical?"none":"left"});x.css({margin:"0",padding:"0",
position:"relative","list-style-type":"none","z-index":"1"});y.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var A=b.vertical?e.config.fullSize?e.config.fullSize[0]:$(z[0]).outerHeight(1):e.config.fullSize?e.config.fullSize[0]:$(z[0]).outerWidth(1),v=A*w,C=b.viewSize[~~b.vertical]||z[["width","height"][~~b.vertical]]();z.css(q,C+"px");x.css(q,v+"px").css(h,-(e.curr*A));b.btnGo&&(g.isString(b.btnGo)&&(b.btnGo=$(b.btnGo,e.container)),$.each(b.btnGo,function(c,d){$(d).click(function(){return e.go((b.circular?
b.visible:0)+c*b.scroll)})}));b.auto&&(q=function(){e.later=g.later(function(){e.go(e.curr+b.scroll)},b.auto+b.speed,!0)},v={mouseenter:function(){e.later&&e.later.cancel()},mouseleave:q},q(),y.bind(v),b.btnNext&&b.btnNext.bind(v),b.btnPrev&&b.btnPrev.bind(v));e.go=function(d){if(!b.running){oldVisibles=z.slice(e.curr).slice(0,b.scroll);d=e.curr=c(d);var f=z.slice(e.curr).slice(0,b.scroll),g={container:e.container,currentIndex:~~f.slice(0,1).attr("es-r"),visibles:f,oldVisibles:oldVisibles};e.container.trigger("switch"+
e.guid,g);b.running=!0;b.circular||(0>d?d=0:d+b.visible>w&&(d=b.visible>r?0:w-b.visible));x.animate("left"==h?{left:-(d*A)}:{top:-(d*A)},b.speed,b.easing,function(){e.container.trigger("switched"+e.guid,g);b.running=!1});if(!b.circular){d=b.disableBtnCls;if(b.btnPrev)b.btnPrev[["removeClass","addClass"][~~(0>=e.curr)]](d[0]);if(b.btnNext)b.btnNext[["removeClass","addClass"][~~(e.curr+b.scroll>=w)]](d[1])}}return!1}}var e=window;b=$.extend(!0,window.DH||{Detail:{}});GUID=0;oldVisibles=null;var g={later:function(b,
c,e,d,f){var h=function(b,c){return Object.prototype.toString.call(b)===(c?c:"[object Function]")};c=c||0;d=d||{};var g=null===f||void 0===f?[]:k(f,"[object Array]")?f:!k(f.length,"[object Number]")||k(f)||h(f,"[object Function]")?[f]:Array.prototype.slice.call(f),m;k(b)&&(b=d[b]);f=function(){b.apply(d,g)};m=e?setInterval(f,c):setTimeout(f,c);return{id:m,interval:e,cancel:function(){this.interval?clearInterval(m):clearTimeout(m)}}},isString:function(b,c){return Object.prototype.toString.call(b)===
(c?c:"[object String]")}},l={panels:[],btnPrev:null,btnNext:null,disableBtnCls:"disabled",btnGo:null,auto:null,speed:200,easing:null,vertical:!1,circular:!0,visible:5,start:0,scroll:1,running:!1,viewSize:[],fullSize:null};$.extend(f.prototype,{on:function(b,c){this.container.bind(b+this.guid,function(b,e){b.stopPropagation();c.call(b,e)})},next:function(){this.go(this.curr+this.config.scroll)},prev:function(){this.go(this.curr-this.config.scroll)},setOptions:function(b){$.extend(!0,this.config,b)},
destroy:function(){var b=this.config;$(b.btnNext).unbind("click");$(b.btnPrev).unbind("click");this.go(this.config.start)}});e[b]=$.extend(!0,{},e[b]||{});e[b].Detail=e[b].Detail||{};e[b].Detail.Carousel=f;c=function(b){var c={disableCLs:"disnone",sku:$("#selectedSkuVal").val(),wrapCLs:".js-wholesale-wrap",listWarp:".js-wholesale-list",MAX1024:null,MIN1024:null};this.config=$.extend(c,b);this.init()};c.prototype={init:function(){this._sku_=this.config.sku;this.Business=null;this.events()},events:function(){this._initCarousel(this._getWrap());
$(window).bind("resize",$.proxy(this.resize,this))},_initCarousel:function(b){var c=$(e).width();this._sku_=$(b).attr("data-sku");c=this.getConfig(c,b);c.visible<$(c.panels,b).length?($(c.btnNext,b).parent().show(),$(c.btnNext,b).removeClass(this.config.disableCLs),this.Business=new f(c)):($(c.btnNext,b).parent().hide(),$(c.btnNext,b).addClass(this.config.disableCLs),$(c.btnPrev,b).addClass(this.config.disableCLs))},_getWrap:function(b){return $(".js-wholesale-wrap")},resize:function(){this.changeWholesal(this._getWrap())},
changeWholesal:function(b){var c=$(e).width(),d=$(b).attr("data-sku");b=b||$(this.config.wrapCLs);this._sku_=d;$(b).find(this.config.listWarp).css("width","");this.Business&&this.Business.destroy();this.Business=void 0;c=this.getConfig(c,b);c.visible<$(c.panels,b).length?($(c.btnNext,b).parent().show(),$(c.btnNext,b).removeClass(this.config.disableCLs),this.Business=new f(c)):($(c.btnNext,b).parent().hide(),$(c.btnNext,b).addClass(this.config.disableCLs),$(c.btnPrev,b).addClass(this.config.disableCLs))},
getConfig:function(b,c){var d={container:c,viewBox:".js-wholesale-box",panels:".js-wholesale-list li",btnPrev:".js-prev",btnNext:".js-next",disableBtnCls:"disnone",vertical:0,circular:0,speed:200,btnGo:null},f=this.config;return d=1024<$(e).width()?$.extend(d,{scroll:5,visible:5,viewSize:f.MAX1024?f.MAX1024.viewSize:[83,50],fullSize:f.MAX1024?f.MAX1024.fullSize:[102,50]}):$.extend(d,{scroll:3,visible:3,viewSize:f.MIN1024?f.MIN1024.viewSize:[80,50],fullSize:f.MIN1024?f.MIN1024.fullSize:[96,50]})}};
e[b]=$.extend(!0,{},e[b]||{});e[b].Detail=e[b].Detail||{};return e[b].Detail.wholesale=c});
define("appDetail/common/sizetemplate",[],function(){var b=function(b){this.SetOptions(b);this.selectors=this.options.selectors;this.isIE6=$.browser.msie&&"6.0"==$.browser.version;this.Init()};b.prototype={SetOptions:function(b){this.options={selectors:{sizebtn:".j-sizing-info",sizetab:".j-sizetab li"}};$.extend(this.options,b||{})},Init:function(){var b=$("body");b.delegate(this.selectors.sizebtn,"click",$.proxy(this.showSize,this));b.delegate(this.selectors.sizetab,"click",$.proxy(this.tabSwitch,
this))},showSize:function(){var b=this,d=$("body"),f=$("#supplierid").val(),e=$("#szSellerTemplateId").val();d.append('<div class="newpopcon coupopbox size-pop-loading j-loadingbox"></div>');d.append('<div class="size-tpl-mask j-sizetpl-mask"><iframe class="j-mask-iframe"></iframe></div>');b.popShow(".j-loadingbox");DH.request({url:"/product/product_template_ajax.do",type:"GET",data:{supplierId:f,szSellerTemplateId:e},cache:!1,dataType:"html",success:function(c){c?($(".j-loadingbox").remove(),d.append(c),
b.popShow(".j-sizetpl-dialog"),b.closePop(".j-sizetpl-dialog")):(c='<div class="newpopcon coupopbox size-pop-tips j-sizetips-dialog"><span class="icon-bclose j-close-dialog"></span><div class="size-tips-con"><b></b>'+$L("detail_tips_sizetemplate")+"</div></div>",$(".j-loadingbox").remove(),d.append(c),b.popShow(".j-sizetips-dialog"),b.closePop(".j-sizetips-dialog"))}})},tabSwitch:function(b){b=$(b.target);var c=b.closest(".j-tab-container"),f=c.find(b.attr("data-target"));b.addClass("current").siblings().removeClass("current");
c.find(".j-tabcon").hide();f.show()},popShow:function(b){var c=this;c.setPosition(b);$(window).bind("scroll resize",function(){c.setPosition(b)})},setPosition:function(b){var c,f,e,g,l,h,m,n=$(".j-sizetpl-mask"),p=$(".j-mask-iframe");c=$(document).height();f=Math.min($(document).width(),$("body").outerWidth(!0));e=$(b).outerHeight(!0);g=$(b).outerWidth(!0);l=$(window).height();h=$(window).width();m=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((h-g)/2+lScroll),e=parseInt((l-
e)/2+m)):(g=parseInt((h-g)/2),e=parseInt((l-e)/2));$(b).css({top:e,left:g});n.css({width:f,height:c});p.css({width:f,height:c})},closePop:function(b){var c=$(".j-sizetpl-mask");$("body").delegate(".j-close-dialog","click",function(d){$(d.target).parents(b).remove();c.remove()})}};return b});
define("appDetail/common/d1-tracking",["common/config","tools/jquery.cookie","tools/dhgate.cookie"],function(b,c,d){return{execDetailTrack:function(b){window._dhq=window._dhq||[];var c=$.cookie("DHgate_toolbar");_dhq.push(["setVar","content",c]);_dhq.push(["setVar","itemcode",_itemcode]);_dhq.push(["setVar","pid",_pid]);_dhq.push(["setVar","cid",_pro_catalogid]);_dhq.push(["pageview",b])}}});
define("appDetail/common/dispatchPledge",[],function(){var b=function(b){this.SetOptions(b);this.selectors=this.options.selectors;this.Init()};b.prototype={SetOptions:function(b){this.options={selectors:{suppierID:"#supplierid",itemCode:"#itemcode",pledgeWrap:".j-pledge-wrap",isOntimeType:".j-isOntime",isOverseasType:".j-isOverseas",isChinaBrandType:".j-isChinaBrand",isMerchandiseType:".j-isMerchandise",isCertificationType:".j-isCertification"}};$.extend(this.options,b||{})},Init:function(){var b=
$("body"),d=this.options.selectors;this.checkInfo();b.delegate(d.pledgeWrap,"mouseenter",$.proxy(this.showList,this));b.delegate(d.pledgeWrap,"mouseleave",$.proxy(this.hideList,this))},checkInfo:function(){var b=this.options.selectors,d=$(b.suppierID).val(),f=$(b.itemCode).val();DH.request({url:"/product/productguaranteedajax.do",type:"GET",data:{supplierid:d,itemcode:f},cache:!1,dataType:"json",success:function(c){if(""!=c){var e=c.isOntime,d=c.isOverseas,f=c.isChinaBrand,m=c.isMerchandise;c=c.isCertification;
e&&"1"==e&&($(b.pledgeWrap).show(),$(b.isOntimeType).show());d&&"1"==d&&($(b.pledgeWrap).show(),$(b.isOverseasType).show());f&&"1"==f&&($(b.pledgeWrap).show(),$(b.isChinaBrandType).show());m&&"1"==m&&($(b.pledgeWrap).show(),$(b.isMerchandiseType).show());c&&"1"==c&&($(b.pledgeWrap).show(),$(b.isCertificationType).show())}},error:function(){}})},showList:function(){$(this.options.selectors.pledgeWrap).addClass("hover fande")},hideList:function(){$(this.options.selectors.pledgeWrap).removeClass("hover fande")}};
return b});
define("appDetail/customMade",["common/config","lib/backbone","tools/template","appDetail/selectMenu"],function(b,c,d,f){b=function(b){this.SetOptions(b);document.getElementById(this.options.customSizeWarp)&&(this.customSizeInfo=$("#"+this.options.customSizeInfo),this.customSizeWarp=$("#"+this.options.customSizeWarp),this.customOptions=$("#"+this.options.customOptions),this.customOptionsContent=$("#"+this.options.customOptionsContent),this.customOptionsMask=$("#"+this.options.customOptionsMask),this.hiddenAttrvalcm=
$("#"+this.options.hiddenAttrvalcm),this.customOptionsMaskIframe=$("#"+this.options.customOptionsMaskIframe),this.customOptionsYesButton=$(this.options.customOptionsYesButton),this.customOptionsSubmitButton=this.options.customOptionsSubmitButton,this.customOptionsClose=this.options.customOptionsClose,this.hiddenBuycustomSize=$("#"+this.options.hiddenBuycustomSize),this.customOptionsCancelButton=this.options.customOptionsCancelButton,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,
this.colorListObject=this.options.colorListObject,this.Init())};b.prototype={SetOptions:function(b){this.options={customSizeInfo:"customSizeInfo",customSizeWarp:"customSizeWarp",customOptionsYesButton:".customOptionsYesButton",customOptionsSubmitButton:"customOptionsSubmitButton",customOptions:"customOptions",hiddenAttrvalcm:"hiddenAttrvalcm",customOptionsContent:"customOptionsContent",customOptionsMask:"customOptionsMask",customOptionsMaskIframe:"customOptionsMaskIframe",customOptionsClose:"customOptionsClose",
hiddenBuycustomSize:"hiddenBuycustomSize",customOptionsCancelButton:"customOptionsCancelButton",colorListObject:null};$.extend(this.options,b||{})},Init:function(){for(var b=0;b<DH_Product_Properties_Color_Object.colorList.length;b++)if(DH_Product_Properties_Color_Object.colorList[b]==_customSize){this._index=DH_Product_Properties_Color_Object.colorList.length;break}this.Load();this.ControlList()},Load:function(){var b=this,c="";this.customOptionsYesButton.live("click",function(e){if("LI"!=e.target.nodeName||
$(e.target).hasClass("color-selected"))if(b.customOptions.css({display:"block"}),b.customOptionsMask.css({display:"block"}),b.Resize(),"true"!=b.Load.flag){c=$.trim(b.hiddenBuycustomSize.attr("attrvalid"));if(null!=$("#hiddenIamgeUrl").val()||""!=$("#hiddenIamgeUrl").val())imageUrl=escape($("#hiddenIamgeUrl").val());DH.request({url:"/product/turnForProdCm.do",type:"GET",dataType:"html",cache:!1,data:{attrValId:c,iamgeUrl:imageUrl,catePubId:_pro_catepubid},success:function(c){b.customOptions.find("div").remove();
b.customOptionsContent.html(c);b.customOptions.css({visibility:"hidden"});b.CheckInput();b.checkRemarkLength();b.Submit();b.Close();b.Load.first="true";new f({selectWarp:["customSizeUnitWarp"],hiddenInput:["customSizeHiddenInput"],textInput:["customSizeInput"],arrow:["customSizeSelectArrow"],list:["customSizeUnitSelectList"]});b.ChangeUnit()}});b.Load.flag="true"}})},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},
SetPosition:function(){if("none"!=this.customOptions.css("display")){var b,c,d,f,m,n,p;b=Math.min($(document).height(),$("body").outerHeight(!0));c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.customOptions.children("table").height();f=this.customOptions.children("table").width();m=$(window).height();n=$(window).width();p=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(n=parseInt((n-f)/2+lScroll),m=parseInt((m-d)/2+p)):(n=parseInt((n-f)/2),m=parseInt((m-d)/2));this.customOptions.css({top:m,
left:n,width:f,height:d});this.customOptionsMask.css({width:c,height:b,opacity:.5});this.customOptionsMaskIframe.css({width:c,height:b,opacity:0});"true"==this.Load.first&&this.customOptions.css({visibility:"visible"})}},ControlList:function(){var b=this;this.customSizeWarp.click(function(c){if("LI"==c.target.nodeName)try{void 0!=b.colorListObject.ClickItems.__index[b._index-1]&&($(b.customOptionsYesButton[1]).css({display:"none"}),b.customSizeInfo.css({display:"none"}))}catch(l){}})},Submit:function(){var b=
this,c,d="",f="",m="";$("#"+this.customOptionsSubmitButton).click(function(){var e=!0;c=$("input[name='textinput']");c.each(function(b){""==$.trim($(c[b]).val())&&(e=!1)});e&&(b.customOptions.css({display:"none"}),b.customOptionsMask.css({display:"none"}),b.customSizeInfo.css({display:"block"}),d=b.hiddenBuycustomSize.attr("attrvalid")+",",c.each(function(b){f=""==f?$(c[b]).attr("attrvalcmid")+"_"+$(c[b]).val():f+"-"+$(c[b]).attr("attrvalcmid")+"_"+$(c[b]).val();m=""==m?"<span>"+$(c[b]).attr("attrvalcmName")+
": <b>"+$(c[b]).val()+"</b> "+$("#customSizeInput").val()+"</span>":m+",<span>"+$(c[b]).attr("attrvalcmName")+": <b>"+$(c[b]).val()+"</b> "+$("#customSizeInput").val()+"</span>"}),d+=f,b.hiddenAttrvalcm.val(d),b.customSizeInfo.html(m),$("#hiddenunit").val($("#customSizeInput").val()),$("#customattr").val(d),$("#hiddenRemark").val($("#remarksText").val()),$(b.customOptionsYesButton[1]).css({display:"block"}),m=f=d="")})},CheckInput:function(){var b,c=/^(\+|-)?\d+($|\.\d+$)/;b=$("input[name='textinput']");
b.each(function(e){$(b[e]).blur(function(d){c.test($(b[e]).val())||$(b[e]).val("")})})},getsubString:function(b,c){var e=b.replace(/[^\x00-\xff]|[\r\n]/g,"xx").length,d,f=0,g="";if(e<=c)return b;for(var p=0;p<e;p++){d=b.charAt(p).toString();null!=d.match(/[^\x00-\xff]|[\r\n]/g)?f+=2:f++;if(f>c)break;g+=d}return g},checkRemarkLength:function(){var b=this;$("#remarksText").blur(function(c){c=$("#remarksText").val();2E3<c.replace(/[^\x00-\xff]|[\r\n]/g,"xx").length&&($("#remarksText").val(b.getsubString(c,
2E3)),$("#remarksText").focus())})},Close:function(){var b=this;$("#"+this.customOptionsClose).click(function(){if("none"==b.customSizeInfo.css("display")){$(b.customOptionsYesButton[0]).removeClass("color-selected").children("i").remove();try{b.colorListObject.ClickItems.__index[b._index-1]=void 0}catch(g){}}b.customOptions.css({display:"none"});b.customOptionsMask.css({display:"none"})});$("#"+this.customOptionsCancelButton).click(function(){if("none"==b.customSizeInfo.css("display")){$(b.customOptionsYesButton[0]).removeClass("color-selected").children("i").remove();
try{b.colorListObject.ClickItems.__index[b._index-1]=void 0}catch(g){}}b.customSizeWarp.find("ul li").eq(0).click();b.customOptions.css({display:"none"});b.customOptionsMask.css({display:"none"})})},ChangeUnit:function(){$("#customSizeUnitSelectList").click(function(b){"LI"==b.target.nodeName&&(b=$(b.target).text(),$(".wedding-unit").text(b),$("#customSizeInput").val(b))})}};return b});
define("appDetail/groupPurchase",["common/config","lib/backbone","tools/template"],function(b,c,d){return{productPrice:{},totalCost:{sp:0,ep:0},selector:{wrapper:".js-groupPurchase",product:".js-product",prodsWrapper:".js-prods",chooseBtn:".common-cp-price",buyerBtn:".js-buyerBtn",addCartBtn:".js-addCartBtn",totalCost:".js-totalCost"},apiUrl:"//www.dhgate.com/product/getgrouppurchase.do",init:function(){var b=this;b.getProds();$(b.selector.wrapper).delegate(b.selector.chooseBtn,"click",function(c){b.chooseProd(c)});
$(b.selector.wrapper).delegate(b.selector.buyerBtn,"click",function(){b.go("1")});$(b.selector.wrapper).delegate(b.selector.addCartBtn,"click",function(){b.go("2")})},getProds:function(){var b=this;DH.request({url:b.apiUrl,dataType:"json",data:{itemcode:_itemcode,catalogid:_catelogID,supplierid:$("#supplierid").val()},success:function(c){"object"===typeof c&&c.grouppurchaseData&&1==c.grouppurchaseData.code?b.getProdsStr(c.grouppurchaseData.combinationProducts):$(b.selector.wrapper).hide()}})},getProdsStr:function(b){for(var c=
[],d=0,f=b.length;d<f;d++){var h=b[d].itemcode,m=b[d].productPrice.match(/(\d+\.?\d*)/g);b[d].cls=1==b[d].sign?"":"onchoose";var n='<li class="js-product" data-itemcode="<%=itemcode%>"><div class="common-cp-img"><a target="_blank" href="<%=productUrl%>"><img src="<%=productThumbnailImageUrl%>" alt="<%=productName%>" /></a></div><div class="common-cp-title"><a target="_blank" title="<%=productName%>" href="<%=productUrl%>"><%=productName%></a></div><div class="common-cp-price <%=cls%>"><strong><%=productPrice%></strong> / <%=productMeasure%></div></li>'.replace(/<%=([\w\d-_]*?)%>/g,
function(c,e){return b[d][e]?b[d][e]:""});1==b[d].sign?c.unshift(n):c.push(n);this.productPrice[h]={sp:Number(m[0]||0),ep:Number(m[1]||m[0])};this.addTotalCost(h)}this.setTotalCost();$(this.selector.prodsWrapper).html(c.join('<li class="fbt-plus"></li>'));$(this.selector.wrapper).show()},chooseProd:function(b){b=$(b.target);var c=["choose","onchoose"],d=b.closest(this.selector.product).data("itemcode");b.hasClass(c[0])?(this.addTotalCost(d),b.removeClass(c[0]).addClass(c[1])):b.hasClass(c[1])&&(this.reducedTotalCost(d),
b.removeClass(c[1]).addClass(c[0]));this.setTotalCost()},addTotalCost:function(b){this.productPrice[b]&&(this.productPrice[b].ischecked=1,this.totalCost.sp=Number(this.totalCost.sp)+this.productPrice[b].sp,this.totalCost.ep=Number(this.totalCost.ep)+this.productPrice[b].ep)},reducedTotalCost:function(b){this.productPrice[b]&&(this.productPrice[b].ischecked=0,this.totalCost.sp=Number(this.totalCost.sp)-this.productPrice[b].sp,this.totalCost.ep=Number(this.totalCost.ep)-this.productPrice[b].ep)},setTotalCost:function(){if(0<=
this.totalCost.sp&&0<=this.totalCost.ep){this.totalCost.sp=this.totalCost.sp.toFixed(2);this.totalCost.ep=this.totalCost.ep.toFixed(2);var b=this.totalCost.sp==this.totalCost.ep?this.totalCost.sp:this.totalCost.sp+" - "+this.totalCost.ep,b="US $"+b;$(this.selector.totalCost).html(b)}},go:function(b){var c=[];b="//www.dhgate.com/grouppurchase/groupdisplay.do"+("?type="+b+"&itemcode="+_itemcode);$.each(this.productPrice,function(b,e){b!=_itemcode&&c.push(b+"-"+e.ischecked)});b+="&data="+c.join(",");
window.location.href=b}}});
define("appDetail/selectMenu",["common/config","lib/backbone","tools/template"],function(b,c,d){function f(){var b=$("#ship_quantity").attr("value"),c=$("#_cur_maxordersize").val(),d=$("#minQuantity").val(),h=$("#shippingSelectHiddenInput").attr("value");/^\d+$/.test(b)?"0"==b?(alert("Purchase quantity is zero,Please checkout!"),$("#ship_quantity").val(d)):(b=parseInt(b),c=parseInt(c),d=parseInt(d),b>c&&($("#ship_quantity").val(c),b=c),b<d&&($("#ship_quantity").val(d),b=d),DH.request({url:"/product/shippingpayment.do?ship_country="+
h+"&ship_quantity="+b+"&pid="+_pid+"&itemcode="+_itemcode,type:"GET",dataType:"html",success:function(b){b=b.split('<div name="separator"></div>');$("#_ShippingAndPayment_sub0").html(b[0]);$("#_ShippingAndPayment_sub1").html(b[1])}}),gtag("event","caculate",{event_category:"Checkout-product",event_label:""})):(alert("Quantity entered must be a number!"),$("#ship_quantity").val(d))}b=function(b){this.SetOptions(b);this.selectWarp=this.options.selectWarp;this.hiddenInput=this.options.hiddenInput;this.textInput=
this.options.textInput;this.arrow=this.options.arrow;this.list=this.options.list;this.ship_quantity=$("#"+this.options.ship_quantity);this.defaultLength=this.options.defaultLength;this.yScrollClass=this.options.yScrollClass;0!=this.selectWarp.length&&this.Init()};b.prototype={SetOptions:function(b){this.options={selectWarp:[],hiddenInput:[],textInput:[],arrow:[],list:[],defaultLength:12,ship_quantity:"ship_quantity",yScrollClass:"simulation-select-yScroll"};$.extend(this.options,b||{})},Init:function(){this.params=
{_From:this.options.selectWarp};this.selectWarpArray=[];this.hiddenInputArray=[];this.textInputArray=[];this.arrowArray=[];this.listArray=[];for(var b=0;b<this.selectWarp.length;b++)$("#"+this.selectWarp[b])[0]&&(this.selectWarpArray.push($("#"+this.selectWarp[b])),this.hiddenInputArray.push($("#"+this.hiddenInput[b])),this.textInputArray.push($("#"+this.textInput[b])),this.arrowArray.push($("#"+this.arrow[b])),this.listArray.push($("#"+this.list[b])));this.FocusInput();this.ControlArrow();this.OpenSelectList()},
FocusInput:function(){this.ship_quantity.blur(function(){f()})},ControlArrow:function(){for(var b=this,c=0;c<this.selectWarpArray.length;c++)(function(){var d=c;b.selectWarpArray[d].mouseenter(function(){b.arrowArray[d].addClass("simulation-select-harrow")}).mouseleave(function(){b.arrowArray[d].removeClass("simulation-select-harrow")})})()},HighlightDefaultStatus:function(b,c){$(c[0]).addClass("hover");for(var d=1;d<c.length;d++)$(c[d]).removeClass("hover")},OpenSelectList:function(){for(var b=this,
c=0;c<this.listArray.length;c++)(function(){var d=c,e=$("#"+b.options.list[d]+" > ul"),f=$("#"+b.options.list[d]+" > ul > li"),g=f.height()*f.length;e.prepend('<li style="overlfow:hidden;float:left;padding:0;margin-left:-1px;width:1px;height:'+g+'px"></li>');b.selectWarpArray[d].click(function(e){e.stopPropagation();b.HighlightDefaultStatus(d,f);for(e=0;e<c;e++)e==d?"none"==b.listArray[d].css("display")?b.listArray[d].css({display:"block",visibility:"visible"}):b.listArray[d].css({display:"none",
visibility:"hidden"}):b.listArray[e].css({display:"none",visibility:"hidden"})});f.length>b.defaultLength&&e.addClass(b.yScrollClass);b.SelectList(d,f);b.ClickList(d,f);b.Close(d,e,f)})()},SelectList:function(b,c){for(var d=0;d<c.length;d++)(function(){var b=d;$(c[b]).mouseenter(function(){$(this).addClass("hover");for(var e=0;e<d;e++)e!=b&&$(c[e]).removeClass("hover")})})()},ClickList:function(b,c){for(var d=this,e=0;e<c.length;e++)$(c[e]).click(function(b){"shippingCostSelect"==d.params._From?DH_SHIP.model.trigger("Ship:change:shipCountry",
{id:$(this).attr("vHidden"),name:$(this).text()}):DH_SHIP.model.trigger("Ship:change:stockCountry",{id:$(this).attr("vHidden"),name:$(this).text()})})},Close:function(b,c){var d=this;$(document).click(function(){"block"==d.listArray[b].css("display")&&(d.listArray[b].css({display:"none",visibility:"hidden"}),d.HighlightDefaultStatus(b,c))})}};return b});
define("appDetail/shippingCost",["common/config","lib/backbone","tools/template","appDetail/selectMenu"],function(b,c,d,f){c.Model.extend({defaults:function(){return{code:-1,wholesale:[{discount:0,discountPrice:0,price:0,startQty:0,endQty:0}],deliveryTime:"",price:0,qty:0,totalCost:0,stockInCountry:"CN",shipToCountry:"US"}},initialize:function(b,c){this.setOption(c);this.ajaxOptions=this.options.ajaxOptions;this.skuInfo=window.skujson||this.options.skuInfo},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwRUL+
"/product/productprict.do",data:{version:1,client:"pc"},type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0}};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,d,f){this.__params=$.extend(!0,{},this.ajaxOptions,f||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},f))},parse:function(b,c){var d={};d.code=null!=b?200:-1;return d}});c.View.extend({});d=function(b){this.SetOptions(b);document.getElementById(this.options.shippingCostChooseButton)&&
(this.shippingCostChooseButton=$("#"+this.options.shippingCostChooseButton),this.ShippingCostChoose=$("#"+this.options.ShippingCostChoose),this.ShippingCostMask=$("#"+this.options.ShippingCostMask),this.ShippingCostChooseTextarea=$("#"+this.options.ShippingCostChooseTextarea),this.ShippingCostMaskIframe=$("#"+this.options.ShippingCostMaskIframe),this.ShippingCostChooseContent=this.options.ShippingCostChooseContent,this.chooseLeft=this.options.chooseLeft,this.ShipLoading=this.options.ShipLoading,this.chooseShippingCannot=
this.options.chooseShippingCannot,this.ShippingCostClose=this.options.ShippingCostClose,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};d.prototype={SetOptions:function(b){this.options={shippingCostChooseButton:"shippingCostChooseButton",ShippingCostChoose:"ShippingCostChoose",ShippingCostMask:"ShippingCostMask",ShippingCostChooseTextarea:"ShippingCostChooseTextarea",ShippingCostChooseContent:"ShippingCostChooseContent",chooseLeft:"chooseLeft",ShippingCostOKShipping:"OKShipping",
ShipLoading:"ShipLoading",ShippingCostMaskIframe:"ShippingCostMaskIframe",chooseShippingCannot:"chooseShippingCannot",ShippingCostClose:"ShippingCostChooseClose"};$.extend(this.options,b||{})},Init:function(){this.Open()},Open:function(){var b=this;this.shippingCostChooseButton.click(function(){b.ShippingCostChoose.css({display:"block"});b.ShippingCostMask.css({display:"block"});$("#"+b.options.ShippingCostChooseTextarea)[0]&&(b.ShippingCostChoose.html(b.ShippingCostChooseTextarea.html()),b.ShippingCostChooseTextarea.remove(),
b.Resize(),b.Close(),new f({selectWarp:["shippingCostSelect"],hiddenInput:["hiddenCountry"],textInput:["textCountry"],arrow:["arrowCountry"],list:["listCountry"]}),new f({selectWarp:["inventoryLocationShippingSelect"],hiddenInput:["inventoryLocationCountryId"],textInput:["textInventory"],arrow:["arrowInventory"],list:["listInventory"]}));$("#russiacountrynoties").css("display","none");if("Russia"==$("#textCountry").val())for(var c=$("#chooseLeft li"),d=0;d<c.length;d++){var e=$(c[d]).attr("class"),
m=$(c[d]).attr("vhidden");"current"==e&&"China"!=m&&"EMS"!=m&&"CHINAPOSTAIR"!=m&&"HONGKONGPOST"!=m&&"CHINAPOSTSAL"!=m&&"SINGAPOREPOST"!=m&&$("#chooseShippingCannot").is(":hidden")&&$("#russiacountrynoties").css("display","block")}c=$("#listInventory > ul> li");c.length?(d=$("#inventoryLocationCountryId").val(),e=c.filter("[vhidden='"+d+"']").index(),$("#inventoryidclass").attr("class",d.toLowerCase()),$(c.eq(e)).trigger("click"),$("#textInventory").val($("#listInventory").find("li[vhidden='"+d+"'] span").html())):
(c=$("#listCountry > ul> li"),d=$("#hiddenCountry").val(),e=c.filter("[vhidden='"+d+"']").index(),$("#countryidclass").attr("class",d.toLowerCase()),$(c.eq(e)).trigger("click"))})},loadShippingType:function(){},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},50)},SetPosition:function(){if("none"!=this.ShippingCostChoose.css("display")&&"block"!=$("#listCountry").css("display")){var b,c,d,f,m,n,p;$("#"+this.chooseLeft).find("li");
"block"==$("#"+this.ShipLoading).css("display")?$("#"+this.ShippingCostChooseContent).addClass("width640"):"none"==$("#"+this.chooseShippingCannot).css("display")?this.ShippingCostChoose.width("100%"):$("#"+this.ShippingCostChooseContent).removeClass("width640");b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.ShippingCostChoose.children("table").height();f=this.ShippingCostChoose.children("table").width();m=$(window).height();n=$(window).width();p=$(window).scrollTop();
lScroll=$(window).scrollLeft();this.isIE6?(n=parseInt((n-f)/2+lScroll),m=parseInt((m-d)/2+p)):(n=parseInt((n-f)/2),m=parseInt((m-d)/2));this.ShippingCostChoose.css({top:m,left:n,width:f,height:d});this.ShippingCostMask.css({width:c,height:b,opacity:.5});this.ShippingCostMaskIframe.css({width:c,height:b,opacity:0})}},Close:function(){var b=this;$("#"+this.ShippingCostClose).click(function(){b.ShippingCostChoose.css({display:"none"});b.ShippingCostMask.css({display:"none"})});$("#"+this.cannotShipping).click(function(){b.ShippingCostChoose.css({display:"none"});
b.ShippingCostMask.css({display:"none"})});$("#"+this.options.ShippingCostOKShipping).click(function(){b.ShippingCostChoose.css({display:"none"});b.ShippingCostMask.css({display:"none"})})}};return d});
define("appDetail/skuChoose","common/config lib/backbone tools/template appDetail/skuInfoModel appDetail/tpl/attributeTpl appDetail/tpl/wholesaleTpl".split(" "),function(b,c,d,f,e,g){var l=c.Model.extend({defaults:function(){return{code:-1,wholesale:[{discount:0,discountPrice:0,price:0,startQty:0,endQty:0}],skuId:null,skuMd5:null,enableSale:1,stock:0,minOrder:0,maxOrder:0,buyerNum:0,price:0,otherPrice:0,discount:1,totalCost:0,otherTotalCost:0,deliveryTime:"",quantity:$("#quantity").val()||0,commtype:$("#commtype").val()||
"",stockInCountry:$("#inventoryLocationCountryId").val()||"CN",shipToCountry:$("#hiddenCountry").val()||"US",viaExpressTypeName:"",shippingtypeid:$("#_cur_shippingtypeid").val(),defaultShippingTypeId:"",supplierId:window._toid||"",itemcode:window._itemcode||"",productId:window._pid||"",buyerId:b.buyerId||_dologin,promo_dto:null,isSkuPromo:"yes"==$("#isSkuPromo").val()?!0:!1}},initialize:function(b){this.setOption(b);this.ajaxOptions=this.options.ajaxOptions;this.skuInfo=window.skujson||this.options.skuInfo||
{};this.skuInfoMd5=window.skuJsonMd5||this.options.skuJsonMd5||{}},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwURL+"/product/productprict.do",data:{version:1,client:"pc",itemcode:window._itemcode||"",supplierId:window._toid||"",skuId:$("#selectedSkuVal").val(),skuMd5:$("#selectedSkuMd5Val").val(),quantity:$("#quantity").val()||"",isdhporttype:window._dhportType||"",countryid:$("#hiddenCountry").val(),shippingtypeid:$("#_cur_shippingtypeid").val()||"",inventoryLocationCountryId:$("#inventoryLocationCountryId").val(),
commtype:$("#commtype").val()||"commissionCV2",isvipprod:$("#isvipprod").val(),isAttrClick:!1},type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0},supplierId:window._toid||"",itemcode:window._itemcode||"",productId:window._pid||"",buyerId:b.buyerId||_dologin,ABCD:"BBB"};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,d,e){this.__params=$.extend(!0,{},this.ajaxOptions,e||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},
e))},parse:function(b,c){this.ajaxOptions.data=$.extend(!0,{},this.ajaxOptions.data,c.data||{});var d={},e=c.data;if(!b)return{};d.code=null!=b?200:-1;d.originalPrice=b.discountPrice;d.price=b.webprice;d.otherPrice=b.ratePrice;d.totalCost=b.buyernewprice;d.otherTotalCost=b.totalRatePrice;d.quantity=e.quantity;d.commtype=$("#commtype").val()||"";d.stockInCountry=e.inventoryLocationCountryId||$("#inventoryLocationCountryId").val()||"CN";d.shipToCountry=e.countryid||"US";d.viaExpressTypeName=e.shippingtypeid||
"DHLink";d.shippingtypeid=e.shippingtypeid||$("#_cur_shippingtypeid").val();d.defaultShippingTypeId=this.get("defaultShippingTypeId")||$("#_init_cur_shippingtypeid").val()||"";d.supplierId=e.supplierId||_toid||"";d.itemcode=e.itemcode||_itemcode||"";d.productId=window._pid||"";d.shippingCost=b._cur_shippingcost;d.wholesale=[];if(-1!=d.code&&""!=b){var f=[];$.each(b.productWholesaleRangeDTOList,function(b,c){var d={};d.discountPrice=c.discountPrice;d.promDiscountPrice=c.promDiscountPrice;d.vip=c.vipPrice;
d.startQty=c.startQty;d.endQty=c.endQty;f.push(d)});d.wholesale=f;d.promo_dto=b.promo_dto}return d},setQuantity:function(b,c){c=c||{};this.set({quantity:b},{silent:void 0===c.silent?!0:c.silent,validate:!0,type:"quantity",fetch:void 0===c.fetch?!0:c.fetch})},setEnableSale:function(b,c){this.set({enableSale:b+""},{silent:void 0===c?!0:c,validate:!1,type:"enableSale"})},setMaxOrder:function(b,c){this.set({maxOrder:b},{silent:void 0===c?!0:c,validate:!0,type:"maxOrder"})},setMinOrder:function(b,c){this.set({minOrder:b},
{silent:void 0===c?!0:c,validate:!0,type:"minOrder"})},setBuyerNum:function(b,c){this.set({buyerNum:b},{silent:void 0===c?!0:c,validate:!0,type:"buyerNum"})},setShippingTypeId:function(b,c){this.set({shippingtypeid:b},{silent:void 0===c?!0:c,validate:!1,type:"shippingType"})},setShippingTypeName:function(b,c){this.set({viaExpressTypeName:b},{silent:void 0===c?!0:c,validate:!1,type:"viaExpressTypeName"})},setShipToCountry:function(b,c){this.set({shipToCountry:b},{silent:void 0===c?!0:c,validate:!1,
type:"shipToCountry"})},setStockInCountryId:function(b,c){this.set({stockInCountry:b},{silent:void 0===c?!0:c,validate:!1,type:"stockInCountry"})},setStockInCountryName:function(b,c){this.set({stockInCountryName:b},{silent:c||!0,validate:!1,type:"stockInCountryName"})},setStock:function(b,c){this.set({stock:b},{silent:void 0===c.silent?!0:c.silent,validate:c.validate||!1,type:"stock",fetch:c.fetch||!0})},validate:function(b,c){var d;if("enableSale"==c.type&&(d=this.validataExpireEnableSale(b),"string"===
typeof d))return d;if("quantity"==c.type||"stock"==c.type){d=this.validataExpireQuantity(b,c.type);if("string"===typeof d)return d;this.trigger("SKU:change:wholesaleLine",{quantity:b.quantity});c.fetch&&this.trigger("SKU:change:fetch",{quantity:b.quantity,countryid:this.get("shipToCountry"),inventoryLocationCountryId:$("#inventoryLocationCountryId").val()||this.get("stockInCountry"),shippingtypeid:this.get("shippingtypeid")})}},validataExpireEnableSale:function(b,c){$.trim(b.enableSale);if("0"==b.enableSale)return"isEnableSale-enableSale-"+
(this.get("stock")||$("#inventoryQtyNum_new").html())},validataExpireQuantity:function(b,c){var d=Number($.trim(b.quantity)),e=Number(this.get("dailyDealsStatus")||$("#_daily_deals_num").val()),f=Number(this.get("dailyDealsNum")||$("#_daily_deals_num").val()),h=Number(this.get("maxOrder")||$("#_cur_maxordersize").val()),g=Number(this.get("minOrder")||$("#currentordersize").val()),m=Number(this.get("stock")||$("#inventoryQtyNum_new").html()),l=Number(this.get("buyerNum")||$("#_daily_deals_buyerNum").val());
if(/^[1-9][0-9]{0,}$/.test(d))if("1"==e){if(d>h&&f>h&&h<l)return"isQuantity-maxOrder-"+h;if(d>m&&m<=f&&m<=l&&d>=g)return"isQuantity-customStock-"+g;if(d>f&&l>f&&f>=g)return"isQuantity-customStock-"+f;if(d>l&&l<f&&l>=g)return"isQuantity-customStock-"+l;if(d<g&&l>=g)return"isQuantity-minOrder-"+g;if(l<g)return"isQuantity-soldOut-0"}else{if(d>m)return"isQuantity-stock-"+(g>m?g:m);if(d>h)return"isQuantity-maxOrder-"+h;if(d<g)return"isQuantity-minOrder-"+g}else return 0==d?"isQuantity-minOrder-"+g:"isQuantity-number-"+
g}});return c.View.extend({el:"#productdisplayForm",events:{"click .js-selectionWrapper li:not(.js-moreAttr)":"attrClickHandler","blur #quantity":"checkQuantity","keypress #quantity":"quantityPress","click #quantityEnter":"checkQuantity","click .moreorigin li":"changeStockIn"},initialize:function(b){b=b||{};this.setOption(b);this.model=this.option.model;this.modelSKU=this.option.modelSKU;this.attrValCache=this.option.attrValCache||{};this.skuStatus={promoType:null,isSoldOut:!1,maxOrder:null,minOrder:1,
hasInventory:!0};b=$("#selectedSkuVal").val();this.getQueryString("skuid")==b&&(this.attrSelecetAll=!0);var c=this;b=parseInt($.trim(_buyAttrListSize||0))+parseInt($.trim(_buyAttrCustomListSize||0));var d=function(){var b=0;_.each(c.attrValCache,function(){b++});return b}();b>=d&&(this.attrSelecetAll=!0);this.initElement();this.initEvent();this.initSelectAttr();this.render()},initEvent:function(){this.listenTo(this.model,"sync",this.success);this.listenTo(this.model,"error",this.error);this.listenTo(this.model,
"invalid",this.matchErrorTip);this.listenTo(this.modelSKU,"sync",this.successSKU);this.listenTo(this.modelSKU,"error",this.errorSKU);this.modelSKU.on("SKU:change:fetch",this.requestSKU,this);this.model.on("SKU:change:wholesale",this.changeWholesale,this);this.model.on("SKU:change:wholesaleLine",this.changeWholesaleLine,this);this.model.on("SKU:change:selected",this.changeSkuInfo,this);this.model.on("SKU:change:fetch",this.request,this);this.model.on("SKU:change:country",this.changeCountry,this);this.model.on("SKU:change:enableSale",
this.changeEnableSale,this);1<$("#inventoryLocationSelectWarp ul li").length&&(this.$el.on("mouseenter","#inventoryLocationSelectWarp",function(b){$(this).addClass("hover")}),this.$el.on("mouseleave","#inventoryLocationSelectWarp",function(b){$(this).removeClass("hover")}))},initElement:function(){this.$html=this.$html||$("html");this.$window=this.$window||$(window);this.$quantity=$("#quantity");this.$skuINT=this.$el.find(this.option.skuINT);this.$skuMd5INT=this.$el.find(this.option.skuMd5INT);this.colorListItems=
this.option.colorList;this.colorListHiddenInput=this.option.colorListHiddenInput},render:function(){this.AttributeHandler();this.init_menu();this.AttributeListHandler()},getQueryString:function(b){b=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?unescape(b[2]):null},setOption:function(b){this.option={colorList:[],colorListHiddenInput:[],attributeWrap:".js-selectionWrapper",attributeList:".js-selectionWrapper li",priceCls:".js-priceTips",totalCostCls:"",
skuINT:"#selectedSkuVal",skuMd5INT:"#selectedSkuMd5Val",tpl:e,model:new l(b.modelDefaults||{ajaxOptions:{data:{version:1,client:"pc",quantity:$("#quantity").val(),skuId:$("#selectedSkuVal").val(),skuMd5:$("#selectedSkuMd5Val").val(),itemcode:window._itemcode||"",supplierId:window._toid||"",countryid:$("#hiddenCountry").val(),shippingtypeid:$("#_cur_shippingtypeid").val(),inventoryLocationCountryId:$("#inventoryLocationCountryId").val()||"CN",commtype:$("#commtype").val(),isAttrClick:!1}}}),modelSKU:new f({ajaxOptions:{data:{itemcode:window._itemcode||
"",productid:window._pid||"",isdhporttype:window._dhportType||"",countryid:$("#inventoryLocationCountryId").val()}}})};this.option=$.extend(!0,{},this.option,b||{})},request:function(b){b=$.extend(_.clone(this.model.ajaxOptions.data),b||{});this.model.fetch({data:b})},requestSKU:function(b){b=$.extend(_.clone(this.modelSKU.ajaxOptions.data),b||{});this.modelSKU.fetch({data:b})},changeStockIn:function(b){var c=$(b.currentTarget);b=c.attr("vhidden");c=c.attr("vname");this.model.setQuantity(this.model.get("minOrder")||
$("#quantity").val(),{fetch:!1});$("#quantity").val(this.model.get("minOrder"));this.modelSKU.trigger("SKU:change:fetch",{countryid:b,countryName:c})},errorSKU:function(b,c,d){},successSKU:function(b,c,d){c=this.model;c.get("skuMd5");var e=c.get("skuMd5")||$("#selectedSkuMd5Val").val();if(200==b.get("code")){var f=b.get("skuMd5Info");b.get("skuAttrInfo");b=f[e];d=d.data.countryid;this.SKUMD5_init?(c.setMaxOrder(b.maxOrder),c.setMinOrder(b.minOrder),c.setBuyerNum(b.buyerMaxOrder),c.trigger("SKU:change:selected",
{skuMd5:e},b),this.model.setStockInCountryId(d),$("#inventoryLocationSelectWarp").removeClass("hover"),$("#inventoryLocationSelect").attr("class",d.toLowerCase()).html(d),$("#inventoryLocationCountryId").val(d),c.set({attrName:b.attrName})):(this.SKUMD5_init=!0,c.attributes.minOrder=b.minOrder,c.attributes.maxOrder=b.maxOrder,c.attributes.buyerNum=b.buyerMaxOrder,c.attributes.enableSale=b.enableSale,c.attributes.stockInCountry=b.selectCountry,c.attributes.stock=b.stock,$("#inventoryLocationSelectWarp").removeClass("hover"),
$("#inventoryLocationSelect").attr("class",d.toLowerCase()).html(d),$("#inventoryLocationCountryId").val(d));b.maxOrder&&this.$el.find("#quantity").val(b.minOrder)}},success:function(b,c,d){if(200==b.get("code")){this.changePrice({price:b.get("price"),otherPrice:b.get("otherPrice"),originalPrice:b.get("originalPrice"),savePrice:null,otherTotalCost:b.get("otherTotalCost")||"",totalCost:b.get("totalCost"),shippingCost:b.get("shippingCost"),quantity:b.get("quantity")||$("#quantity").val()});this.attrSelecetAll&&
"0"!=this.model.get("enableSale")&&this.showTotalCost();d.data.isAttrClick&&(this.model.ajaxOptions.data.isAttrClick=!1,b.trigger("SKU:change:wholesale",{wholesale:b.get("wholesale")}));d=$("#isvipprod").val();var e=$("#radixUnit").val(),f=1<e?$("#plural").val():$("#measurename").val();if(b.get("isSkuPromo"))if(c.promo_dto){$("#js-priceTips").text(c.webprice);b=c.promo_dto.typeId;var h=c.promo_dto.promoTypeId,g;g=9==b||3==b?9==b?c.promo_dto.promName:"Time Limited Sale":c.promo_dto.promName;var m=
'<strong class="w-price unit-linethrough">US $'+c.promo_price_ori+"/ "+(1<e?$L("detail_tips_lot"):f)+" </strong></div>";1<e&&(m+='<span class="lot-pie">'+e+" "+f+"  &nbsp;/&nbsp; "+$L("detail_tips_lot")+"</span>");0==h?(h=c.promo_dto.discountRate+"|"+c.promo_start_date+"|"+c.promo_end_date,f=c.promo_dto.discountRate+"% OFF",e='<span id="js-discountrate" cssinfo="'+c.promo_dto.className+'" class="'+c.promo_dto.className+'">'+c.promo_dto.discountRate+"</span>"):(h=c.promo_dto.discountRate+"|"+c.promo_start_date+
"|"+c.promo_end_date+"|reduction",f="$"+c.promo_dto.discountRate,e='<span id="js-discountrate" cssinfo="'+c.promo_dto.className+'" class="'+c.promo_dto.className+'"><sup>$</sup>'+c.promo_dto.discountRate+"</span>");$(".old-price").html(m);$("#js-discountrate")&&$("#js-discountrate").remove();$("#bimgContainer").append(e);0<$(".discountbox").length&&($(".discountbox").remove(),$(".vip-club").remove());g=3==b||9==b?1==d?'<div class="vip-club clearfix"><ul class="discountbox redstyle"><li><span class="discountname"><span class="namebg"></span><span class="namec">'+
g+'</span></span><span class="discountnum"><span>'+f+',</span></span><span style="" data-endtime="'+c.promo_dto.promEndDate.time+'" id="dh-discountTime" class="discountime"><span class="dh-time"></span> left! </span></li><li class="vip-clubcon"><span class="discountname"><span class="namebg"></span><span class="namec">'+$L("detail_tips_viptag")+'</span></span><span class="vip-content">'+$L("detail_tips_vipdec")+"</span></li></ul></div>":'<div class="discountbox redstyle clearfix"><span class="discountname"><span class="namebg"></span><span class="namec">'+
g+'</span></span><span class="discountnum"><span>'+f+',</span></span><span style="" data-endtime="'+c.promo_dto.promEndDate.time+'" id="dh-discountTime" class="discountime"><span class="dh-time"></span> left! </span></div>':1==d?'<div class="vip-club clearfix"><ul class="discountbox"><li><span class="discountname"><span class="namebg"></span><span class="namec">'+g+'</span></span><span  discountCountDown="'+h+'"></span></li><li class="vip-clubcon"><span class="discountname"><span class="namebg"></span><span class="namec">'+
$L("detail_tips_viptag")+'</span></span><span class="vip-content">'+$L("detail_tips_vipdec")+"</span></li></ul></div>":'<div class="discountbox clearfix"><span class="discountname"><span class="namebg"></span><span class="namec">'+g+'</span></span><span  discountCountDown="'+h+'"></span></div>';0<$(".key-info .hinfo").length?$(".key-info .hinfo").after(g):$(".key-info .proname").after(g);if(3==b||9==b){var n=$("#dh-discountTime");c=+new Date(n.data("endtime"));0<n.length&&(window.DownTime&&(window.DownTime.clearTime(),
window.DownTime=null),window.DownTime=new getCountdownTime({endTime:c,type:"weekend",formatDay:!1,returnData:function(b){n.find("span.dh-time").html(b.hour+"h&nbsp;"+b.minute+"m&nbsp;"+b.seconds+"s").andSelf().show()}}))}else 0<$("span[discountCountDown]").length&&(DH_CountDownInterface.getServerTime(),salesPromotionCountDown("span","discountCountDown"))}else $("#js-discountrate").remove(),$(".old-price").html(""),0<$(".discountbox").length?($(".discountbox").remove(),$(".vip-club").remove()):$("#js-discountrate").remove(),
1==d&&(m='<strong class="w-price unit-linethrough">US $'+c.vip_price_ori+"/ "+(1<e?$L("detail_tips_lot"):f)+" </strong></div>",g='<div class="vip-club clearfix"><ul class="discountbox redstyle"><li class="vip-clubcon"><span class="discountname"><span class="namebg"></span><span class="namec">'+$L("detail_tips_viptag")+'</span></span><span class="vip-content">'+$L("detail_tips_vipdec2")+"</span></li></ul></div>"),1<e&&(m='<span class="lot-pie">'+e+" "+f+"  &nbsp;/&nbsp; "+$L("detail_tips_lot")+"</span>"),
$(".old-price").html(m?m:""),0<$(".key-info .hinfo").length?$(".key-info .hinfo").after(g?g:""):$(".key-info .proname").after(g?g:"")}},matchErrorTip:function(b,c,d){b=c.split("-");d||(d={},d.type=b[1]);if("quantity"==d.type||"stock"==d.type)switch(b[1]){case "maxOrder":this.setViewQuantity({msg:$L("detail_valid_productInfoMaxOrder",{order:b[2]}),quantity:b[2]});break;case "minOrder":this.setViewQuantity({msg:$L("detail_valid_productInfoMinOrder",{order:b[2]}),quantity:b[2]});break;case "customStock":this.setViewQuantity({msg:$L("detail_valid_customStock",
{customStock:b[2]}),quantity:b[2]});break;case "stock":this.setViewQuantity({msg:$L("detail_valid_productInfoMaxStock",{stock:b[2]}),quantity:b[2]});break;case "number":this.setViewQuantity({msg:$L("detail_valid_productInfoNumber"),quantity:b[2]});break;case "specificationOut":this.specificationOut({quantity:b[2]});break;case "soldOut":this.setSoldOut({quantity:b[2]})}},setViewQuantity:function(b){this.controlErrorStyle({formElement:null,errorElement:$("#maxOrderError"),errorText:b.msg,autoHide:!0,
show:!0});this.$quantity.val(b.quantity);this.model.setQuantity(b.quantity,{fetch:!0});this.model.trigger("SKU:change:wholesaleLine",{quantity:b.quantity});this.changeUnit(b.quantity)},setSoldOut:function(b){$("#inventoryQtyNum_new").html(b.quantity||0);$("#quantity").attr("disabled","disabled");$("#quantity").val("");$("#qtynote").css({display:"block"});$("#cannotadd").css({display:"inline-block"});$("#addToCartButton").css({display:"none"});$("#buyeritnowspan").css({display:"none"});this.hideTotalCost()},
controlErrorStyle:function(b){var c=b.formElement,d=b.errorElement,e=b.errorText,f=b.autoHide;if(!0===b.show){if(c&&c.addClass(this.cErrorTipStyle),d.html(e).show(),f)var h=setTimeout(function(){d.hide();clearTimeout(h)},3E3)}else c.removeClass(this.cErrorTipStyle),d.html(e).hide()},changeUnit:function(b){var c=this.$el.find(".purchase-quantity-lot");1<b?c.html(c.attr("unit2")):c.html(c.attr("unit1"))},quantityPress:function(b){var c=$(b.target);if(13==b.keyCode)return c.blur(),!1;8!=b.keyCode&&$("#quantityEnter").css({display:"block"})},
showTotalCost:function(){this.specificationIn();$("#curSelection").show().parent().next().show();$("#_show_buyernewprice").show().siblings("div").hide();$("#otherTotalCost").show()},hideTotalCost:function(){$("#curSelection").hide().parent().next().hide();$("#_show_buyernewprice").hide().siblings("div").show();$("#otherTotalCost").hide()},specificationOut:function(b){$("#inventoryQtyNum_new").html(b.quantity||0);$("#quantity").attr("disabled","disabled");$("#qtynote").show();$("#maxOrderError").hide();
$("#cannotadd").css({display:"inline-block"});$("#addToCartButton").hide();$("#buyeritnowspan").hide();this.hideTotalCost()},specificationIn:function(){$("#quantity").removeAttr("disabled");$("#qtynote").hide();$("#cannotadd").hide();$("#addToCartButton").show();$("#buyeritnowspan").show()},fnChangeUrl:function(){var b=location.href,c=this.attrValCache,d="",e;for(e in c)d+=e+":"+c[e]+",";d=d.substring(0,d.length-1);window.history.replaceState&&(-1!=b.indexOf("#")?(localUrl_part1=b.split("#")[0],localUrl_part2=
b.split("#")[1],location.search&&(localUrl_part1=localUrl_part1.split("?")[0]),window.history.replaceState({},"",localUrl_part1+"?skuAttr="+d+"#"+localUrl_part2)):location.search?(localUrl_part1=b.split("?")[0],window.history.replaceState({},"",localUrl_part1+"?skuAttr="+d)):window.history.replaceState({},"",b+"?skuAttr="+d))},attrClickHandler:function(b){var c=$(b.currentTarget),d=c.attr("vhidden"),e=c.attr("attrid");b=c.attr("attrvalid");var f=c.attr("csname");this.attrValCache[e]=b;this.fnChangeUrl();
if("js-selectedAttr"!=c.attr("selectedattr")||c.hasClass("js-hiddenLi"))b=this.model.get("minOrder"),this.model.attributes.quantity=b;b={quantity:this.model.get("quantity"),skuId:"",skuMd5:"",itemcode:this.model.get("itemcode"),supplierId:this.model.get("supplierId"),countryid:$("#hiddenCountry").val(),shippingtypeid:this.model.get("shippingtypeid"),commtype:this.model.get("commtype")||"commissionCV2",inventoryLocationCountryId:$("#inventoryLocationCountryId").val()||this.model.get("stockInCountry")};
$("#selectOption"+e).html("["+f+"]");e=c.closest("ul.js-selectionWrapper");c.hasClass("js-hiddenLi")?(c.parents("ul").find("input[name=buyattrval]").val(d),c.parents("ul").find("input[name=buyattrval]").attr("key",d),c.addClass("color-selected").attr("selectedattr","js-selectedAttr"),c.siblings("li").removeClass("color-selected").removeAttr("selectedattr").children("i").remove(),c.parents(".js-moreAttr").siblings("li").removeClass("color-selected").removeAttr("selectedattr").children("i").remove(),
e=c.closest("li.js-moreAttr"),c.removeClass("color-selected").children("i").remove(),e.find("i").length?e.find("span.moreAttr-btn").addClass("more-hover color-selected"):e.find("span.moreAttr-btn").addClass("more-hover color-selected").append("<i></i>"),$.trim(c.find("span").text())?e.find("span.color-more").html(c.find("span").html()):e.find("span.color-more").html(c.find("img").clone()),e.find("div.colorattr-list").hide()):c.closest(".js-selection").length?(f=c.find("span").text(),e=c.closest(".js-selectionWrapper"),
e.find(".unit-price-button").html(f),e.closest(".key-info-ri").removeClass("zIndex").find(".opt-layer").hide(),c.parents("ul").find("input[name=buyattrval]").val(d),c.parents("ul").find("input[name=buyattrval]").attr("key",d),c.addClass("color-selected").attr("selectedattr","js-selectedAttr"),c.siblings("li").removeClass("color-selected").removeAttr("selectedattr"),c.siblings(".customOptionsYesButton").length&&$("#customSizeInfo, a.customOptionsYesButton").hide()):(c.parents("ul").find("input[name=buyattrval]").val(d),
c.parents("ul").find("input[name=buyattrval]").attr("key",d),c.addClass("color-selected").attr("selectedattr","js-selectedAttr").append("<i></i>"),c.siblings("li").removeClass("color-selected").removeAttr("selectedattr").children("i").remove(),c.siblings(".customOptionsYesButton").length&&$("#customSizeInfo, a.customOptionsYesButton").hide(),e.find(".moreAttr-btn").removeClass("color-selected more-hover").find(".color-more").html("more").siblings("i").remove());c.parents(".js-selectionWrapper").siblings(".js-attr-error").hide();
c=this.getAttributeSelect();c.selectAll&&(d=this.getSelectSkuInfo(c.attr),c=this.modelSKU.get("skuMd5Info")[d.skuMd5],this.model.set("skuId",c.skuId),this.model.set("skuMd5",c.skuMd5),this.model.ajaxOptions.data=$.extend(!0,{},this.model.ajaxOptions.data,{skuId:c.skuId,skuMd5:c.skuMd5}),this.model.setEnableSale(c.enableSale),0==c.enableSale?(this.specificationOut({quantity:c.stock||0}),$("#quantity").addClass("disableqty")):($("#quantity").removeClass("disableqty"),b.skuId=d.skuId,b.skuMd5=d.skuMd5,
b.isAttrClick=!0,window.history.replaceState&&(d=location.href,-1!=d.indexOf("#")?(localUrl_part1=d.split("#")[0],localUrl_part2=d.split("#")[1],location.search&&(localUrl_part1=localUrl_part1.split("?")[0]),window.history.replaceState({},"",localUrl_part1+"?skuid="+b.skuId+"#"+localUrl_part2)):location.search?(localUrl_part1=d.split("?")[0],window.history.replaceState({},"",localUrl_part1+"?skuid="+b.skuId)):window.history.replaceState({},"",d+"?skuid="+b.skuId)),c.enableSale?(this.model.ajaxOptions.data=
$.extend(!0,{},this.model.ajaxOptions.data,b),this.model.attributes.stock=c.stock,this.model.setQuantity(c.minOrder||$("#quantity").val(),{fetch:!1}),b.quantity=this.model.get("quantity")||$("#quantity").val(),this.model.trigger("SKU:change:selected",b,c),this.attrSelecetAll=!0):this.hideTotalCost()))},initSelectAttr:function(){var b=$("input[name=_currentSelectValue]"),c="";if(0<b.length){for(var d=0;d<b.length;d++)if(d==b.length-1)var e=b[d].value,e=e.split("|"),c=c+('<span class="curselectitem">'+
e[0]+'<span id="selectOption'+$.trim(e[2])+'">['+$.trim(e[1])+"]</span></span>");else e=b[d].value,e=e.split("|"),c+='<span class="curselectitem">'+e[0]+'<span id="selectOption'+$.trim(e[2])+'">['+$.trim(e[1])+"]</span>,</span>";$("#curSelection").html(c)}},getAttributeSelect:function(){var b=this.$el.find("input[name=buyattrval]");selectAttr=[];flag=!0;b.each(function(b,c){var d=$(c).attr("key");if(""==d||void 0==d)flag=!1;selectAttr.push($(c).attr("key"))});return{attr:selectAttr,selectAll:flag}},
getSelectSkuInfo:function(b){var c=this.modelSKU.get("skuAttrInfo");b=b.join(";").replace(/\_+/ig,":");return c[b]},setSelectSkuInfo:function(b){this.$skuINT.val(b.skuId);this.$skuMd5INT.val(b.skuMd5)},changePrice:function(b){var c=Number(b.price).toFixed(2),d=c/($("#radixUnit").val()||1),e=Number(b.otherPrice).toFixed(2),f=Number(b.originalPrice).toFixed(2),g=Number(b.totalCost).toFixed(2),h=Number(b.otherTotalCost).toFixed(2),l=Number(b.shippingCost).toFixed(2);this.$el.find(".new-lot-show-pieces .op").html(d.toFixed(2));
this.$el.find("#js-priceTips").html(c);this.$el.find(".js-tuangou-discountrate").html(100*(1-c/f)+"%");this.$el.find(".js-save-price").html($L("common_price",{price:(f-c).toFixed(2)}));this.$el.find(".js-yuanjia-tuangou").html(f);b.otherPrice&&this.$el.find("#js-multiPrice").html(e);b.totalCost&&this.$el.find("#_show_buyernewprice").html($L("common_price",{price:g}));b.otherTotalCost&&this.$el.find("#otherTotalCost").html($L("common_otherPrice",{price:h}));this.$el.find("#shippingcost").html($L("common_price",
{price:l}));this.changeUnit(b.quantity)},changeSkuInfo:function(b,c){var d=this.model;try{d.set("skuId",c.skuId),this.$skuINT.val(c.skuId),this.$skuMd5INT.val(c.skuMd5),d.set("skuMd5",c.skuMd5),this.$el.find("#leadingTime").html(c.deliveryTime),d.set("deliveryTime",c.deliveryTime),d.setEnableSale(c.enableSale),0==c.enableSale&&this.specificationOut({quantity:d.get("stock")||0}),d.setStock(c.stock,{validate:!0}),this.$el.find("#inventoryQtyNum_new").html(c.stock)}catch(p){console.log(p)}},changeWholesale:function(b){var c=
$(g.wrap.join(""));b=b.wholesale;for(var e=[],f=!0,h=0,l=b.length;h<l;h++)0==h&&(getStProdFun(b[h].promDiscountPrice.toFixed(2)),f=b[h].promDiscountPrice.toFixed(2)==b[h].discountPrice.toFixed(2)?!1:!0),e.push(d(g.item.join(""),{nums:1<b[h].endQty?b[h].startQty+" - "+b[h].endQty:b[h].startQty+" + ",start:b[h].startQty,end:b[h].endQty,price:b[h].promDiscountPrice.toFixed(2),originalPrice:b[h].discountPrice.toFixed(2),index:h}));c.find(".js-wholesale-list").html(e.join(""));f&&c.addClass("lineprice");
this.$el.find(".js-wholesale-wrap").html(c);__ws.changeWholesal()},changeCountry:function(b){if(b.shipToCountryName&&b.expressTypeName&&b.shippingtypeid){var c=b.shipToCountryName+" Via "+b.expressTypeName,d=b.deliverytimeProcessingShipMin+" and "+b.deliverytimeProcessingShipMax;0<b.shippingCost?($("#freeshipping").hide(),$("#shippingcost").html($L("common_price",{price:b.shippingCost})).show()):($("#shippingcost").hide(),$("#freeshipping").html($L("common_freeShipping")).show());this.$el.find("#shippingCostChooseButton").html(c);
this.model.setShippingTypeId(b.shippingtypeid);$("#_cur_shippingtypeid").val(b.shippingtypeid);this.model.setShipToCountry(b.shipToCountry);$("#hiddenCountry").val(b.shipToCountry);b.deliverytimeProcessingShipMin&&$("#deliverytimeProcessing").html(d);b.promiseDays&&$("#promisedays").html(b.promiseDays)}b.stockInCountry&&b.stockInCountryName&&(this.model.setStockInCountryId(b.stockInCountry),$("#inventoryLocationCountryId").val(b.stockInCountry),this.$el.find("#inventoryLocationSelect").html(b.stockInCountry).attr("class",
b.stockInCountry.toLowerCase()));"US"!=b.shipToCountry?($("#stProductDiv").hide(),$("#stProductDiv .this").removeClass("this")):getStProdFun()},checkQuantity:function(b){b=$(b.target);var c;$("#quantityEnter").hide();c=b.val();/^[1-9]([0-9]{0,})|(\.[0-9]{0,})$/.test(c)&&(c=parseInt(c),b.val(c));this.changeUnit(b.val());this.model.setQuantity(b.val(),{fetch:!0})},changeWholesaleLine:function(b){$("#selectedSkuVal").val();var c=$(".js-wholesale-wrap"),c=$(".js-wholesale-list >li",c),d=this.$quantity;
b=b.quantity;d.val(b);c.each(function(c,d){var e=$(d),f=e.attr("nums"),g,h,f=f&&1<f.length?f:"1",f=f.replace(/\s/ig,"").split("-");g=parseInt(f[0]);h=parseInt(f[1]);1<f.length&&0<h?b<=h&&g<=b&&e.addClass("current").siblings().removeClass("current"):g<=b&&e.addClass("current").siblings().removeClass("current")})},AttributeListHandler:function(){for(var b=0;b<this.colorListItems.length;b++)if($("#"+this.colorListItems[b])[0]){var c=$("#"+this.colorListItems[b]),d=c.find(".js-hiddenLi"),c=c.find(".colorattr-list ul");
d.length&&0==c.children().length&&(d.removeClass("color-selected"),c.html(d.show()))}},AttributeHandler:function(){},init_menu:function(){(function(b){(function(){$(".head-Shop-by").bind("mouseenter",function(){$(".head-Shop-by .head-shop").addClass("head-active");$(".head-Shop-by .head-Shop-List").show()}).bind("mouseleave",function(){$(".head-Shop-by .head-shop").removeClass("head-active");$(".head-Shop-by .head-Shop-List").hide()});$(".wholesalePcon").bind("mouseenter",function(){$("#WholesalePLayyer").show()}).bind("mouseleave",
function(){$("#WholesalePLayyer").hide()});$("#productdisplayForm").delegate("#quantity","click",function(){}).delegate("#quantity","focus",function(){$(this).css({color:"#333"});clearTimeout("");var b=$("#WholesalePriceList").clone().attr("id","js-priceTab");b.find("thead").remove();b.find("tbody tr:first").addClass("firstline")}).delegate("#quantity","blur",function(){""==$.trim($(this).val())&&$(this).val($(this).attr("placeholder"));$(this).val()==$(this).attr("placeholder")&&$(this).css({color:"#999"})});
$("#productdisplayForm").delegate("#js-priceTab tbody tr","click",function(){var c=($(this).attr("nums")||"1").split("-");b.getPriceRange();$.trim(c[0])&&$("#quantity").css({color:"#333"}).val($.trim(c[0]))});$("html, body").click(function(b){b=$(b.target);0==b.closest("#WholesalePLayyer").length&&$("#WholesalePLayyer").hide();0==b.closest(".select-moreattr").length&&$(".colorattr-list").hide().closest(".key-info-ri").addClass("zIndex");0==b.closest(".js-selectionWrapper").length&&$(".opt-layer").hide().closest(".key-info-ri").removeClass("zIndex")});
$(".select-moreattr").delegate(".color-more","click",function(b){$(".colorattr-list").hide().closest(".key-info-ri").removeClass("zIndex");$(this).closest(".key-info-ri").addClass("zIndex");$(this).parent().siblings(".colorattr-list").show();b.stopPropagation()});$(".js-selectionWrapper").delegate(".unit-price-button","click",function(b){$(".opt-layer").hide().closest(".key-info-ri").removeClass("zIndex");$(this).siblings(".opt-layer").show().closest(".key-info-ri").addClass("zIndex");b.stopPropagation()})})()})(window)}})});
define("appDetail/shippingModel",["common/config","lib/backbone","tools/template"],function(b,c,d){var f=c.Model.extend({defaults:function(){return{code:-1,skuId:"",skuMd5:"",shipToCountry:"",shipToCountryName:"",stockInCountry:"",stockInCountryName:"",shippingtypeid:$("#_cur_shippingtypeid").val(),expressTypeName:"",shipToCountryList:[],stockInCountryList:[],expressTypeList:[{shippingtypeid:"",expressTypeName:"",imgSrc:"",originCountry:"",supportTrack:"",deliverytime:"",shippingCost:"",deliverytimeProcessingShipMin:"",
deliverytimeProcessingShipMax:"",promiseDays:""}]}},initialize:function(b){this.setOption(b);this.ajaxOptions=this.options.ajaxOptions;this.skuInfo=window.skujson||this.options.skuInfo||{};this.skuInfoMd5=window.skuJsonMd5||this.options.skuJsonMd5||{}},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwURL+"/product/productshippingajax.do",data:{version:1,client:"pc",itemcode:window._itemcode||"",supplierId:window._toid||"",skuId:$("#selectedSkuVal").val(),skuMd5:$("#selectedSkuMd5Val").val(),
quantity:$("#quantity").val()||"",isdhporttype:window._dhportType||"",countryid:$("#hiddenCountry").val(),shippingtypeid:$("#_cur_shippingtypeid").val()||"",inventoryLocationCountryId:$("#inventoryLocationCountryId").val(),commtype:$("#commtype").val()||"commissionCV2",isvipprod:$("#isvipprod").val(),tuanGouDays:""},type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0}};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,d,f){this.__params=$.extend(!0,
{},this.ajaxOptions,f||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},f))},parse:function(c,d){this.ajaxOptions.data=$.extend(!0,{},this.ajaxOptions.data,d.data||{});var e={},f=d.data;if(!c)return e;e.code=200;e.skuId=f.skuId;e.skuMd5=f.skuMd5;e.shipToCountry=f.countryid;e.stockInCountry=f.inventoryLocationCountryId;e.shippingtypeid=f.shippingtypeid||$("#_cur_shippingtypeid").val();e.expressTypeName=this.get("expressTypeList").expressTypeName||"";e.shipToCountryList=
[];e.stockInCountryList=[];e.expressTypeList=[];$.each(c.shippingCostList||[],function(c,d){e.expressTypeList.push({shippingtypeid:d.shippingtype,expressTypeName:d.expressType,imgSrc:d.webimage?b.staticImage+"/b/shippingcost/new/"+d.webimage:!1,originCountry:d.whCountryName,supportTrack:d.supportTrack,deliverytime:d.deliverytime,shippingCost:d.shipcostfinal2,deliverytimeProcessingShipMin:d.deliverytimeProcessingShipMin,deliverytimeProcessingShipMax:d.deliverytimeProcessingShipMax,promiseDays:d.promiseDays})});
return e},setExpress:function(b,c){c=c||!0;this.set({shippingtypeid:b.shippingtypeid},{silent:c,validate:!1,type:"shippingtypeid"});this.set({expressTypeName:b.expressTypeName},{silent:c,validate:!1,type:"expressTypeName"})},setCountry:function(b,c){c=c||!0;this.set({shipToCountry:b.shipToCountry},{silent:c,validate:!1,type:"shipToCountry"});this.set({shipToCountryName:b.shipToCountryName},{silent:c,validate:!1,type:"shipToCountryName"})},setStockIn:function(b,c){c=c||!0;this.set({stockInCountry:b.stockInCountry},
{silent:c,validate:!1,type:"stockInCountry"});this.set({stockInCountryName:b.stockInCountryName},{silent:c,validate:!1,type:"stockInCountryName"})},setTimes:function(b,c){c=c||!0;this.set({deliverytimeProcessingShipMin:b.deliverytimeProcessingShipMin},{silent:c,validate:!1,type:"deliverytimeProcessingShipMin"});this.set({deliverytimeProcessingShipMax:b.deliverytimeProcessingShipMax},{silent:c,validate:!1,type:"deliverytimeProcessingShipMax"});this.set({promiseDays:b.promiseDays},{silent:c,validate:!1,
type:"promiseDays"})},setShippingCost:function(b,c){this.set({shippingCost:b.shippingCost},{silent:c||!0,validate:!1,type:"shippingCost"})}});return c.View.extend({el:"#ShippingCostChoose",events:{"click #listCountry li":"CountryClick","click #chooseShippingMethod ul#chooseLeft li":"shippintTypeClick","click #OKShipping":"OKShipping","click #ShippingCostChooseClose":"cancel","click #supportShippingtype .choose .sortdefault":"sortExpress"},initialize:function(b){this.setOption(b||{});this.model=new f;
this.initElment();this.initEvent()},initElment:function(){this.$expressList=this.$el.find(this.option.expressList);this.$expressListWrap=this.$el.find(this.option.expressListWrap);this.$expressLoading=this.$el.find(this.option.expressLoading);this.$chooseShippingCannot=this.$el.find(this.option.chooseShippingCannot);this.$cannotCountryName=this.$el.find(this.option.cannotCountryName)},initEvent:function(){this.listenTo(this.model,"sync",this.success);this.listenTo(this.model,"error",this.error);this.model.on("Ship:change:shipCountry",
this.CountryClick,this);this.model.on("Ship:change:stockCountry",this.StockInClick,this);this.model.on("Ship:change:fetch",this.request,this)},render:function(){},setOption:function(b){this.option={StockInWrap:"#inventoryLocationShippingSelect",expressListWrap:"#chooseShippingMethod",expressList:"#chooseShippingMethod #chooseLeft",expressLoading:"#ShipLoading",chooseShippingCannot:"#chooseShippingCannot",cannotCountryName:"#cannotCountryName",textCountry:"#textCountry",countryidclass:"#countryidclass"};
this.option=$.extend(!0,{},this.option,b||{})},success:function(b,c,d){200==b.get("code")&&this.changeExpressList(b.get("expressTypeList"),c.countryid,c.inventoryLocationCountryId)},error:function(b,c,d){},changeExpressList:function(b,c,f){var e=['<li class="<% if(isCurr == true){ %>current<% } %>"  vHidden="<%=shippingtypeid%>"><div class="radiowrap"><input name="shippingtypeid" type="radio" vHidden="<%=shippingtypeid%>" <% if(isCurr == true){ %>checked="checked"<% } %>/></div><label for=stRadio<%=i%>><% if (!!imgSrc) { %><img src="<%=imgSrc%>" title="<%=expressTypeName%>" width="30" height="80" /><% }else{%><span title="<%=expressTypeName%>"><%=expressTypeName%></span><% } %></label><div class="origin"><%=originCountry%></div><% if(supportTrack) {%>',
'<div class="state">'+$L("detail_tips_TrackingAvailable")+'<% }else{%><div class="state no-text">'+$L("detail_tips_TrackingUnavailable")+"<% } %>","</div>",'<div class="days"><%=deliverytime%> '+$L("search_tips_days")+" </div>","<% if (shippingCost == 0) { %>",'<div class="freeshipping">'+$L("common_freeShipping")+"</div>",'<% }else{%><div class="tprice">US $<%=shippingCost%></div><% } %><% if (shippingtypeid == "DHLINK_P_Gate") { %>','<div class="epacketnote"><div class="arrowtop">&nbsp;</div><span>'+
$L("detail_msg_DHLinkNoto")+"</span></div>","<% } %></li>"].join(""),g=b.length,l=[],p,t={};if(0==g)this.$el.find(this.option.cannotCountryName).html(this.$el.find("#listCountry li[vHidden="+c+"]").attr("vname")),this.$el.find(this.option.expressListWrap).hide(),this.$el.find(this.option.expressLoading).hide(),this.$el.find(this.option.chooseShippingCannot).show();else{for(var q=0;q<g;q++)b[q].shippingtypeid==this.model.get("shippingtypeid")&&(p=!0);for(q=0;q<g;q++)b[q].i=q,b[q].shippingtypeid==this.model.get("shippingtypeid")||
1==g?(b[q].isCurr=!0,t=b[q],void 0==b[q].supportTrack&&(b[q].supportTrack=!0)):b[q].isCurr=!1,p||0!=q||(b[q].isCurr=!0,t=b[q]),l.push(d(e,b[q]));g?(this.$el.find(this.option.expressList).html(l.join("")),this.$el.find(this.option.expressListWrap).show()):this.$el.find(this.option.expressListWrap).hide();this.$el.find(this.option.expressLoading).hide();this.$el.find(this.option.chooseShippingCannot).hide();this.model.setExpress({shippingtypeid:t.shippingtypeid,expressTypeName:t.expressTypeName});this.model.setStockIn({stockInCountry:f,
stockInCountryName:this.$el.find("#listCountry li[vHidden="+f+"]").attr("vname")});this.model.setCountry({shipToCountry:c,shipToCountryName:this.$el.find("#listCountry li[vHidden="+c+"]").attr("vname")});this.model.setTimes(t);this.model.setShippingCost({shippingCost:t.shippingCost})}},CountryClick:function(b){var c=b.id;b=b.name;this.$el.find(this.option.textCountry).val(b);this.$el.find(this.option.countryidclass).attr("class",c.toLowerCase());this.$el.find(this.option.expressListWrap).hide();this.$el.find(this.option.expressList).html("");
this.$el.find(this.option.expressLoading).show();this.model.setCountry({shipToCountry:c,shipToCountryName:b});this.model.trigger("Ship:change:fetch",{countryid:c,countryName:b,shippingtypeid:this.model.get("shippingtypeid")})},StockInClick:function(b){var c=b.id;b=b.name;this.$el.find("#textInventory").val(b);this.$el.find("#inventoryidclass").attr("class",c.toLowerCase());this.$el.find(this.option.expressListWrap).hide();this.$el.find(this.option.expressList).html("");this.$el.find(this.option.expressLoading).show();
this.model.setStockIn({stockInCountry:c,stockInCountryName:b});this.model.trigger("Ship:change:fetch",{inventoryLocationCountryId:c,stockInCountryName:b,shippingtypeid:this.model.get("shippingtypeid")})},shippintTypeClick:function(b){b=$(b.currentTarget);var c=b.attr("vHidden"),d=this.model.get("expressTypeList"),e={};$.each(d,function(b,d){d.shippingtypeid==c&&(e=d)});b.addClass("current").find("input[type=radio]").attr("checked",!0);b.siblings().removeClass("current").find("input[type=radio]").removeAttr("checked");
this.model.setExpress(e);this.model.setTimes(e);this.model.setShippingCost({shippingCost:e.shippingCost})},sortExpress:function(b){b=$(b.currentTarget);$("#supportShippingtype .choose  li");var c=$("#chooseLeft  > li");if(!(2>c.length)){var d=[],e=b.index()+1,f=b.attr("id");$.each(c,function(b){d[b]=c[b]});b.hasClass("sortasc")?(d.reverse(),b.removeClass("sortasc"),b.addClass("sortdesc")):(d.sort(this.SortStr(e,f)),$(".sortdesc").removeClass("sortdesc"),$(".sortasc").removeClass("sortasc"),b.addClass("sortasc"));
var n=document.createDocumentFragment();$.each(d,function(b){n.appendChild(d[b])});$("#chooseLeft").append(n)}},SortStr:function(b,c){return function(d,e){var f;$(d).find(":nth-child("+b+")").text();var g;$(e).find(":nth-child("+b+")").text();var h,l;if("SortDelivery"==c)return g=$(d).find(":nth-child("+b+")").text().indexOf("-"),l=$(e).find(":nth-child("+b+")").text().indexOf("-"),-1!=g?(f=$(d).find(":nth-child("+b+")").text().substr(g+1),h=$(d).find(":nth-child("+b+")").text().substring(0,g)):(f=
$(d).find(":nth-child("+b+")").text(),h=$(d).find(":nth-child("+b+")").text().substr(g+1)),-1!=l?(g=$(e).find(":nth-child("+b+")").text().substr(l+1),l=$(e).find(":nth-child("+b+")").text().substring(0,l)):(g=$(e).find(":nth-child("+b+")").text(),l=$(e).find(":nth-child("+b+")").text().substr(l+1)),f=parseInt(f),g=parseInt(g),h=parseInt(h),l=parseInt(l),g>f?-1:f>g?1:l>h?-1:h>l?1:0;g=$(d).find(":nth-child("+b+")").text().indexOf("$");l=$(e).find(":nth-child("+b+")").text().indexOf("$");f=-1!=g?$(d).find(":nth-child("+
b+")").text().substr(g+1):0;g=-1!=l?$(e).find(":nth-child("+b+")").text().substr(l+1):0;f=parseFloat(f);g=parseFloat(g);return g>f?-1:f>g?1:0}},OKShipping:function(b){$(b.target);var c=this.model;b=$("#inventoryLocationCountryId").val();c={shipToCountry:c.get("shipToCountry"),shipToCountryName:c.get("shipToCountryName"),stockInCountry:c.get("stockInCountry"),stockInCountryName:c.get("stockInCountryName"),shippingtypeid:c.get("shippingtypeid")||$("#_cur_shippingtypeid").val(),expressTypeName:c.get("expressTypeName"),
deliverytimeProcessingShipMax:c.get("deliverytimeProcessingShipMax"),deliverytimeProcessingShipMin:c.get("deliverytimeProcessingShipMin"),shippingCost:c.get("shippingCost"),promiseDays:c.get("promiseDays")};void 0!=c.deliverytimeProcessingShipMin&&($("#_init_buyer_buyernewprice_not").hide(),c.stockInCountry!=b&&$(".moreorigin li[vHidden="+c.stockInCountry+"]").trigger("click"));DH_sku.model.trigger("SKU:change:country",c);(0==DH_Product_Properties_Color_Object.colorList.length||DH_sku.attrSelecetAll)&&
DH_sku.model.trigger("SKU:change:fetch",{countryid:c.shipToCountry||$("#hiddenCountry").val(),shippingtypeid:c.shippingtypeid||$("#_cur_shippingtypeid").val(),inventoryLocationCountryId:c.stockInCountry||$("#inventoryLocationCountryId").val()||"CN"});this.$el.find(".sortdefault").removeClass("sortdesc sortasc")},request:function(b){b.quantity=$("#quantity").val()||"1";b=$.extend(_.clone(this.model.ajaxOptions.data),b||{});this.model.fetch({data:b})},cancel:function(){this.$el.find(".sortdefault").removeClass("sortdesc sortasc")}})});
define("appDetail/skuInfoModel",["common/config","lib/backbone"],function(b,c){return c.Model.extend({defaults:function(){return{skuAttrInfo:{},skuMd5Info:{}}},initialize:function(b){this.setOption(b);this.ajaxOptions=this.options.ajaxOptions;this.fetch({data:this.ajaxOptions.data})},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwURL+"/product/inventory.do",data:{version:1,client:"pc",itemcode:window._itemcode||"",productid:window._pid||"",isdhporttype:window._dhportType||"",countryid:$("#inventoryLocationCountryId").val()},
type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0}};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,f,e){this.__params=$.extend(!0,{},this.ajaxOptions,e||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},e))},parse:function(b,c){this.ajaxOptions.data=$.extend(!0,{},this.ajaxOptions.data,c.data||{});var d=this.get("code"),f={},l={};b&&(d=200,$.each(b,function(b,c){l[b]={skuId:c.a,skuMd5:c.g,enableSale:c.b,
maxOrder:c.c,minOrder:c.d,stock:c.h,originalStock:c.e,attrName:c.f,buyerMaxOrder:c.h,deliveryTime:c.i};f[c.g]={skuId:c.a,skuMd5:c.g,attrs:b,enableSale:c.b,maxOrder:c.c,minOrder:c.d,stock:c.h,originalStock:c.e,attrName:c.f,buyerMaxOrder:c.h,deliveryTime:c.i}}));return{code:d,skuAttrInfo:l,skuMd5Info:f}}})});"use strict";
define("appDetail/sample",["common/config","lib/backbone","tools/jquery.cookie","tools/dhgate.cookie"],function(b,c,d,f){b=function(b){this.defaults={selector:{container:"#sample_form",form:"#sample_form",button:".j-sample-submit",errorCls:".j-error"},api:{uri:"//shoppingcart.dhgate.com/cart/buyerSampleValidate.do",param:null}};this.setOption(b);this.init()};b.prototype={init:function(){this.container=$(this.option.selector.container);this.form=$(this.option.selector.form);this.$error=$('<div class="j-error" style="display:none;color:red;text-align: right;margin: 0 50px 10px 0;"></div>');
$(".samples-wrap",this.container).prepend(this.$error);0<this.container.length&&this.initEvents()},setOption:function(b){this.option=$.extend({},this.defaults,b)},initEvents:function(){var b=this;$(this.option.selector.button,this.container).bind("click",function(){b.verification()})},verification:function(){if(!this._getSampling){var b=this,c=this.form[0];param={buyerId:$.cookie("b2b_buyerid"),supplierId:c.supplierId.value,itemcode:c.itemcode.value,skuId:c.skuId.value,skuMd5:c.skuMd5.value};api=
this.option.api;this._getSampling=!0;$.ajax({url:api.uri,data:param,dataType:"jsonp",timeout:1E4,success:function(c){0==c.ret?b.submit():2==c.ret?(c=encodeURIComponent(location.href),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+c):(c=1==c.ret?$L("detail_tips_sample_once"):$L("detail_tips_sample_error"),b.$error.html(c).show());b._getSampling=!1},error:function(){b._getSampling=!1}})}},submit:function(){this.form.submit()}};return b});
define("appDetail/bonusCoupon",[],function(){return function(b){function c(){if($.cookie("b2b_b_t_v2"))$.ajax({url:"//dg.dhgate.com/myaccount/coupon/seller_coupon.do",type:"GET",data:{couponCode:g},dataType:"jsonp",success:function(b){200==b.code?($(".mask").show(),$("#bcouppopbox").empty().append(h({couponData:b})).show(),d(),f()):201==b.code?window.open("https://www.dhgate.com/activities/promotion/bonuscoupon.html"):($(".mask").show(),$("#bcouppopbox-faile").empty().append(m({couponData:b})).show(),
d(),f())},error:function(b){window.console&&console.log("\u8bf7\u6c42\u5931\u8d25")}});else{var b=location.href,b=b.replace(/\#.*/ig,"").replace(/\?getcoupon=.*/ig,"").replace(/getcoupon=.*/ig,""),b=b+(-1!=b.indexOf?"?":"&")+"Bcoupcode="+g;location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+encodeURIComponent(b)}}function d(){var b=$("#bcouppopbox"),c=$("#bcouppopbox-faile"),d=$(window).width(),e=$(window).height();b.css({left:(d-630)/2,top:(e-218)/2});c.css({left:(d-482)/2,top:(e-
101)/2})}function f(){$(".js-couponLayer-close").click(function(){$(".mask").hide();$("#bcouppopbox-faile").hide();$("#bcouppopbox").hide()})}function e(b){b=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?unescape(b[2]):null}var g;b={coupontype:11,hourcycle:0,supplierid:$("#supplierid").val()};var l=_.template('<div class="coup-infro coup-infor-bonus bubblingbtn" ><a href="javascript:;" id="getnow" couponcode="<%=couponData.couponCode%>"> Get a US <strong>$<%=couponData.couponAmount%></strong> Coupon </a><span class="line">|</span><a class="viewmore" target="_blank" href="https://www.dhgate.com/activities/promotion/bonuscoupon.html">View More</a></div>'),
h=_.template('<div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Congratulations!</div><p class="alignc">You just received a <b class="orange"> FREE US $<%=couponData.couponAmount%></b> coupon! The coupon Expires: <span class="endtime"> <%=couponData.expireDateFormat%></span></p><div class="coupop-btn alignc"><input type="button" value="Use Coupon Now" class="n-yellow-button js-couponLayer-close" /><a href="//dg.dhgate.com/myaccount/coupon/coupon.do#mydh-summ-cou" class="n-grey-button">View My Coupon</a></div><span class="icon-bclose js-couponLayer-close"></span>'),
m=_.template('<h4 class="vip-dialog-tit">Bonus Coupon</h4><div class="vip-dialog-con"><span class="couopn-dialog-tit orange-text"><b class="icon-big-warning"></b><%=couponData.msg%></span></div><span class="icon-bclose js-couponLayer-close"></span>');$.ajax({url:"//dg.dhgate.com/myaccount/coupon/coupon_list_new.do",type:"GET",data:b,dataType:"jsonp",success:function(b){0==b.status?b.data&&0<b.data.length&&($("#coup-infor-bonus").empty().append(l({couponData:b.data[0]})),g=$("#getnow").attr("couponcode"),
$("#getnow").click(function(){c()}),e("Bcoupcode")&&c()):alert(b.msg)},error:function(b){window.console&&console.log("\u8bf7\u6c42\u5931\u8d25")}})}});
define("appDetail/tpl/fullReductionTpl",[],function(){return{content:['<div class="cross-off bubblingbtn">','<a href="javascript:;">Multi-Tiered Discounts</a>','<div class="newpopcon   cross-pop" style="display: none;"> ',"<ul>","<% _.each(list,function(m,n){ %>",'<li><span>Spend $<%=m.full%>+ , Get  <strong class="orange">$<%=m.reduction%></strong> OFF</span></li>',"<%});%>","</ul>",'<div class="viewmore"><a target="_blank" href="//www.dhgate.com/activities/promotion/fullreduction.html#pd-discount1710">View More</a></div>',
"</div>","</div>"]}});
define("appDetail/fullReduction",["common/config","lib/backbone","tools/template","common/tools/request","appDetail/tpl/fullReductionTpl"],function(b,c,d,f,e){return{getFullReturn:function(){var b={itemcode:$("#itemcode").val(),supplierid:$("#supplierid").val()};f.request({url:"//www.dhgate.com/product/man_fan_list.do",timeout:1E4,data:b,dataType:"jsonp",success:function(b){b.data&&b.data.fullReductionList&&0<b.data.fullReductionList.length&&($("#storepromotion").prepend(d(e.content.join(""),{list:b.data.fullReductionList})),
$("#storepromotion").parent().next(".store-pro").show())},error:function(){}})}}});
requirejs.config({baseUrl:"//js.dhresource.com/multi/src/",urlArgs:"33333333333",paths:{lib:"common/base",tools:"common/tools",ui:"common/ui",tpl:"common/tpl",appDetail:"detail/v1",appStoreDetail:"store/detail",header:"common/header",lang:"common/lang",favorite:"common/favorite"},shim:{"lib/backbone":{deps:["lib/underscore","lib/jquery"],exports:"Backbone"},"lib/underscore":{exports:"_"},"lib/jquery":{exports:"$"},"tools/jquery.cookie":{deps:["lib/jquery"],exports:"$cookie"}}});requirejs(["appStoreDetail/main"]);
define("appStoreDetail/main","common/config tools/jquery.cookie tools/dhgate.cookie common/langLoader common/feedback common/share/webLinkShare common/share/facebookSDK common/googletranslate common/recommends/recommends common/recommends/youviewed favorite/top-favorites favorite/favorites appDetail/skuChoose appDetail/shippingCost appDetail/customMade appDetail/common/wholesalePrice appDetail/common/d1-tracking appDetail/groupPurchase appDetail/shippingModel appDetail/common/sizetemplate appDetail/common/dispatchPledge tools/ntalkerim appDetail/sample appDetail/bonusCoupon appDetail/fullReduction".split(" "),
function(b,c,d,f,e,g,l,h,m,n,p,t,q,v,r,u,x,y,z,w,A,C,D,E,F){(function(){if(0<_buyAttrListSize){0<_buyAttrCustomListSize&&(DH_Product_Properties_Color_Object.colorList.push("customSize"),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuycustomSize"));for(var b=1;b<=_buyAttrListSize;b++)DH_Product_Properties_Color_Object.colorList.push("listBuy_"+b),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuy_"+b);for(b=0;b<DH_Product_Properties_Color_Object.colorList.length;b++)document.getElementById(DH_Product_Properties_Color_Object.colorList[b])||
(DH_Product_Properties_Color_Object.colorList.splice(b,1),DH_Product_Properties_Color_Object.colorListHiddenInput.splice(b,1))}})();x&&x.execDetailTrack("pd");searchheadersuggest();f.get(function(){new e({el:".topLayer",$goTop:".layerTop"});DH_sku=new q(DH_Product_Properties_Color_Object);DH_SHIP=new z;__ws=new u({MAX1024:{viewSize:[76,50],fullSize:[93,50]},MIN1024:{viewSize:[76,50],fullSize:[88,50]}});new v;new r(DH_Product_Properties_Color_Object);"soldout"!==$("#soldout").attr("class")&&$(".js-groupPurchase").length&&
y.init();(function B(){B.firstBImageTime&&clearTimeout(B.firstBImageTime);window.firstBImageReady?new maskMagnifier({eventType:"hover"}):B.firstBImageTime=setTimeout(B,50)})();$("#searchBarButton").click(function(){var b=$("#searchkey").val();""!=b&&""!=$.trim(b)&&($("#searchact").attr("name",""),$("#groupidhead").attr("name",""),$("#suppliernumhead").attr("name",""),$("#supplieridhead").attr("name",""),$("#pthead").attr("name",""),$("#cidhead").attr("name",""),$("#searchForm").attr("action","/wholesale/search.do"),
_dhq.push(["setVar","etype","130328AB"]),_dhq.push(["event","Public_S0004"]));headsearch()});$("#searchBarStore").click(function(){var b=$("#searchkey").val();""!=b&&""!=$.trim(b)&&(changeSearchParam(),_dhq.push(["setVar","etype","130328AA"]),_dhq.push(["event","Public_S0004"]));headsearch()});searchkeyEnter("searchkey");topNavShowCN();topNavShowEN();new tnDropDown;new h({wrap:"#tnLanguage",trigger:"#tnLanguage a",panle:"#tnLanguageList",activeClass:"tn-active"});document.getElementById("getcouponWrap")&&
new GetCouponPopup;new expandpop({openId:["couponGet"],closeId:["couponAvailableClose"],contentId:["CouponsAvailable"]});new imitationSelect(DH_Product_Properties_Select_Object);new selectUnitPriceCountry;new researchPosition({researchContent:'<a href="//survey.dhgate.com/index.php?sid=62158&lang=en" target="_blank"><img src="//image.dhgate.com/dhs/fob/img/home/feedback-n.png" width="28" height="81" /></a>'});new fixedPosition;$("#toolbarkey").val();var c=$.cookie("DHgate_toolbar");"showtoolbar"!=
c&&null!=c||$.cookie("DHgate_toolbar","showtoolbar",{expires:10,path:"/"});new addToCartProduct;new loadCommonCp;var c=$("input[name='_currentSelectValue']"),d="";if(0<c.length){for(var f=0;f<c.length;f++)if(f==c.length-1)var g=c[f].value,g=g.split("|"),d=d+('<span class="curselectitem">'+g[0]+'<span id="selectOption'+$.trim(g[2])+'">['+$.trim(g[1])+"]</span></span>");else g=c[f].value,g=g.split("|"),d+='<span class="curselectitem">'+g[0]+'<span id="selectOption'+$.trim(g[2])+'">['+$.trim(g[1])+"]</span>,</span>";
$("#curSelection").html(d)}window.DH_Product_Reviews_Sign_PopUp||(window.DH_Product_Reviews_Sign_PopUp=new productReviewsSignPopUp);new PRScaling;window.DH_PR_IM_Popup||(window.DH_PR_IM_Popup=new PRIMPopup);officialReviewInfo();c=new cTab;"300001"==$("#ctab-productReviews").attr("data-state")&&c.LoadProductReviews();new loadTransactionHistory;new loadTransactionFeedback;new loadProductReviews;new EmbedFeedBackLoad;new favoriteItemsPopup;stockIn();new interpret({openId:["delQaIcon"],closeId:["delQaClose"],
contentId:["delQa"]});new IcoHoverOut;$(".save-more-wrap").hover(function(){$(".key-info").addClass("zIndex7");$(".save-more-pop").show()},function(){$(".key-info").removeClass("zIndex7");$(".save-more-pop").hide()});0<$("span[discountCountDown]").length&&salesPromotionCountDown("span","discountCountDown");getStProdFun();DH.request({url:"/dhrec/user_visit.action",type:"get",data:{pagetype:8,itemcode:_itemcode,catalog:_catelogID,vid:DHCookieUtil.getcookie("vid"),BuyerID:DHCookieUtil.getcookie("b2b_buyerid")},
dataType:"json",cache:!1,success:function(b){}});new DH.Store.StoreCoupon({container:"#js-container-coupon",cList:".js-list-coupon",cBtn:".js-list-getStoreCoupon",disabledCls:"disabled",curNum:".js-num",ajax:{params:{pt:$("#js-container-coupon").attr("pt")||"0"}},supplierid:$("#supplierid").val()||""});new DH.Detail.toolbar({container:"#ctabBox",goUp:".buyitnow",top:$("#productdisplayForm").offset().top});new DH.Detail.shortcut({container:".ctab-warp",wrap:"#ctabBox",reference:null,direction:"top",
className:"tab-toolbar"});(function(){var b=[];$.each(DH_Product_Properties_Color_Object.colorList,function(c,d){b.push("#"+d+"> li")});new DH.Detail.attributeLinkage({list:b.join(",")})})();(function(){var b=$(".j-onlinechat");DH.request({url:"/product/getonlinestatus.do",type:"GET",data:{supplierid:_toid||""},dataType:"json",cache:!1,success:function(c){if(1!=c.isonline){if(1!=c.status)return b.remove(),!1;b.addClass("offlinechat")}C.init({sellerid:NTKF_PARAM.sellerid,settingid:NTKF_PARAM.settingid,
productid:_pid||"",supplierid:_toid||"",uid:DHCookieUtil.getcookie("b2b_buyerid"),uname:DHCookieUtil.getcookie("buyerusername")});b.show()},error:function(){b.remove()}})})();(function(){$(".msgtoseller").click(function(){document.messagepost.submit()})})();pageviewevent();initStLiClick();initbuyStLiClick();initDetailedSellerRatings();initCloseSellerinfoRatingspop();ResetValue();toggleCategories();new p;new t;new w;new A;0<$("#sample_form").length&&new D;"en"==b.countryCur&&(new E,F.getFullReturn());
new l.initialize});(function(){var b=function(){1280>window.screen.width||1259>$(window).width()?$(".col-left-inner").addClass("lowscreen"):$(".col-left-inner").removeClass("lowscreen");(1418>window.screen.width||1418>$(window).width())&&$("#unitPriceCountryContent").css({left:"auto",right:"-3px"})};b();$(window).resize(function(){b()})})();0<=document.location.href.indexOf("actionOnload=addFavor")&&$("#"+DH_favoriteItemsPopup.options.favoriteItemsButton).click();$.cookie("b2b_b_t_v2")&&0<$.cookie("b2b_b_t_v2").length&&
$("#islogin").val("true");document.getElementById("getcouponWrap")&&new GetCouponPopup;new storeInfoHoverToggle;topshare();document.getElementById("CatelistWrap")&&toggleCatelist();document.getElementById("tabsTitle")&&TabSubcategory();document.getElementById("MoreCatelist")&&contentMore("MoreCatelist","MoreCatelistCon");document.getElementById("TabsSell")&&new LazyLoad({container:"TabsSell",childs:".slazyload",proheight:".sitems",ImgWidth:50,ImgHeight:50,isZoom:!0})});
